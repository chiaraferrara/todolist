"use strict";(self.webpackChunktodolist=self.webpackChunktodolist||[]).push([[179],{6304:(ot,be,O)=>{O.d(be,{Dh:()=>Me,GT:()=>fe,cc:()=>Te,hO:()=>Le,on:()=>F,pX:()=>ne,xv:()=>ue});var v=O(5879),Z=O(120),P=O(2793);ot=O.hmd(ot);const Y=["ngOnDestroy"],ne=(Oe,ut,ct,re={})=>new Proxy(Oe,{get:(Ie,ee)=>ct.runOutsideAngular(()=>{var we;if(Oe[ee])return!(null===(we=re?.spy)||void 0===we)&&we.get&&re.spy.get(ee,Oe[ee]),Oe[ee];if(Y.indexOf(ee)>-1)return()=>{};const Pe=ut.toPromise().then(oe=>{const q=oe&&oe[ee];return"function"==typeof q?q.bind(oe):q&&q.then?q.then(Be=>ct.run(()=>Be)):ct.run(()=>q)});return new Proxy(()=>{},{get:(oe,q)=>Pe[q],apply:(oe,q,Be)=>Pe.then(dt=>{var Jt;const fn=dt&&dt(...Be);return!(null===(Jt=re?.spy)||void 0===Jt)&&Jt.apply&&re.spy.apply(ee,Be,fn),fn})})})}),fe=(Oe,ut)=>{ut.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(re=>{Object.defineProperty(Oe.prototype,re,Object.getOwnPropertyDescriptor(ct.prototype||ct,re))})})};class pe{constructor(ut){return ut}}const Me=new v.OlP("angularfire2.app.options"),ue=new v.OlP("angularfire2.app.name");function F(Oe,ut,ct){const Ie="object"==typeof ct&&ct||{};Ie.name=Ie.name||"string"==typeof ct&&ct||"[DEFAULT]";const we=Z.Z.apps.filter(Pe=>Pe&&Pe.name===Ie.name)[0]||ut.runOutsideAngular(()=>Z.Z.initializeApp(Oe,Ie));try{JSON.stringify(Oe)!==JSON.stringify(we.options)&&j("error",`${we.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(we)}const j=(Oe,...ut)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Oe](...ut)},X={provide:pe,useFactory:F,deps:[Me,v.R0b,[new v.FiY,ue]]};let Le=(()=>{class Oe{constructor(ct){Z.Z.registerVersion("angularfire",P.q4.full,"core"),Z.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Z.Z.registerVersion("angular",v.q4F.full,ct.toString())}static initializeApp(ct,re){return{ngModule:Oe,providers:[{provide:Me,useValue:ct},{provide:ue,useValue:re}]}}}return Oe.\u0275fac=function(ct){return new(ct||Oe)(v.LFG(v.Lbi))},Oe.\u0275mod=v.oAB({type:Oe}),Oe.\u0275inj=v.cJS({providers:[X]}),Oe})();function Te(Oe,ut,ct,re,Ie){const[,ee,we]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Oe)||[];if(ee)return function Ke(Oe,ut){try{return Oe.toString()===ut.toString()}catch{return Oe===ut}}(Ie,we)||(qe("error",`${ut} was already initialized on the ${ct} Firebase App with different settings.${Ne?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:Ie,was:we})),ee;{const Pe=re();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Pe,Ie]),Pe}}const Ne=!!ot.hot,qe=(Oe,...ut)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Oe](...ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(ot,be,O)=>{O.d(be,{q4:()=>ri,iC:()=>ma,HU:()=>bh,vb:()=>Bl,JM:()=>Es});var v=O(5879),Z=O(4097),P=O(5861),Y=O(4303),ne=O(9058),fe=O(4537),pe=O(7879);const Me=(E,b)=>b.some(A=>E instanceof A);let ue,F;const Le=new WeakMap,Te=new WeakMap,Ke=new WeakMap,Ne=new WeakMap,qe=new WeakMap;let ct={get(E,b,A){if(E instanceof IDBTransaction){if("done"===b)return Te.get(E);if("objectStoreNames"===b)return E.objectStoreNames||Ke.get(E);if("store"===b)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return we(E[b])},set:(E,b,A)=>(E[b]=A,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function ee(E){return"function"==typeof E?function Ie(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(Pe(this),b),we(Le.get(this))}:function(...b){return we(E.apply(Pe(this),b))}:function(b,...A){const k=E.call(Pe(this),b,...A);return Ke.set(k,b.sort?b.sort():[b]),we(k)}}(E):(E instanceof IDBTransaction&&function ut(E){if(Te.has(E))return;const b=new Promise((A,k)=>{const z=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{A(),z()},de=()=>{k(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});Te.set(E,b)}(E),Me(E,function j(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ct):E)}function we(E){if(E instanceof IDBRequest)return function Oe(E){const b=new Promise((A,k)=>{const z=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{A(we(E.result)),z()},de=()=>{k(E.error),z()};E.addEventListener("success",K),E.addEventListener("error",de)});return b.then(A=>{A instanceof IDBCursor&&Le.set(A,E)}).catch(()=>{}),qe.set(b,E),b}(E);if(Ne.has(E))return Ne.get(E);const b=ee(E);return b!==E&&(Ne.set(E,b),qe.set(b,E)),b}const Pe=E=>qe.get(E),Be=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],Jt=new Map;function fn(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(Jt.get(b))return Jt.get(b);const A=b.replace(/FromIndex$/,""),k=b!==A,z=dt.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!z&&!Be.includes(A))return;const K=function(){var de=(0,P.Z)(function*(Ze,...Ge){const lt=this.transaction(Ze,z?"readwrite":"readonly");let At=lt.store;return k&&(At=At.index(Ge.shift())),(yield Promise.all([At[A](...Ge),z&&lt.done]))[0]});return function(Ge){return de.apply(this,arguments)}}();return Jt.set(b,K),K}!function re(E){ct=E(ct)}(E=>({...E,get:(b,A,k)=>fn(b,A)||E.get(b,A,k),has:(b,A)=>!!fn(b,A)||E.has(b,A)}));const pn="@firebase/installations",Ln="0.6.4",Rn=1e4,lr=`w:${Ln}`,ie="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",he=36e5,Qe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(E){return E instanceof ne.ZR&&E.code.includes("request-failed")}function Fn({projectId:E}){return`${le}/projects/${E}/installations`}function mt(E){return{token:E.token,requestStatus:2,expiresIn:kr(E.expiresIn),creationTime:Date.now()}}function Kt(E,b){return at.apply(this,arguments)}function at(){return(at=(0,P.Z)(function*(E,b){const k=(yield b.json()).error;return Qe.create("request-failed",{requestName:E,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function gn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Zn(E){return an.apply(this,arguments)}function an(){return(an=(0,P.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function kr(E){return Number(E.replace("s","000"))}function $n(){return($n=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:A}){const k=Fn(E),z=gn(E),K=b.getImmediate({optional:!0});if(K){const lt=yield K.getHeartbeatsHeader();lt&&z.append("x-firebase-client",lt)}const Ze={method:"POST",headers:z,body:JSON.stringify({fid:A,authVersion:ie,appId:E.appId,sdkVersion:lr})},Ge=yield Zn(()=>fetch(k,Ze));if(Ge.ok){const lt=yield Ge.json();return{fid:lt.fid||A,registrationStatus:2,refreshToken:lt.refreshToken,authToken:mt(lt.authToken)}}throw yield Kt("Create Installation",Ge)})).apply(this,arguments)}function Yr(E){return new Promise(b=>{setTimeout(b,E)})}const co=/^[cdef][\w-]{21}$/,_t="";function bt(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Rt(E){return function hs(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return co.test(A)?A:_t}catch{return _t}}function hn(E){return`${E.appName}!${E.appId}`}const Dn=new Map;function Yn(E,b){const A=hn(E);fs(A,b),function Yt(E,b){const A=function Qt(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=E=>{fs(E.data.key,E.data.fid)}),Lr}();A&&A.postMessage({key:E,fid:b}),function fi(){0===Dn.size&&Lr&&(Lr.close(),Lr=null)}()}(A,b)}function fs(E,b){const A=Dn.get(E);if(A)for(const k of A)k(b)}let Lr=null;const ps="firebase-installations-database",Ps=1,Fr="firebase-installations-store";let Ki=null;function ye(){return Ki||(Ki=function oe(E,b,{blocked:A,upgrade:k,blocking:z,terminated:K}={}){const de=indexedDB.open(E,b),Ze=we(de);return k&&de.addEventListener("upgradeneeded",Ge=>{k(we(de.result),Ge.oldVersion,Ge.newVersion,we(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),Ze.then(Ge=>{K&&Ge.addEventListener("close",()=>K()),z&&Ge.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ze}(ps,Ps,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Fr)}})),Ki}function H(E,b){return ge.apply(this,arguments)}function ge(){return(ge=(0,P.Z)(function*(E,b){const A=hn(E),z=(yield ye()).transaction(Fr,"readwrite"),K=z.objectStore(Fr),de=yield K.get(A);return yield K.put(b,A),yield z.done,(!de||de.fid!==b.fid)&&Yn(E,b.fid),b})).apply(this,arguments)}function $e(E){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,P.Z)(function*(E){const b=hn(E),k=(yield ye()).transaction(Fr,"readwrite");yield k.objectStore(Fr).delete(b),yield k.done})).apply(this,arguments)}function ft(E,b){return en.apply(this,arguments)}function en(){return(en=(0,P.Z)(function*(E,b){const A=hn(E),z=(yield ye()).transaction(Fr,"readwrite"),K=z.objectStore(Fr),de=yield K.get(A),Ze=b(de);return void 0===Ze?yield K.delete(A):yield K.put(Ze,A),yield z.done,Ze&&(!de||de.fid!==Ze.fid)&&Yn(E,Ze.fid),Ze})).apply(this,arguments)}function V(E){return U.apply(this,arguments)}function U(){return U=(0,P.Z)(function*(E){let b;const A=yield ft(E.appConfig,k=>{const z=function W(E){return Pt(E||{fid:bt(),registrationStatus:0})}(k),K=function De(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Qe.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},k=function ae(E,b){return nt.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:k}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Nt(E)}:{installationEntry:b}}(E,z);return b=K.registrationPromise,K.installationEntry});return A.fid===_t?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}}),U.apply(this,arguments)}function nt(){return nt=(0,P.Z)(function*(E,b){try{const A=yield function hi(E,b){return $n.apply(this,arguments)}(E,b);return H(E.appConfig,A)}catch(A){throw ze(A)&&409===A.customData.serverCode?yield $e(E.appConfig):yield H(E.appConfig,{fid:b.fid,registrationStatus:0}),A}}),nt.apply(this,arguments)}function Nt(E){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(E){let b=yield Ur(E.appConfig);for(;1===b.registrationStatus;)yield Yr(100),b=yield Ur(E.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:k}=yield V(E);return k||A}return b})).apply(this,arguments)}function Ur(E){return ft(E,b=>{if(!b)throw Qe.create("installation-not-found");return Pt(b)})}function Pt(E){return function Qn(E){return 1===E.registrationStatus&&E.registrationTime+Rn<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Cr(){return(Cr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},A){const k=function ks(E,{fid:b}){return`${Fn(E)}/${b}/authTokens:generate`}(E,A),z=function vn(E,{refreshToken:b}){const A=gn(E);return A.append("Authorization",function Zr(E){return`${ie} ${E}`}(b)),A}(E,A),K=b.getImmediate({optional:!0});if(K){const lt=yield K.getHeartbeatsHeader();lt&&z.append("x-firebase-client",lt)}const Ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:lr,appId:E.appId}})},Ge=yield Zn(()=>fetch(k,Ze));if(Ge.ok)return mt(yield Ge.json());throw yield Kt("Generate Auth Token",Ge)})).apply(this,arguments)}function Yo(E){return al.apply(this,arguments)}function al(){return al=(0,P.Z)(function*(E,b=!1){let A;const k=yield ft(E.appConfig,K=>{if(!Fs(K))throw Qe.create("not-registered");const de=K.authToken;if(!b&&function Qo(E){return 2===E.requestStatus&&!function qa(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+he}(E)}(de))return K;if(1===de.requestStatus)return A=function Zi(E,b){return Ls.apply(this,arguments)}(E,b),K;{if(!navigator.onLine)throw Qe.create("app-offline");const Ze=function zd(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}(K);return A=function Vi(E,b){return Gt.apply(this,arguments)}(E,Ze),Ze}});return A?yield A:k.authToken}),al.apply(this,arguments)}function Ls(){return(Ls=(0,P.Z)(function*(E,b){let A=yield Ui(E.appConfig);for(;1===A.authToken.requestStatus;)yield Yr(100),A=yield Ui(E.appConfig);const k=A.authToken;return 0===k.requestStatus?Yo(E,b):k})).apply(this,arguments)}function Ui(E){return ft(E,b=>{if(!Fs(b))throw Qe.create("not-registered");return function Yi(E){return 1===E.requestStatus&&E.requestTime+Rn<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Gt(){return Gt=(0,P.Z)(function*(E,b){try{const A=yield function Xt(E,b){return Cr.apply(this,arguments)}(E,b),k=Object.assign(Object.assign({},b),{authToken:A});return yield H(E.appConfig,k),A}catch(A){if(!ze(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const k=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield H(E.appConfig,k)}else yield $e(E.appConfig);throw A}}),Gt.apply(this,arguments)}function Fs(E){return void 0!==E&&2===E.registrationStatus}function Jo(){return(Jo=(0,P.Z)(function*(E){const b=E,{installationEntry:A,registrationPromise:k}=yield V(b);return k?k.catch(console.error):Yo(b).catch(console.error),A.fid})).apply(this,arguments)}function lo(){return lo=(0,P.Z)(function*(E,b=!1){const A=E;return yield function cl(E){return wi.apply(this,arguments)}(A),(yield Yo(A,b)).token}),lo.apply(this,arguments)}function wi(){return(wi=(0,P.Z)(function*(E){const{registrationPromise:b}=yield V(E);b&&(yield b)})).apply(this,arguments)}function ta(E){return Qe.create("missing-app-config-values",{valueName:E})}const dl="installations",Kg=E=>{const b=E.getProvider("app").getImmediate(),A=function Qr(E){if(!E||!E.options)throw ta("App Configuration");if(!E.name)throw ta("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!E.options[A])throw ta(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,Y.qX)(b,"heartbeat"),_delete:()=>Promise.resolve()}},fo=E=>{const b=E.getProvider("app").getImmediate(),A=(0,Y.qX)(b,dl).getImmediate();return{getId:()=>function Xo(E){return Jo.apply(this,arguments)}(A),getToken:z=>function ul(E){return lo.apply(this,arguments)}(A,z)}};(function Zf(){(0,Y.Xd)(new fe.wA(dl,Kg,"PUBLIC")),(0,Y.Xd)(new fe.wA("installations-internal",fo,"PRIVATE"))})(),(0,Y.KN)(pn,Ln),(0,Y.KN)(pn,Ln,"esm2017");const Ka="@firebase/remote-config",Vr=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class It{constructor(b,A,k,z){this.client=b,this.storage=A,this.storageCache=k,this.logger=z}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-A,z=k<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var A=this;return(0,P.Z)(function*(){const[k,z]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(z&&A.isCachedDataFresh(b.cacheMaxAgeMillis,k))return z;b.eTag=z&&z.eTag;const K=yield A.client.fetch(b),de=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&de.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(de),K})()}}function Cn(E=navigator){return E.languages&&E.languages[0]||E.language}class zr{constructor(b,A,k,z,K,de){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=k,this.projectId=z,this.apiKey=K,this.appId=de}fetch(b){var A=this;return(0,P.Z)(function*(){const[k,z]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ge={sdk_version:A.sdkVersion,app_instance_id:k,app_instance_id_token:z,app_id:A.appId,language_code:Cn()},lt={method:"POST",headers:Ze,body:JSON.stringify(Ge)},At=fetch(de,lt),Mt=new Promise((Or,mn)=>{b.signal.addEventListener(()=>{const ln=new Error("The operation was aborted.");ln.name="AbortError",mn(ln)})});let ur;try{yield Promise.race([At,Mt]),ur=yield At}catch(Or){let mn="fetch-client-network";throw"AbortError"===Or?.name&&(mn="fetch-timeout"),Vr.create(mn,{originalErrorMessage:Or?.message})}let tr=ur.status;const _a=ur.headers.get("ETag")||void 0;let On,Ds;if(200===ur.status){let Or;try{Or=yield ur.json()}catch(mn){throw Vr.create("fetch-client-parse",{originalErrorMessage:mn?.message})}On=Or.entries,Ds=Or.state}if("INSTANCE_STATE_UNSPECIFIED"===Ds?tr=500:"NO_CHANGE"===Ds?tr=304:("NO_TEMPLATE"===Ds||"EMPTY_CONFIG"===Ds)&&(On={}),304!==tr&&200!==tr)throw Vr.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:_a,config:On}})()}}class Qa{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,P.Z)(function*(){const k=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,k)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:k}){var z=this;return(0,P.Z)(function*(){yield function po(E,b){return new Promise((A,k)=>{const z=Math.max(b-Date.now(),0),K=setTimeout(A,z);E.addEventListener(()=>{clearTimeout(K),k(Vr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const K=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),K}catch(K){if(!function Tr(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(K))throw K;const de={throttleEndTimeMillis:Date.now()+(0,ne.$s)(k),backoffCount:k+1};return yield z.storage.setThrottleMetadata(de),z.attemptFetch(b,de)}})()}}class ra{constructor(b,A,k,z,K){this.app=b,this._client=A,this._storageCache=k,this._storage=z,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wt(E,b){const A=E.target.error||void 0;return Vr.create(b,{originalErrorMessage:A&&A?.message})}const Sr="app_namespace_store";class gl{constructor(b,A,k,z=function Tn(){return new Promise((E,b)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=k=>{b(wt(k,"storage-open"))},A.onsuccess=k=>{E(k.target.result)},A.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(Sr,{keyPath:"compositeKey"})}}catch(A){b(Vr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=b,this.appName=A,this.namespace=k,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((z,K)=>{const Ze=k.transaction([Sr],"readonly").objectStore(Sr),Ge=A.createCompositeKey(b);try{const lt=Ze.get(Ge);lt.onerror=At=>{K(wt(At,"storage-get"))},lt.onsuccess=At=>{const Mt=At.target.result;z(Mt?Mt.value:void 0)}}catch(lt){K(Vr.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(b,A){var k=this;return(0,P.Z)(function*(){const z=yield k.openDbPromise;return new Promise((K,de)=>{const Ge=z.transaction([Sr],"readwrite").objectStore(Sr),lt=k.createCompositeKey(b);try{const At=Ge.put({compositeKey:lt,value:A});At.onerror=Mt=>{de(wt(Mt,"storage-set"))},At.onsuccess=()=>{K()}}catch(At){de(Vr.create("storage-set",{originalErrorMessage:At?.message}))}})})()}delete(b){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((z,K)=>{const Ze=k.transaction([Sr],"readwrite").objectStore(Sr),Ge=A.createCompositeKey(b);try{const lt=Ze.delete(Ge);lt.onerror=At=>{K(wt(At,"storage-delete"))},lt.onsuccess=()=>{z()}}catch(lt){K(Vr.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class go{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const A=b.storage.getLastFetchStatus(),k=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),K=yield A;K&&(b.lastFetchStatus=K);const de=yield k;de&&(b.lastSuccessfulFetchTimestampMillis=de);const Ze=yield z;Ze&&(b.activeConfig=Ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Vs(){return bi.apply(this,arguments)}function bi(){return(bi=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function dr(){(0,Y.Xd)(new fe.wA("remote-config",function E(b,{instanceIdentifier:A}){const k=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vr.create("registration-window");if(!(0,ne.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:K,apiKey:de,appId:Ze}=k.options;if(!K)throw Vr.create("registration-project-id");if(!de)throw Vr.create("registration-api-key");if(!Ze)throw Vr.create("registration-app-id");const Ge=new gl(Ze,k.name,A=A||"firebase"),lt=new go(Ge),At=new pe.Yd(Ka);At.logLevel=pe.in.ERROR;const Mt=new zr(z,Y.Jn,A,K,de,Ze),ur=new Qa(Mt,Ge),tr=new It(ur,Ge,lt,At),_a=new ra(k,tr,lt,Ge,At);return function $r(E){const b=(0,ne.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,Y.KN)(Ka,"0.4.4"),(0,Y.KN)(Ka,"0.4.4","esm2017")}();const Xa=(E,b)=>b.some(A=>E instanceof A);let Bs,Lt;const Yu=new WeakMap,hr=new WeakMap,mo=new WeakMap,fr=new WeakMap,js=new WeakMap;let pr={get(E,b,A){if(E instanceof IDBTransaction){if("done"===b)return hr.get(E);if("objectStoreNames"===b)return E.objectStoreNames||mo.get(E);if("store"===b)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return pi(E[b])},set:(E,b,A)=>(E[b]=A,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function yo(E){return"function"==typeof E?function Qu(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ia(){return Lt||(Lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(Xr(this),b),pi(Yu.get(this))}:function(...b){return pi(E.apply(Xr(this),b))}:function(b,...A){const k=E.call(Xr(this),b,...A);return mo.set(k,b.sort?b.sort():[b]),pi(k)}}(E):(E instanceof IDBTransaction&&function Xf(E){if(hr.has(E))return;const b=new Promise((A,k)=>{const z=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{A(),z()},de=()=>{k(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});hr.set(E,b)}(E),Xa(E,function Zg(){return Bs||(Bs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,pr):E)}function pi(E){if(E instanceof IDBRequest)return function Ar(E){const b=new Promise((A,k)=>{const z=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{A(pi(E.result)),z()},de=()=>{k(E.error),z()};E.addEventListener("success",K),E.addEventListener("error",de)});return b.then(A=>{A instanceof IDBCursor&&Yu.set(A,E)}).catch(()=>{}),js.set(b,E),b}(E);if(fr.has(E))return fr.get(E);const b=yo(E);return b!==E&&(fr.set(E,b),js.set(b,E)),b}const Xr=E=>js.get(E);function sa(E,b,{blocked:A,upgrade:k,blocking:z,terminated:K}={}){const de=indexedDB.open(E,b),Ze=pi(de);return k&&de.addEventListener("upgradeneeded",Ge=>{k(pi(de.result),Ge.oldVersion,Ge.newVersion,pi(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),Ze.then(Ge=>{K&&Ge.addEventListener("close",()=>K()),z&&Ge.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ze}function oa(E,{blocked:b}={}){const A=indexedDB.deleteDatabase(E);return b&&A.addEventListener("blocked",()=>b()),pi(A).then(()=>{})}const ml=["get","getKey","getAll","getAllKeys","count"],Yg=["put","add","delete","clear"],Xu=new Map;function yl(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(Xu.get(b))return Xu.get(b);const A=b.replace(/FromIndex$/,""),k=b!==A,z=Yg.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!z&&!ml.includes(A))return;const K=function(){var de=(0,P.Z)(function*(Ze,...Ge){const lt=this.transaction(Ze,z?"readwrite":"readonly");let At=lt.store;return k&&(At=At.index(Ge.shift())),(yield Promise.all([At[A](...Ge),z&&lt.done]))[0]});return function(Ge){return de.apply(this,arguments)}}();return Xu.set(b,K),K}!function Br(E){pr=E(pr)}(E=>({...E,get:(b,A,k)=>yl(b,A)||E.get(b,A,k),has:(b,A)=>!!yl(b,A)||E.has(b,A)}));const Zd="/firebase-messaging-sw.js",vl="/firebase-cloud-messaging-push-scope",Yd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qg="https://fcmregistrations.googleapis.com/v1",Sn="google.c.a.c_id",Xg="google.c.a.c_l",Jf="google.c.a.ts";var Qd=function(E){return E.PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",E}(Qd||{});function _s(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _l(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(A),z=new Uint8Array(k.length);for(let K=0;K<k.length;++K)z[K]=k.charCodeAt(K);return z}const aa="fcm_token_details_db",Il=5,Ja="fcm_token_object_Store";function eu(){return eu=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(aa))return null;let b=null;return(yield sa(aa,Il,{upgrade:(k=(0,P.Z)(function*(z,K,de,Ze){var Ge;if(K<2||!z.objectStoreNames.contains(Ja))return;const lt=Ze.objectStore(Ja),At=yield lt.index("fcmSenderId").get(E);if(yield lt.clear(),At)if(2===K){const Mt=At;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;b={token:Mt.fcmToken,createTime:null!==(Ge=Mt.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:_s(Mt.vapidKey)}}}else if(3===K){const Mt=At;b={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:_s(Mt.auth),p256dh:_s(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:_s(Mt.vapidKey)}}}else if(4===K){const Mt=At;b={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:_s(Mt.auth),p256dh:_s(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:_s(Mt.vapidKey)}}}}),function(K,de,Ze,Ge){return k.apply(this,arguments)})})).close(),yield oa(aa),yield oa("fcm_vapid_details_db"),yield oa("undefined"),function vo(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var k}),eu.apply(this,arguments)}const Qi="firebase-messaging-database",Xd=1,Ci="firebase-messaging-store";let ar=null;function _o(){return ar||(ar=sa(Qi,Xd,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Ci)}})),ar}function Jr(E){return Io.apply(this,arguments)}function Io(){return Io=(0,P.Z)(function*(E){const b=nu(E),k=yield(yield _o()).transaction(Ci).objectStore(Ci).get(b);if(k)return k;{const z=yield function qv(E){return eu.apply(this,arguments)}(E.appConfig.senderId);if(z)return yield wl(E,z),z}}),Io.apply(this,arguments)}function wl(E,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(E,b){const A=nu(E),z=(yield _o()).transaction(Ci,"readwrite");return yield z.objectStore(Ci).put(b,A),yield z.done,b})).apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(E){const b=nu(E),k=(yield _o()).transaction(Ci,"readwrite");yield k.objectStore(Ci).delete(b),yield k.done})).apply(this,arguments)}function nu({appConfig:E}){return E.appId}const gr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function El(E,b){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,P.Z)(function*(E,b){const A=yield th(E),k=Jg(b),z={method:"POST",headers:A,body:JSON.stringify(k)};let K;try{K=yield(yield fetch(iu(E.appConfig),z)).json()}catch(de){throw gr.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(K.error)throw gr.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw gr.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function ru(){return(ru=(0,P.Z)(function*(E,b){const A=yield th(E),k=Jg(b.subscriptionOptions),z={method:"PATCH",headers:A,body:JSON.stringify(k)};let K;try{K=yield(yield fetch(`${iu(E.appConfig)}/${b.token}`,z)).json()}catch(de){throw gr.create("token-update-failed",{errorInfo:de?.toString()})}if(K.error)throw gr.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw gr.create("token-update-no-token");return K.token})).apply(this,arguments)}function wo(E,b){return $s.apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(E,b){const k={method:"DELETE",headers:yield th(E)};try{const K=yield(yield fetch(`${iu(E.appConfig)}/${b}`,k)).json();if(K.error)throw gr.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(z){throw gr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function iu({projectId:E}){return`${Qg}/projects/${E}/registrations`}function th(E){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,P.Z)(function*({appConfig:E,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Jg({p256dh:E,auth:b,endpoint:A,vapidKey:k}){const z={web:{endpoint:A,auth:b,p256dh:E}};return k!==Yd&&(z.web.applicationPubKey=k),z}const nh=6048e5;function Cl(){return Cl=(0,P.Z)(function*(E){const b=yield function su(E,b){return Tl.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:_s(b.getKey("auth")),p256dh:_s(b.getKey("p256dh"))},k=yield Jr(E.firebaseDependencies);if(k){if(function ih(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}(k.subscriptionOptions,A))return Date.now()>=k.createTime+nh?function tp(E,b){return ca.apply(this,arguments)}(E,{token:k.token,createTime:Date.now(),subscriptionOptions:A}):k.token;try{yield wo(E.firebaseDependencies,k.token)}catch(z){console.warn(z)}return tm(E.firebaseDependencies,A)}return tm(E.firebaseDependencies,A)}),Cl.apply(this,arguments)}function ec(){return ec=(0,P.Z)(function*(E){const b=yield Jr(E.firebaseDependencies);b&&(yield wo(E.firebaseDependencies,b.token),yield function Jd(E){return ua.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),ec.apply(this,arguments)}function ca(){return ca=(0,P.Z)(function*(E,b){try{const A=yield function bl(E,b){return ru.apply(this,arguments)}(E.firebaseDependencies,b),k=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield wl(E.firebaseDependencies,k),A}catch(A){throw yield function rh(E){return ec.apply(this,arguments)}(E),A}}),ca.apply(this,arguments)}function tm(E,b){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(E,b){const k={token:yield El(E,b),createTime:Date.now(),subscriptionOptions:b};return yield wl(E,k),k.token})).apply(this,arguments)}function Tl(){return(Tl=(0,P.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_l(b)})})).apply(this,arguments)}function tc(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function ou(E,b){if(!b.notification)return;E.notification={};const A=b.notification.title;A&&(E.notification.title=A);const k=b.notification.body;k&&(E.notification.body=k);const z=b.notification.image;z&&(E.notification.image=z);const K=b.notification.icon;K&&(E.notification.icon=K)}(b,E),function np(E,b){b.data&&(E.data=b.data)}(b,E),function Sl(E,b){var A,k,z,K,de;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Ze=null!==(z=null===(k=b.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==z?z:null===(K=b.notification)||void 0===K?void 0:K.click_action;Ze&&(E.fcmOptions.link=Ze);const Ge=null===(de=b.fcmOptions)||void 0===de?void 0:de.analytics_label;Ge&&(E.fcmOptions.analyticsLabel=Ge)}(b,E),b}function Al(E,b){const A=[];for(let k=0;k<E.length;k++)A.push(E.charAt(k)),k<b.length&&A.push(b.charAt(k));return A.join("")}function Ml(E){return gr.create("missing-app-config-values",{valueName:E})}Al("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Al("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ip{constructor(b,A,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function rp(E){if(!E||!E.options)throw Ml("App Configuration Object");if(!E.name)throw Ml("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const k of b)if(!A[k])throw Ml(k);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:A,analyticsProvider:k}}_delete(){return Promise.resolve()}}function au(){return(au=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Zd,{scope:vl}),E.swRegistration.update().catch(()=>{})}catch(b){throw gr.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function Eo(){return(Eo=(0,P.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield function nc(E){return au.apply(this,arguments)}(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function Do(){return(Do=(0,P.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=Yd)})).apply(this,arguments)}function uu(){return uu=(0,P.Z)(function*(E,b){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield function Xi(E,b){return Do.apply(this,arguments)}(E,b?.vapidKey),yield function sp(E,b){return Eo.apply(this,arguments)}(E,b?.serviceWorkerRegistration),function em(E){return Cl.apply(this,arguments)}(E)}),uu.apply(this,arguments)}function Bi(){return(Bi=(0,P.Z)(function*(E,b,A){const k=function oh(E){switch(E){case Qd.NOTIFICATION_CLICKED:return"notification_open";case Qd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:A[Sn],message_name:A[Xg],message_time:A[Jf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sn(){return sn=(0,P.Z)(function*(E,b){const A=b.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===Qd.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(tc(A)):E.onMessageHandler.next(tc(A)));const k=A.data;(function nm(E){return"object"==typeof E&&!!E&&Sn in E})(k)&&"1"===k["google.c.a.e"]&&(yield function op(E,b,A){return Bi.apply(this,arguments)}(E,A.messageType,k))}),sn.apply(this,arguments)}const bo="@firebase/messaging",Mr=E=>{const b=new ip(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function ah(E,b){return sn.apply(this,arguments)}(b,A)),b},ap=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:k=>function sh(E,b){return uu.apply(this,arguments)}(b,k)}};function To(){return xr.apply(this,arguments)}function xr(){return(xr=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xl(){(0,Y.Xd)(new fe.wA("messaging",Mr,"PUBLIC")),(0,Y.Xd)(new fe.wA("messaging-internal",ap,"PRIVATE")),(0,Y.KN)(bo,"0.12.4"),(0,Y.KN)(bo,"0.12.4","esm2017")}();const _n="analytics",im="firebase_id",Et="origin",uh=6e4,ch="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ic="https://www.googletagmanager.com/gtag/js",mr=new pe.Yd("@firebase/analytics"),Rr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ji(E){if(!E.startsWith(ic)){const b=Rr.create("invalid-gtag-resource",{gtagURL:E});return mr.warn(b.message),""}return E}function Nl(E){return Promise.all(E.map(b=>b.catch(A=>A)))}function Ae(){return(Ae=(0,P.Z)(function*(E,b,A,k,z,K){const de=k[z];try{if(de)yield b[de];else{const Ge=(yield Nl(A)).find(lt=>lt.measurementId===z);Ge&&(yield b[Ge.appId])}}catch(Ze){mr.error(Ze)}E("config",z,K)})).apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*(E,b,A,k,z){try{let K=[];if(z&&z.send_to){let de=z.send_to;Array.isArray(de)||(de=[de]);const Ze=yield Nl(A);for(const Ge of de){const lt=Ze.find(Mt=>Mt.measurementId===Ge),At=lt&&b[lt.appId];if(!At){K=[];break}K.push(At)}}0===K.length&&(K=Object.values(b)),yield Promise.all(K),E("event",k,z||{})}catch(K){mr.error(K)}})).apply(this,arguments)}const ha=30,Pl=new class So{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function dp(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function kl(){return(kl=(0,P.Z)(function*(E){var b;const{appId:A,apiKey:k}=E,z={method:"GET",headers:dp(k)},K=ch.replace("{app-id}",A),de=yield fetch(K,z);if(200!==de.status&&304!==de.status){let Ze="";try{const Ge=yield de.json();null!==(b=Ge.error)&&void 0!==b&&b.message&&(Ze=Ge.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:Ze})}return de.json()})).apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(E,b=Pl,A){const{appId:k,apiKey:z,measurementId:K}=E.options;if(!k)throw Rr.create("no-app-id");if(!z){if(K)return{measurementId:K,appId:k};throw Rr.create("no-api-key")}const de=b.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new fh;return setTimeout((0,P.Z)(function*(){Ze.abort()}),void 0!==A?A:uh),dh({appId:k,apiKey:z,measurementId:K},de,Ze,b)})).apply(this,arguments)}function dh(E,b,A){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,P.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:A},k,z=Pl){var K;const{appId:de,measurementId:Ze}=E;try{yield function zs(E,b){return new Promise((A,k)=>{const z=Math.max(b-Date.now(),0),K=setTimeout(A,z);E.addEventListener(()=>{clearTimeout(K),k(Rr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(k,b)}catch(Ge){if(Ze)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:de,measurementId:Ze};throw Ge}try{const Ge=yield function Wv(E){return kl.apply(this,arguments)}(E);return z.deleteThrottleMetadata(de),Ge}catch(Ge){const lt=Ge;if(!function hh(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(lt)){if(z.deleteThrottleMetadata(de),Ze)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:de,measurementId:Ze};throw Ge}const At=503===Number(null===(K=lt?.customData)||void 0===K?void 0:K.httpStatus)?(0,ne.$s)(A,z.intervalMillis,ha):(0,ne.$s)(A,z.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+At,backoffCount:A+1};return z.setThrottleMetadata(de,Mt),mr.debug(`Calling attemptFetch again in ${At} millis`),dh(E,Mt,k,z)}}),Ao.apply(this,arguments)}class fh{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let cc,zn;function lc(){return(lc=(0,P.Z)(function*(E,b,A,k,z){if(z&&z.global)E("event",A,k);else{const K=yield b;E("event",A,Object.assign(Object.assign({},k),{send_to:K}))}})).apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(){if(!(0,ne.hl)())return mr.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(E){return mr.warn(Rr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function es(){return es=(0,P.Z)(function*(E,b,A,k,z,K,de){var Ze;const Ge=function ti(E){return gi.apply(this,arguments)}(E);Ge.then(tr=>{A[tr.measurementId]=tr.appId,E.options.measurementId&&tr.measurementId!==E.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>mr.error(tr)),b.push(Ge);const lt=function Jn(){return $i.apply(this,arguments)}().then(tr=>{if(tr)return k.getId()}),[At,Mt]=yield Promise.all([Ge,lt]);(function uc(E){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(ic)&&A.src.includes(E))return A;return null})(K)||function oc(E,b){const A=function sc(E,b){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,b)),A}("firebase-js-sdk-policy",{createScriptURL:Ji}),k=document.createElement("script"),z=`${ic}?l=${E}&id=${b}`;k.src=A?A?.createScriptURL(z):z,k.async=!0,document.head.appendChild(k)}(K,At.measurementId),zn&&(z("consent","default",zn),function Gs(E){zn=E}(void 0)),z("js",new Date);const ur=null!==(Ze=de?.config)&&void 0!==Ze?Ze:{};return ur[Et]="firebase",ur.update=!0,null!=Mt&&(ur[im]=Mt),z("config",At.measurementId,ur),cc&&(z("set",cc),function cu(E){cc=E}(void 0)),At.measurementId}),es.apply(this,arguments)}class vr{constructor(b){this.app=b}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},Ut=[];const Ll={};let er,Is,qs="dataLayer",fa=!1;function Ws(E,b,A){!function xo(){const E=[];if((0,ne.ru)()&&E.push("This is a browser extension environment."),(0,ne.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((k,z)=>`(${z+1}) ${k}`).join(" "),A=Rr.create("invalid-analytics-context",{errorInfo:b});mr.warn(A.message)}}();const k=E.options.appId;if(!k)throw Rr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Rr.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[k])throw Rr.create("already-exists",{id:k});if(!fa){!function sm(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(qs);const{wrappedGtag:K,gtagCore:de}=function yr(E,b,A,k,z){let K=function(...de){window[k].push(arguments)};return window[z]&&"function"==typeof window[z]&&(K=window[z]),window[z]=function ac(E,b,A,k){function K(){return K=(0,P.Z)(function*(de,...Ze){try{if("event"===de){const[Ge,lt]=Ze;yield function jt(E,b,A,k,z){return ji.apply(this,arguments)}(E,b,A,Ge,lt)}else if("config"===de){const[Ge,lt]=Ze;yield function Ol(E,b,A,k,z,K){return Ae.apply(this,arguments)}(E,b,A,k,Ge,lt)}else if("consent"===de){const[Ge]=Ze;E("consent","update",Ge)}else if("get"===de){const[Ge,lt,At]=Ze;E("get",Ge,lt,At)}else if("set"===de){const[Ge]=Ze;E("set",Ge)}else E(de,...Ze)}catch(Ge){mr.error(Ge)}}),K.apply(this,arguments)}return function z(de){return K.apply(this,arguments)}}(K,E,b,A),{gtagCore:K,wrappedGtag:window[z]}}(ni,Ut,Ll,qs,"gtag");Is=K,er=de,fa=!0}return ni[k]=function $t(E,b,A,k,z,K,de){return es.apply(this,arguments)}(E,Ut,Ll,b,er,qs,A),new vr(E)}function Fl(){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const du="@firebase/analytics";!function hc(){(0,Y.Xd)(new fe.wA(_n,(b,{options:A})=>Ws(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,Y.Xd)(new fe.wA("analytics-internal",function E(b){try{const A=b.getProvider(_n).getImmediate();return{logEvent:(k,z,K)=>function wh(E,b,A,k){E=(0,ne.m9)(E),function om(E,b,A,k,z){return lc.apply(this,arguments)}(Is,ni[E.app.options.appId],b,A,k).catch(z=>mr.error(z))}(A,k,z,K)}}catch(A){throw Rr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,Y.KN)(du,"0.10.0"),(0,Y.KN)(du,"0.10.0","esm2017")}();var An=O(1954),fc=O(2631);const pc=new class Ul extends fc.v{}(class ts extends An.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(b,A,k):(b.flush(this),0)}});var Ir=O(6321),ns=O(9397),No=O(5137),rs=O(3093);const ri=new v.GfV("7.6.1"),Oo="__angularfire_symbol__analyticsIsSupportedValue",Zs="__angularfire_symbol__analyticsIsSupported",hu="__angularfire_symbol__remoteConfigIsSupportedValue",ws="__angularfire_symbol__remoteConfigIsSupported",pa="__angularfire_symbol__messagingIsSupportedValue",Po="__angularfire_symbol__messagingIsSupported";function Es(E,b,A){if(b){if(1===b.length)return b[0];const K=b.filter(de=>de.app===A);if(1===K.length)return K[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Zs]||(globalThis[Zs]=Fl().then(E=>globalThis[Oo]=E).catch(()=>globalThis[Oo]=!1)),globalThis[Po]||(globalThis[Po]=To().then(E=>globalThis[pa]=E).catch(()=>globalThis[pa]=!1)),globalThis[ws]||(globalThis[ws]=Vs().then(E=>globalThis[hu]=E).catch(()=>globalThis[hu]=!1));const Bl=(E,b)=>{const A=b?[b]:(0,Z.C6)(),k=[];return A.forEach(z=>{z.container.getProvider(E).instances.forEach(de=>{k.includes(de)||k.push(de)})}),k};function Hi(){}class gu{constructor(b,A=pc){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,k){const z=this.zone;return this.delegate.schedule(function(de){z.runGuarded(()=>{b.apply(this,[de])})},A,k)}}class ga{constructor(b){this.zone=b,this.task=null}call(b,A){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hi,{},Hi,Hi)),A.pipe((0,ns.b)({next:k,complete:k,error:k})).subscribe(b).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bh=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new gu(Zone.current)),this.insideAngular=A.run(()=>new gu(Zone.current,Ir.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(v.LFG(v.R0b))},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function In(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function ma(E){return In(),function mu(E){return function(A){return(A=A.lift(new ga(E.ngZone))).pipe((0,No.R)(E.outsideAngular),(0,rs.Q)(E.insideAngular))}}(In())(E)}},9058:(ot,be,O)=>{O.d(be,{$s:()=>$e,BH:()=>ee,G6:()=>lr,L:()=>ue,LL:()=>Se,Pz:()=>Ie,Sg:()=>we,UG:()=>q,US:()=>fe,ZB:()=>X,ZR:()=>Ee,aH:()=>re,b$:()=>Jt,eu:()=>le,hl:()=>ie,jU:()=>Be,m9:()=>en,ne:()=>hn,pd:()=>bt,r3:()=>an,ru:()=>dt,tV:()=>F,uI:()=>oe,vZ:()=>$n,w1:()=>pn,xO:()=>co,xb:()=>Zr,z$:()=>Pe,zI:()=>he,zd:()=>_t});const Y=function(V){const U=[];let W=0;for(let De=0;De<V.length;De++){let ae=V.charCodeAt(De);ae<128?U[W++]=ae:ae<2048?(U[W++]=ae>>6|192,U[W++]=63&ae|128):55296==(64512&ae)&&De+1<V.length&&56320==(64512&V.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&V.charCodeAt(++De)),U[W++]=ae>>18|240,U[W++]=ae>>12&63|128,U[W++]=ae>>6&63|128,U[W++]=63&ae|128):(U[W++]=ae>>12|224,U[W++]=ae>>6&63|128,U[W++]=63&ae|128)}return U},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,U){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<V.length;ae+=3){const nt=V[ae],Nt=ae+1<V.length,Ct=Nt?V[ae+1]:0,Ur=ae+2<V.length,Pt=Ur?V[ae+2]:0;let Cr=(15&Ct)<<2|Pt>>6,ks=63&Pt;Ur||(ks=64,Nt||(Cr=64)),De.push(W[nt>>2],W[(3&nt)<<4|Ct>>4],W[Cr],W[ks])}return De.join("")},encodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(V):this.encodeByteArray(Y(V),U)},decodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(V):function(V){const U=[];let W=0,De=0;for(;W<V.length;){const ae=V[W++];if(ae<128)U[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const nt=V[W++];U[De++]=String.fromCharCode((31&ae)<<6|63&nt)}else if(ae>239&&ae<365){const Ur=((7&ae)<<18|(63&V[W++])<<12|(63&V[W++])<<6|63&V[W++])-65536;U[De++]=String.fromCharCode(55296+(Ur>>10)),U[De++]=String.fromCharCode(56320+(1023&Ur))}else{const nt=V[W++],Nt=V[W++];U[De++]=String.fromCharCode((15&ae)<<12|(63&nt)<<6|63&Nt)}}return U.join("")}(this.decodeStringToByteArray(V,U))},decodeStringToByteArray(V,U){this.init_();const W=U?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<V.length;){const nt=W[V.charAt(ae++)],Ct=ae<V.length?W[V.charAt(ae)]:0;++ae;const Pt=ae<V.length?W[V.charAt(ae)]:64;++ae;const Xt=ae<V.length?W[V.charAt(ae)]:64;if(++ae,null==nt||null==Ct||null==Pt||null==Xt)throw new pe;De.push(nt<<2|Ct>>4),64!==Pt&&(De.push(Ct<<4&240|Pt>>2),64!==Xt&&De.push(Pt<<6&192|Xt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ue=function(V){return function(V){const U=Y(V);return fe.encodeByteArray(U,!0)}(V).replace(/\./g,"")},F=function(V){try{return fe.decodeString(V,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function X(V,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return U}for(const W in U)!U.hasOwnProperty(W)||!Le(W)||(V[W]=X(V[W],U[W]));return V}function Le(V){return"__proto__"!==V}const Oe=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=V&&F(V[1]);return U&&JSON.parse(U)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},re=()=>{var V;return null===(V=Oe())||void 0===V?void 0:V.config},Ie=V=>{var U;return null===(U=Oe())||void 0===U?void 0:U[`_${V}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,W)=>{this.resolve=U,this.reject=W})}wrapCallback(U){return(W,De)=>{W?this.reject(W):this.resolve(De),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(W):U(W,De))}}}function we(V,U){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=U||"demo-project",ae=V.iat||0,nt=V.sub||V.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},V);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Nt)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function q(){var V;const U=null===(V=Oe())||void 0===V?void 0:V.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return"object"==typeof self&&self.self===self}function dt(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pn(){const V=Pe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function lr(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((V,U)=>{try{let W=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),W||self.indexedDB.deleteDatabase(De),V(!0)},ae.onupgradeneeded=()=>{W=!1},ae.onerror=()=>{var nt;U((null===(nt=ae.error)||void 0===nt?void 0:nt.message)||"")}}catch(W){U(W)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(U,W,De){super(W),this.code=U,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(U,W,De){this.service=U,this.serviceName=W,this.errors=De}create(U,...W){const De=W[0]||{},ae=`${this.service}/${U}`,nt=this.errors[U],Nt=nt?function Qe(V,U){return V.replace(ze,(W,De)=>{const ae=U[De];return null!=ae?String(ae):`<${De}?>`})}(nt,De):"Error";return new Ee(ae,`${this.serviceName}: ${Nt} (${ae}).`,De)}}const ze=/\{\$([^}]+)}/g;function an(V,U){return Object.prototype.hasOwnProperty.call(V,U)}function Zr(V){for(const U in V)if(Object.prototype.hasOwnProperty.call(V,U))return!1;return!0}function $n(V,U){if(V===U)return!0;const W=Object.keys(V),De=Object.keys(U);for(const ae of W){if(!De.includes(ae))return!1;const nt=V[ae],Nt=U[ae];if(Yr(nt)&&Yr(Nt)){if(!$n(nt,Nt))return!1}else if(nt!==Nt)return!1}for(const ae of De)if(!W.includes(ae))return!1;return!0}function Yr(V){return null!==V&&"object"==typeof V}function co(V){const U=[];for(const[W,De]of Object.entries(V))Array.isArray(De)?De.forEach(ae=>{U.push(encodeURIComponent(W)+"="+encodeURIComponent(ae))}):U.push(encodeURIComponent(W)+"="+encodeURIComponent(De));return U.length?"&"+U.join("&"):""}function _t(V){const U={};return V.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,nt]=De.split("=");U[decodeURIComponent(ae)]=decodeURIComponent(nt)}}),U}function bt(V){const U=V.indexOf("?");if(!U)return"";const W=V.indexOf("#",U);return V.substring(U,W>0?W:void 0)}function hn(V,U){const W=new Dn(V,U);return W.subscribe.bind(W)}class Dn{constructor(U,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{U(this)}).catch(De=>{this.error(De)})}next(U){this.forEachObserver(W=>{W.next(U)})}error(U){this.forEachObserver(W=>{W.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,W,De){let ae;if(void 0===U&&void 0===W&&void 0===De)throw new Error("Missing Observer.");ae=function rn(V,U){if("object"!=typeof V||null===V)return!1;for(const W of U)if(W in V&&"function"==typeof V[W])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:W,complete:De},void 0===ae.next&&(ae.next=Un),void 0===ae.error&&(ae.error=Un),void 0===ae.complete&&(ae.complete=Un);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),nt}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,U)}sendOne(U,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{W(this.observers[U])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Un(){}const Ki=1e3,ye=2,H=144e5,ge=.5;function $e(V,U=Ki,W=ye){const De=U*Math.pow(W,V),ae=Math.round(ge*De*(Math.random()-.5)*2);return Math.min(H,De+ae)}function en(V){return V&&V._delegate?V._delegate:V}},8591:(ot,be,O)=>{var v=O(5879);let Z=null;function P(){return Z}class ne{}const fe=new v.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(ue)},providedIn:"platform"})}return n})();const Me=new v.OlP("Location Initialized");let ue=(()=>{class n extends pe{constructor(){super(),this._doc=(0,v.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function F(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(Ke)},providedIn:"root"})}return n})();const Te=new v.OlP("appBaseHref");let Ke=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return F(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+X(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+X(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(pe),v.LFG(Te,8))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ne=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=F(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+X(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+X(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(pe),v.LFG(Te,8))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})(),qe=(()=>{class n{constructor(t){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(ct(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function ut(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ct(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=F;static#n=this.stripTrailingSlash=j;static#r=this.\u0275fac=function(r){return new(r||n)(v.LFG(Le))};static#i=this.\u0275prov=v.Yz7({token:n,factory:function(){return function Oe(){return new qe((0,v.LFG)(Le))}()},providedIn:"root"})}return n})();function ct(n){return n.replace(/\/index.html$/,"")}const Jo=/\s+/,ul=[];let lo=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this.initialClasses=ul,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Jo):ul}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Jo):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Jo).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static#e=this.\u0275fac=function(r){return new(r||n)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))};static#t=this.\u0275dir=v.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ho{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ho(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),ll(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ll(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))};static#t=this.\u0275dir=v.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function ll(n,e){n.context.$implicit=e.item}let ea=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(v.Y36(v.s_b),v.Y36(v.Rgc))};static#t=this.\u0275dir=v.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Wg{constructor(){this.$implicit=null,this.ngIf=null}}function Kf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,v.AaK)(e)}'.`)}let Nn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=v.oAB({type:n});static#n=this.\u0275inj=v.cJS({})}return n})();function ms(n){return"server"===n}let dr=(()=>{class n{static#e=this.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new ys((0,v.LFG)(fe),window)})}return n})();class ys{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ih extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tc extends ih{static makeCurrent(){!function Y(n){Z||(Z=n)}(new tc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function np(){return ou=ou||document.querySelector("base"),ou?ou.getAttribute("href"):null}();return null==t?null:function nm(n){Sl=Sl||document.createElement("a"),Sl.setAttribute("href",n);const e=Sl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Sl,ou=null,rp=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ml=new v.OlP("EventManagerPlugins");let ip=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new v.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(Ml),v.LFG(v.R0b))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();class nc{constructor(e){this._doc=e}}const au="ng-app-id";let sp=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ms(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${au}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(au),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(au,this.appId),d}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,d=u.get(r)?.elements;d?d.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(fe),v.LFG(v.AFp),v.LFG(v.Ojb,8),v.LFG(v.Lbi))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();const Eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xi=/%COMP%/g,Bi=new v.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sn(n,e){return e.map(t=>t.replace(Xi,n))}let bo=(()=>{class n{constructor(t,r,o,u,d,g,w,C=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=g,this.ngZone=w,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=ms(g),this.defaultRenderer=new Co(t,d,w,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===v.ifc.ShadowDom&&(r={...r,encapsulation:v.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof up?o.applyToHost(t):o instanceof xr&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const d=this.doc,g=this.ngZone,w=this.eventManager,C=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(r.encapsulation){case v.ifc.Emulated:u=new up(w,C,r,this.appId,M,d,g,N);break;case v.ifc.ShadowDom:return new To(w,C,t,r,d,g,this.nonce,N);default:u=new xr(w,C,r,M,d,g,N)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(ip),v.LFG(sp),v.LFG(v.AFp),v.LFG(Bi),v.LFG(fe),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(v.Ojb))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();class Co{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Eo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new v.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Eo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Eo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,r,o&v.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function xl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class To extends Co{constructor(e,t,r,o,u,d,g,w){super(e,u,d,w),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=sn(o.id,o.styles);for(const M of C){const N=document.createElement("style");g&&N.setAttribute("nonce",g),N.textContent=M,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xr extends Co{constructor(e,t,r,o,u,d,g,w){super(e,u,d,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=w?sn(w,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class up extends xr{constructor(e,t,r,o,u,d,g,w){const C=o+"-"+r.id;super(e,t,r,u,d,g,w,C),this.contentAttr=function oh(n){return"_ngcontent-%COMP%".replace(Xi,n)}(C),this.hostAttr=function ah(n){return"_nghost-%COMP%".replace(Xi,n)}(C)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let da=(()=>{class n extends nc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(fe))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();const cp=["alt","control","meta","shift"],ei={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rl=(()=>{class n extends nc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),cp.forEach(C=>{const M=r.indexOf(C);M>-1&&(r.splice(M,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ei[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),cp.forEach(d=>{d!==o&&(0,lp[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(fe))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();const mr=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function Et(){tc.makeCurrent()},multi:!0},{provide:fe,useFactory:function ch(){return(0,v.RDi)(document),document},deps:[]}]),lh=new v.OlP(""),Rr=[{provide:v.rWj,useClass:class Al{addToWindow(e){v.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new v.vHH(5103,!1);return u},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(r=>{const o=v.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(w=>{w.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],Ji=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function uh(){return new v.qLn},deps:[]},{provide:Ml,useClass:da,multi:!0,deps:[fe,v.R0b,v.Lbi]},{provide:Ml,useClass:Rl,multi:!0,deps:[fe]},bo,sp,ip,{provide:v.FYo,useExisting:bo},{provide:class bi{},useClass:rp,deps:[]},[]];let Nl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(lh,12))};static#t=this.\u0275mod=v.oAB({type:n});static#n=this.\u0275inj=v.cJS({providers:[...Ji,...Rr],imports:[Nn,v.hGG]})}return n})(),Ae=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(fe))};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(r){let o=null;return o=r?new r:function Ol(){return new Ae((0,v.LFG)(fe))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;var Nr=O(6304),yh=O(6321),mi=O(5592),Vn=O(2459),yt=O(2096),zn=O(2793),Gs=O(7537),Jn=O(4564);function $i(...n){return function cu(){return(0,Gs.J)(1)}()((0,Vn.D)(n,(0,Jn.yG)(n)))}var $t=O(9360);function es(...n){const e=(0,Jn.yG)(n);return(0,$t.e)((t,r)=>{(e?$i(n,t,e):$i(n,t)).subscribe(r)})}var vr=O(8251);function ni(){return(0,$t.e)((n,e)=>{let t,r=!1;n.subscribe((0,vr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var Ut=O(7398);function qs(n,e){return(0,$t.e)(function Ll(n,e,t,r,o){return(u,d)=>{let g=t,w=e,C=0;u.subscribe((0,vr.x)(d,M=>{const N=C++;w=g?n(w,M,N):(g=!0,M),r&&d.next(w)},o&&(()=>{g&&d.next(w),d.complete()})))}}(n,e,arguments.length>=2,!0))}var Mo=O(3997);function er(n,e){return(0,$t.e)((t,r)=>{let o=0;t.subscribe((0,vr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}O(8977);var We,fa=O(3399),ve=O(5861),xo=O(7592),Ws=O(4537),Ks=O(7879),Zt=O(9058),Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_r={},vh=vh||{},St=Fl||self;function Ro(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ih="closure_uid_"+(1e9*Math.random()>>>0),wh=0;function am(n,e,t){return n.call.apply(n.bind,arguments)}function du(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Gn(n,e,t){return(Gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?am:du).apply(null,arguments)}function hc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function An(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function ts(){this.s=this.s,this.o=this.o}ts.prototype.s=!1,ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function _h(n){Object.prototype.hasOwnProperty.call(n,Ih)&&n[Ih]||(n[Ih]=++wh)}(this)},ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ul=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Eh(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ro(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var ns=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",()=>{},e),St.removeEventListener("test",()=>{},e)}catch{}return n}();function No(n){return/^[\s\xa0]*$/.test(n)}function rs(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function ri(n){return-1!=rs().indexOf(n)}function Oo(n){return Oo[" "](n),n}Oo[" "]=function(){};var pu,n,hu=ri("Opera"),ws=ri("Trident")||ri("MSIE"),pa=ri("Edge"),Po=pa||ws,fu=ri("Gecko")&&!(-1!=rs().toLowerCase().indexOf("webkit")&&!ri("Edge"))&&!(ri("Trident")||ri("MSIE"))&&!ri("Edge"),Dh=-1!=rs().toLowerCase().indexOf("webkit")&&!ri("Edge");function Vl(){var n=St.document;return n?n.documentMode:void 0}e:{var Es="",Bl=(n=rs(),fu?/rv:([^\);]+)(\)|;)/.exec(n):pa?/Edge\/([\d\.]+)/.exec(n):ws?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Dh?/WebKit\/(\S+)/.exec(n):hu?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bl&&(Es=Bl?Bl[1]:""),ws){var Hi=Vl();if(null!=Hi&&Hi>parseFloat(Es)){pu=String(Hi);break e}}pu=Es}var bh=St.document&&ws&&(Vl()||parseInt(pu,10))||void 0;function In(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fu){e:{try{Oo(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gc[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&In.$.h.call(this)}}An(In,Ir);var gc={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ti="closure_listenable_"+(1e6*Math.random()|0),Ch=0;function um(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++Ch,this.fa=this.ia=!1}function ma(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function mu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function va(n){const e={};for(const t in n)e[t]=n[t];return e}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<E.length;u++)t=E[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function A(n){this.src=n,this.g={},this.h=0}function k(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Ul(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ma(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function z(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}A.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=z(n,e,r,o);return-1<d?(e=n[d],t||(e.ia=!1)):((e=new um(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var K="closure_lm_"+(1e6*Math.random()|0),de={};function Ze(n,e,t,r,o){if(r&&r.once)return At(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ze(n,e[u],t,r,o);return null}return t=Or(t),n&&n[Ti]?n.O(e,t,lu(r)?!!r.capture:!!r,o):Ge(n,e,t,!1,r,o)}function Ge(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=lu(o)?!!o.capture:!!o,g=On(n);if(g||(n[K]=g=new A(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function lt(){const e=_a;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ns||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(tr(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function At(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)At(n,e[u],t,r,o);return null}return t=Or(t),n&&n[Ti]?n.P(e,t,lu(r)?!!r.capture:!!r,o):Ge(n,e,t,!0,r,o)}function Mt(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Mt(n,e[u],t,r,o);else r=lu(r)?!!r.capture:!!r,t=Or(t),n&&n[Ti]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=z(u=n.g[e],t,r,o))&&(ma(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=On(n))&&(e=n.g[e.toString()],n=-1,e&&(n=z(e,t,r,o)),(t=-1<n?e[n]:null)&&ur(t))}function ur(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ti])k(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tr(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=On(e))?(k(t,n),0==t.h&&(t.src=null,e[K]=null)):ma(n)}}}function tr(n){return n in de?de[n]:de[n]="on"+n}function _a(n,e){if(n.fa)n=!0;else{e=new In(e,this);var t=n.listener,r=n.la||n.src;n.ia&&ur(n),n=t.call(r,e)}return n}function On(n){return(n=n[K])instanceof A?n:null}var Ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function Or(n){return"function"==typeof n?n:(n[Ds]||(n[Ds]=function(e){return n.handleEvent(e)}),n[Ds])}function mn(){ts.call(this),this.i=new A(this),this.S=this,this.J=null}function ln(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var o=e;b(e=new Ir(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=bs(d,r,!0,e)&&o}if(o=bs(d=e.g=n,r,!0,e)&&o,o=bs(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=bs(d=e.g=t[u],r,!1,e)&&o}function bs(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.fa&&d.capture==t){var g=d.listener,w=d.la||d.src;d.ia&&k(n.i,d),o=!1!==g.call(w,r)&&o}}return o&&!r.defaultPrevented}An(mn,ts),mn.prototype[Ti]=!0,mn.prototype.removeEventListener=function(n,e,t,r){Mt(this,n,e,t,r)},mn.prototype.N=function(){if(mn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ma(t[r]);delete n.g[e],n.h--}}this.J=null},mn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Th=St.JSON.stringify;function yu(){var n=dm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sh=new class fp{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new lm,n=>n.reset());class lm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Kv(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function zi(n){St.setTimeout(()=>{throw n},0)}let vu,Ys=!1,dm=new class cm{constructor(){this.h=this.g=null}add(e,t){const r=Sh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},pp=()=>{const n=St.Promise.resolve(void 0);vu=()=>{n.then(hm)}};var hm=()=>{for(var n;n=yu();){try{n.h.call(n.g)}catch(t){zi(t)}var e=Sh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ys=!1};function Ah(n,e){mn.call(this),this.h=n||1,this.g=e||St,this.j=Gn(this.qb,this),this.l=Date.now()}function fm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ko(n,e,t){if("function"==typeof n)t&&(n=Gn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gn(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function pm(n){n.g=ko(()=>{n.g=null,n.i&&(n.i=!1,pm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}An(Ah,mn),(We=Ah.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ln(this,"tick"),this.ga&&(fm(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){Ah.$.N.call(this),fm(this),delete this.g};class Zv extends ts{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pm(this)}N(){super.N(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(n){ts.call(this),this.h=n,this.g={}}An(Lo,ts);var jl=[];function Mh(n,e,t,r){Array.isArray(t)||(t&&(jl[0]=t.toString()),t=jl);for(var o=0;o<t.length;o++){var u=Ze(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function $l(n){mu(n.g,function(e,t){this.g.hasOwnProperty(t)&&ur(e)},n),n.g={}}function xh(){this.g=!0}function _u(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Th(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Lo.prototype.N=function(){Lo.$.N.call(this),$l(this)},Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xh.prototype.Ea=function(){this.g=!1},xh.prototype.info=function(){};var Ia={},gm=null;function Nh(){return gm=gm||new mn}function Iu(n){Ir.call(this,Ia.Ta,n)}function Qs(n){const e=Nh();ln(e,new Iu(e))}function Oh(n,e){Ir.call(this,Ia.STAT_EVENT,n),this.stat=e}function Si(n){const e=Nh();ln(e,new Oh(e,n))}function gp(n,e){Ir.call(this,Ia.Ua,n),this.size=e}function wu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Ia.Ta="serverreachability",An(Iu,Ir),Ia.STAT_EVENT="statevent",An(Oh,Ir),Ia.Ua="timingevent",An(gp,Ir);var zl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mp(){}function ql(){}mp.prototype.h=null;var ym,yc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yp(){Ir.call(this,"d")}function Wl(){Ir.call(this,"c")}function Kl(){}function Ph(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Lo(this),this.P=Zl,this.V=new Ah(n=Po?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vm}function vm(){this.i=null,this.g="",this.h=!1}An(yp,Ir),An(Wl,Ir),An(Kl,mp),Kl.prototype.g=function(){return new XMLHttpRequest},Kl.prototype.i=function(){return{}},ym=new Kl;var Zl=45e3,Yl={},kh={};function _m(n,e,t){n.L=1,n.v=Xl(os(e)),n.s=t,n.S=!0,Lh(n,null)}function Lh(n,e){n.G=Date.now(),vc(n),n.A=os(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),ba(t.i,"t",r),n.C=0,t=n.l.J,n.h=new vm,n.g=Nw(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Zv(Gn(n.Pa,n,n.g),n.O)),Mh(n.U,n.g,"readystatechange",n.nb),e=n.I?va(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Qs(),function mc(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),w=0;w<g.length;w++){var C=g[w].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");d=2<=N.length&&"type"==N[1]?d+(M+"=")+C+"&":d+(M+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Qv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Xv(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=Jv(n,t),o==kh){4==e&&(n.o=4,Si(14),r=!1),_u(n.j,n.m,null,"[Incomplete Response]");break}if(o==Yl){n.o=4,Si(15),_u(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_u(n.j,n.m,o,null),Fh(n,o)}Qv(n)&&o!=kh&&o!=Yl&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),zh(e),e.M=!0,Si(11))):(_u(n.j,n.m,t,"[Invalid Chunked Response]"),is(n),wa(n))}function Jv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kh:(t=Number(e.substring(t,r)),isNaN(t)?Yl:(r+=1)+t>e.length?kh:(e=e.slice(r,r+t),n.C=r+t,e))}function vc(n){n.Y=Date.now()+n.P,vp(n,n.P)}function vp(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wu(Gn(n.lb,n),e)}function Ql(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function wa(n){0==n.l.H||n.J||Nm(n.l,n)}function is(n){Ql(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,fm(n.V),$l(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Fh(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||_(t.i,n)))if(!n.K&&_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Cp(t),Mm(t)}Rm(t),Si(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=wu(Gn(t.ib,t),6e3));if(1>=p(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ic(t,11)}else if((n.K||t.g==n)&&Cp(t),!No(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const M=C[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const N=C[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const Ce=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ce){var u=r.i;u.g||-1==Ce.indexOf("spdy")&&-1==Ce.indexOf("quic")&&-1==Ce.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(T(u,u.h),u.h=null))}if(r.F){const Ve=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.Da=Ve,Mn(r.I,r.F,Ve))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var d=n;if((r=t).wa=qh(r,r.J?r.pa:null,r.Y),d.K){R(r.i,d);var g=d,w=r.L;w&&g.setTimeout(w),g.B&&(Ql(g),vc(g)),r.g=d}else xm(r);0<t.j.length&&nd(t)}else"stop"!=C[0]&&"close"!=C[0]||Ic(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Ic(t,7):Am(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}Qs()}catch{}}function Ea(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ro(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function _c(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ro(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ai(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ro(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(We=Ph.prototype).setTimeout=function(n){this.P=n},We.nb=function(n){n=n.target;const e=this.M;e&&3==eo(n)?e.l():this.Pa(n)},We.Pa=function(n){try{if(n==this.g)e:{const M=eo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||Po||this.g&&(this.h.h||this.g.ja()||Rw(this.g)))){this.J||4!=M||7==e||Qs(),Ql(this);var t=this.g.da();this.ca=t;t:if(Qv(this)){var r=Rw(this.g);n="";var o=r.length,u=4==eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){is(this),wa(this);var d="";break t}this.h.i=new St.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=200==t,function Yv(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!No(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Si(12),is(this),wa(this);break e}_u(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fh(this,t)}this.S?(Xv(this,M,d),Po&&this.i&&3==M&&(Mh(this.U,this.V,"tick",this.mb),this.V.start())):(_u(this.j,this.m,d,null),Fh(this,d)),4==M&&is(this),this.i&&!this.J&&(4==M?Nm(this.l,this):(this.i=!1,vc(this)))}else(function TC(n){const e={};n=(n.g&&2<=eo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(No(n[r]))continue;var t=Kv(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function ya(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),is(this),wa(this)}}}catch{}},We.mb=function(){if(this.g){var n=eo(this.g),e=this.g.ja();this.C<e.length&&(Ql(this),Xv(this,n,e),this.i&&4!=n&&vc(this))}},We.cancel=function(){this.J=!0,is(this)},We.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Hl(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Qs(),Si(17)),is(this),this.o=2,wa(this)):vp(this,this.Y-n)};var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ss(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ss){this.h=n.h,Da(this,n.j),this.s=n.s,this.g=n.g,Vh(this,n.m),this.l=n.l;var e=n.i,t=new Cs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Fo(this,t),this.o=n.o}else n&&(e=String(n).match(_p))?(this.h=!1,Da(this,e[1]||"",!0),this.s=Eu(e[2]||""),this.g=Eu(e[3]||"",!0),Vh(this,e[4]),this.l=Eu(e[5]||"",!0),Fo(this,e[6]||"",!0),this.o=Eu(e[7]||"")):(this.h=!1,this.i=new Cs(null,this.h))}function os(n){return new ss(n)}function Da(n,e,t){n.j=t?Eu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Fo(n,e,t){e instanceof Cs?(n.i=e,function wm(n,e){e&&!n.j&&(Xs(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(ed(this,r),ba(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jl(e,e_)),n.i=new Cs(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function Xl(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Eu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Im),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Im(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ss.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jl(e,yi,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jl(e,yi,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jl(t,"/"==t.charAt(0)?Ip:Bh,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jl(t,nr)),n.join("")};var yi=/[#\/\?@]/g,Bh=/[#\?:]/g,Ip=/[#\?]/g,e_=/[#\?@]/g,nr=/#/g;function Cs(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xs(n){n.g||(n.g=new Map,n.h=0,n.i&&function Uh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ed(n,e){Xs(n),e=Du(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Gr(n,e){return Xs(n),e=Du(n,e),n.g.has(e)}function ba(n,e,t){ed(n,e),0<t.length&&(n.i=null,n.g.set(Du(n,e),pc(t)),n.h+=t.length)}function Du(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function wp(n){this.l=n||y,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ka&&St.g.Ka()&&St.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Cs.prototype).add=function(n,e){Xs(this),this.i=null,n=Du(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){Xs(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},We.ta=function(){Xs(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},We.Z=function(n){Xs(this);let e=[];if("string"==typeof n)Gr(this,n)&&(e=e.concat(this.g.get(Du(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},We.set=function(n,e){return Xs(this),this.i=null,Gr(this,n=Du(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.Z(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var y=10;function h(n){return!!n.h||!!n.g&&n.g.size>=n.j}function p(n){return n.h?1:n.g?n.g.size:0}function _(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function T(n,e){n.g?n.g.add(e):n.h=e}function R(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function B(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return pc(n.i)}wp.prototype.cancel=function(){if(this.i=B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var J=class{stringify(n){return St.JSON.stringify(n,void 0)}parse(n){return St.JSON.parse(n,void 0)}};function ke(){this.g=new J}function je(n,e,t){const r=t||"";try{Ea(n,function(o,u){let d=o;lu(o)&&(d=Th(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function rt(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function yn(n){this.l=n.fc||null,this.j=n.ob||!1}function vi(n,e){mn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=bu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}An(yn,mp),yn.prototype.g=function(){return new vi(this.l,this.j)},yn.prototype.i=function(n){return function(){return n}}({}),An(vi,mn);var bu=0;function Ca(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Js(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cu(n)}function Cu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=vi.prototype).open=function(n,e){if(this.readyState!=bu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Cu(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||St).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Js(this)),this.readyState=bu},We.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof St.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ca(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Js(this):Cu(this),3==this.readyState&&Ca(this)}},We.Za=function(n){this.g&&(this.response=this.responseText=n,Js(this))},We.Ya=function(n){this.g&&(this.response=n,Js(this))},We.ka=function(){this.g&&Js(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jh=St.JSON.parse;function wn(n){mn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ep,this.L=this.M=!1}An(wn,mn);var Ep="",Em=/^https?$/i,Dp=["POST","PUT"];function bm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$h(n),td(n)}function $h(n){n.F||(n.F=!0,ln(n,"complete"),ln(n,"error"))}function bp(n){if(n.h&&typeof vh<"u"&&(!n.C[1]||4!=eo(n)||2!=n.da()))if(n.v&&4==eo(n))ko(n.La,0,n);else if(ln(n,"readystatechange"),4==eo(n)){n.h=!1;try{const d=n.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var o=String(n.I).match(_p)[1]||null;!o&&St.self&&St.self.location&&(o=St.self.location.protocol.slice(0,-1)),r=!Em.test(o?o.toLowerCase():"")}t=r}if(t)ln(n,"complete"),ln(n,"success");else{n.m=6;try{var u=2<eo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",$h(n)}}finally{td(n)}}}function td(n,e){if(n.g){Cm(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ln(n,"ready");try{t.onreadystatechange=r}catch{}}}function Cm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function eo(n){return n.g?n.g.readyState:0}function Rw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Ep:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Tm(n){let e="";return mu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Sm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Tm(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Uo(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function n_(n){this.Ga=0,this.j=[],this.l=new xh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uo("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uo("baseRetryDelayMs",5e3,n),this.hb=Uo("retryDelaySeedMs",1e4,n),this.eb=Uo("forwardChannelMaxRetries",2,n),this.xa=Uo("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new wp(n&&n.concurrentRequestLimit),this.Ja=new ke,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Am(n){if(SC(n),3==n.H){var e=n.W++,t=os(n.I);if(Mn(t,"SID",n.K),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),Hh(n,t),(e=new Ph(n,n.l,e)).L=2,e.v=Xl(os(t)),t=!1,St.navigator&&St.navigator.sendBeacon)try{t=St.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=Nw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),vc(e)}Om(n)}function Mm(n){n.g&&(zh(n),n.g.cancel(),n.g=null)}function SC(n){Mm(n),n.u&&(St.clearTimeout(n.u),n.u=null),Cp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function nd(n){if(!h(n.i)&&!n.m){n.m=!0;var e=n.Na;vu||pp(),Ys||(vu(),Ys=!0),dm.add(e,n),n.C=0}}function r_(n,e){var t;t=e?e.m:n.W++;const r=os(n.I);Mn(r,"SID",n.K),Mn(r,"RID",t),Mn(r,"AID",n.V),Hh(n,r),n.o&&n.s&&Sm(r,n.o,n.s),t=new Ph(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=i_(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),T(n.i,t),_m(t,r,e)}function Hh(n,e){n.na&&mu(n.na,function(t,r){Mn(e,r,t)}),n.h&&Ea({},function(t,r){Mn(e,r,t)})}function i_(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Gn(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].g,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let w=0;w<t;w++){let C=o[w].g;const M=o[w].map;if(C-=u,0>C)u=Math.max(0,o[w].g-100),g=!1;else try{je(M,d,"req"+C+"_")}catch{r&&r(M)}}if(g){r=d.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function xm(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;vu||pp(),Ys||(vu(),Ys=!0),dm.add(e,n),n.A=0}}function Rm(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=wu(Gn(n.Ma,n),Tp(n,n.A)),n.A++,0))}function zh(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function Gh(n){n.g=new Ph(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=os(n.wa);Mn(e,"RID","rpc"),Mn(e,"SID",n.K),Mn(e,"AID",n.V),Mn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Mn(e,"TO",n.qa),Mn(e,"TYPE","xmlhttp"),Hh(n,e),n.o&&n.s&&Sm(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Xl(os(e)),t.s=null,t.S=!0,Lh(t,n)}function Cp(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function Nm(n,e){var t=null;if(n.g==e){Cp(n),zh(n),n.g=null;var r=2}else{if(!_(n.i,e))return;t=e.F,R(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;ln(r=Nh(),new gp(r,t)),nd(n)}else xm(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function AC(n,e){return!(p(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=wu(Gn(n.Na,n,e),Tp(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ic(n,5);break;case 4:Ic(n,10);break;case 3:Ic(n,6);break;default:Ic(n,2)}}function Tp(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ic(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Gn(n.pb,n);t||(t=new ss("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||Da(t,"https"),Xl(t)),function it(n,e){const t=new xh;if(St.Image){const r=new Image;r.onload=hc(rt,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hc(rt,t,r,"TestLoadImage: error",!1,e),r.onabort=hc(rt,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hc(rt,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Si(2);n.H=0,n.h&&n.h.za(e),Om(n),SC(n)}function Om(n){if(n.H=0,n.ma=[],n.h){const e=B(n.i);(0!=e.length||0!=n.j.length)&&(Eh(n.ma,e),Eh(n.ma,n.j),n.i.i.length=0,pc(n.j),n.j.length=0),n.h.ya()}}function qh(n,e,t){var r=t instanceof ss?os(t):new ss(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Vh(r,r.m);else{var o=St.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new ss(null);r&&Da(u,r),e&&(u.g=e),o&&Vh(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Mn(r,t,e),Mn(r,"VER",n.ra),Hh(n,r),r}function Nw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t&&n.Ha&&!n.va?new yn({ob:!0}):n.va)).Oa(n.J),e}function s_(){}function Pm(){if(ws&&!(10<=Number(bh)))throw Error("Environmental error: no available transport.")}function Ts(n,e){mn.call(this),this.g=new n_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!No(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!No(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rd(this)}function Ow(n){yp.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function o_(){Wl.call(this),this.status=1}function rd(n){this.g=n}function Ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wc(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],d=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;d=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(d<<7&4294967295|d>>>25))+((d=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|d>>>20))+((d=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|d>>>25))+((d=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|d>>>20))+((d=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|d>>>25))+((d=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|d>>>20))+((d=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|d>>>25))+((d=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|d>>>20))+((d=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|d>>>10))+((d=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|d>>>12))+((d=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|d>>>21))+((d=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|d>>>16))+((d=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|d>>>21))+((d=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|d>>>16))+((d=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|d>>>21))+((d=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|d>>>16))+((d=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|d>>>21))+((d=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|d>>>16))+((d=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|d>>>9))+((d=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|d>>>11))+((d=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|d>>>11))+((d=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|d>>>11))+((u=(e=t+((d=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|d>>>22))^((o=u+((d=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|d>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(d<<21&4294967295|d>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function En(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(We=wn.prototype).Oa=function(n){this.M=n},We.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ym.g(),this.C=function Gl(n){return n.h||(n.h=n.i())}(this.u?this.u:ym),this.g.onreadystatechange=Gn(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void bm(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=St.FormData&&n instanceof St.FormData,!(0<=Ul(Dp,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Cm(this),0<this.B&&((this.L=function Dm(n){return ws&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.ua,this)):this.A=ko(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){bm(this,u)}},We.ua=function(){typeof vh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ln(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ln(this,"complete"),ln(this,"abort"),td(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),td(this,!0)),wn.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?bp(this):this.kb())},We.kb=function(){bp(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<eo(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jh(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=n_.prototype).ra=8,We.H=1,We.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Ph(this,this.l,n);let u=this.s;if(this.U&&(u?(u=va(u),b(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=i_(this,o,e),Mn(t=os(this.I),"RID",n),Mn(t,"CVER",22),this.F&&Mn(t,"X-HTTP-Session-Id",this.F),Hh(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Tm(u)))+"&"+e:this.o&&Sm(t,this.o,u)),T(this.i,o),this.bb&&Mn(t,"TYPE","init"),this.P?(Mn(t,"$req",e),Mn(t,"SID","null"),o.aa=!0,_m(o,t,null)):_m(o,t,e),this.H=2}}else 3==this.H&&(n?r_(this,n):0==this.j.length||h(this.i)||r_(this))},We.Ma=function(){if(this.u=null,Gh(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=wu(Gn(this.jb,this),n)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Si(10),Mm(this),Gh(this))},We.ib=function(){null!=this.v&&(this.v=null,Mm(this),Rm(this),Si(19))},We.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Si(2)):(this.l.info("Failed to ping google.com"),Si(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=s_.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},Pm.prototype.g=function(n,e){return new Ts(n,e)},An(Ts,mn),Ts.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Si(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=qh(n,null,n.Y),nd(n)},Ts.prototype.close=function(){Am(this.g)},Ts.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Th(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&nd(e)},Ts.prototype.N=function(){this.g.h=null,delete this.j,Am(this.g),delete this.g,Ts.$.N.call(this)},An(Ow,yp),An(o_,Wl),An(rd,s_),rd.prototype.Ba=function(){ln(this.g,"a")},rd.prototype.Aa=function(n){ln(this.g,new Ow(n))},rd.prototype.za=function(n){ln(this.g,new o_)},rd.prototype.ya=function(){ln(this.g,"b")},An(Ss,function km(){this.blockSize=-1}),Ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ss.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)wc(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){wc(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){wc(this,r),o=0;break}}this.h=o,this.i+=e},Ss.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var MC={};function Pw(n){return-128<=n&&128>n?function Zs(n,e){var t=MC;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new En([0|e],0>e?-1:0)}):new En([0|n],0>n?-1:0)}function Ta(n){if(isNaN(n)||!isFinite(n))return Vo;if(0>n)return ii(Ta(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=a_;return new En(e,0)}var a_=4294967296,Vo=Pw(0),Wh=Pw(1),Fm=Pw(16777216);function Sa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function As(n){return-1==n.h}function ii(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new En(t,~n.h).add(Wh)}function Sp(n,e){return n.add(ii(e))}function Um(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ap(n,e){this.g=n,this.h=e}function Vm(n,e){if(Sa(e))throw Error("division by zero");if(Sa(n))return new Ap(Vo,Vo);if(As(n))return e=Vm(ii(n),e),new Ap(ii(e.g),ii(e.h));if(As(e))return e=Vm(n,ii(e)),new Ap(ii(e.g),e.h);if(30<n.g.length){if(As(n)||As(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Wh,r=e;0>=r.X(n);)t=kw(t),r=kw(r);var o=Kh(t,1),u=Kh(r,1);for(r=Kh(r,2),t=Kh(t,2);!Sa(r);){var d=u.add(r);0>=d.X(n)&&(o=o.add(t),u=d),r=Kh(r,1),t=Kh(t,1)}return e=Sp(n,o.R(e)),new Ap(o,e)}for(o=Vo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),d=(u=Ta(t)).R(e);As(d)||0<d.X(n);)d=(u=Ta(t-=r)).R(e);Sa(u)&&(u=Wh),o=o.add(u),n=Sp(n,d)}return new Ap(o,n)}function kw(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new En(t,n.h)}function Kh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new En(o,n.h)}(We=En.prototype).ea=function(){if(As(this))return-ii(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:a_+r)*e,e*=a_}return n},We.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Sa(this))return"0";if(As(this))return"-"+ii(this).toString(n);for(var e=Ta(Math.pow(n,6)),t=this,r="";;){var o=Vm(t,e).g,u=((0<(t=Sp(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Sa(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},We.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},We.X=function(n){return As(n=Sp(this,n))?-1:Sa(n)?0:1},We.abs=function(){return As(this)?ii(this):this},We.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),d=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=d>>>16,t[o]=(d&=65535)<<16|(u&=65535)}return new En(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(n){if(Sa(this)||Sa(n))return Vo;if(As(this))return As(n)?ii(this).R(ii(n)):ii(ii(this).R(n));if(As(n))return ii(this.R(ii(n)));if(0>this.X(Fm)&&0>n.X(Fm))return Ta(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,d=65535&this.D(r),g=n.D(o)>>>16,w=65535&n.D(o);t[2*r+2*o]+=d*w,Um(t,2*r+2*o),t[2*r+2*o+1]+=u*w,Um(t,2*r+2*o+1),t[2*r+2*o+1]+=d*g,Um(t,2*r+2*o+1),t[2*r+2*o+2]+=u*g,Um(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new En(t,0)},We.gb=function(n){return Vm(this,n).h},We.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new En(t,this.h&n.h)},We.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new En(t,this.h|n.h)},We.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new En(t,this.h^n.h)},Pm.prototype.createWebChannel=Pm.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,mm.COMPLETE="complete",ql.EventType=yc,yc.OPEN="a",yc.CLOSE="b",yc.ERROR="c",yc.MESSAGE="d",mn.prototype.listen=mn.prototype.O,wn.prototype.listenOnce=wn.prototype.P,wn.prototype.getLastError=wn.prototype.Sa,wn.prototype.getLastErrorCode=wn.prototype.Ia,wn.prototype.getStatus=wn.prototype.da,wn.prototype.getResponseJson=wn.prototype.Wa,wn.prototype.getResponseText=wn.prototype.ja,wn.prototype.send=wn.prototype.ha,wn.prototype.setWithCredentials=wn.prototype.Oa,Ss.prototype.digest=Ss.prototype.l,Ss.prototype.reset=Ss.prototype.reset,Ss.prototype.update=Ss.prototype.j,En.prototype.add=En.prototype.add,En.prototype.multiply=En.prototype.R,En.prototype.modulo=En.prototype.gb,En.prototype.compare=En.prototype.X,En.prototype.toNumber=En.prototype.ea,En.prototype.toString=En.prototype.toString,En.prototype.getBits=En.prototype.D,En.fromNumber=Ta,En.fromString=function Lm(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ii(Lm(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ta(Math.pow(e,8)),r=Vo,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),d=parseInt(n.substring(o,o+u),e);8>u?(u=Ta(Math.pow(e,u)),r=r.R(u).add(Ta(d))):r=(r=r.R(t)).add(Ta(d))}return r};var Ec=_r.createWebChannelTransport=function(){return new Pm},Mp=_r.getStatEventTarget=function(){return Nh()},u_=_r.ErrorCode=zl,VA=_r.EventType=mm,BA=_r.Event=Ia,xC=_r.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jA=_r.FetchXmlHttpFactory=yn,c_=_r.WebChannel=ql,Lw=_r.XhrIo=wn,RC=_r.Md5=Ss,Zh=_r.Integer=En;const Fw="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let Dc="9.23.0";const Mi=new Ks.Yd("@firebase/firestore");function id(){return Mi.logLevel}function Fe(n,...e){if(Mi.logLevel<=Ks.in.DEBUG){const t=e.map(Vw);Mi.debug(`Firestore (${Dc}): ${n}`,...t)}}function wr(n,...e){if(Mi.logLevel<=Ks.in.ERROR){const t=e.map(Vw);Mi.error(`Firestore (${Dc}): ${n}`,...t)}}function Bo(n,...e){if(Mi.logLevel<=Ks.in.WARN){const t=e.map(Vw);Mi.warn(`Firestore (${Dc}): ${n}`,...t)}}function Vw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Dc}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function pt(n,e){n||st()}function tt(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Bw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jw{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new qr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const C=d;e.enqueueRetryable((0,ve.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new qr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new Bw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new si(e)}}class Bm{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=si.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class PC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Bm(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new jm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function LC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $w{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=LC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function sd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Hw(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new rr(0,0))}static max(){return new vt(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rp{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends Rp{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new on(t)}static emptyPath(){return new on([])}}const $A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Rp{construct(e,t,r){return new Pr(e,t,r)}static isValidIdentifier(e){return $A.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(t)}static emptyPath(){return new Pr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(on.fromString(e))}static fromName(e){return new Ye(on.fromString(e).popFirst(5))}static empty(){return new Ye(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new on(e.slice()))}}class un{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function od(n){return n.fields.find(e=>2===e.kind)}function bc(n){return n.fields.filter(e=>2!==e.kind)}un.UNKNOWN_ID=-1;class Yh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Np{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Np(0,xi.min())}}function d_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new xi(o,Ye.empty(),e)}function h_(n){return new xi(n.readTime,n.key,-1)}class xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xi(vt.min(),Ye.empty(),-1)}static max(){return new xi(vt.max(),Ye.empty(),-1)}}function qw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const $m="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Aa(n){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==$m)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Hm.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(M=>{d[C]=M,++g,g===u&&r(d)},M=>o(M))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Ma{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new qr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Cc(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=Qh(r.target.error);this.v.reject(new Cc(e,o))}}static open(e,t,r,o){try{return new Ma(t,e.transaction(o,r))}catch(u){throw new Cc(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new p_(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===jo.S((0,Zt.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),xa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Zt.hl)())return!1;if(jo.C())return!0;const e=(0,Zt.z$)(),t=jo.S(e),r=0<t&&t<10,o=jo.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Cc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Cc(e,g))},u.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.V.O(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const w=Ma.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(M=>(w.P(),M)).catch(M=>(w.abort(M),se.reject(M))).toPromise();return C.catch(()=>{}),yield w.R,C}catch(w){const C=w,M="FirebaseError"!==C.name&&g<3;if(Fe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",M),u.close(),!M)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class f_{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return xa(this.L.delete())}}class Cc extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Tc(n){return"IndexedDbTransactionError"===n.name}class p_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xa(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),xa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,d,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=Qh(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}W(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const w=new f_(g),C=t(g.primaryKey,g.value,w);if(C instanceof se){const M=C.catch(N=>(w.done(),se.reject(N)));r.push(M)}w.isDone?o():null===w.K?g.continue():g.continue(w.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Qh(r.target.error);t(o)}})}let $o=!1;function Qh(n){const e=jo.S((0,Zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $o||($o=!0,setTimeout(()=>{throw r},0)),r}}return n}class g_{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Tc(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Aa(r)}yield t.et(6e4)}))}}class FC{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Fe("IndexBackiller",`Processing collection: ${d}`),this.it(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.rt(o,u)).next(g=>(Fe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=h_(u);qw(d,r)>0&&(r=d)}),new xi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Xh(n){return null==n}function Ra(n){return 0===n&&1/n==-1/0}function Kw(n){return"number"==typeof n&&Number.isInteger(n)&&!Ra(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zm(e)),e=UC(n.get(t),e);return zm(e)}function UC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function zm(n){return n+"\x01\x01"}function Ho(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let w;0===o.length?w=g:(o+=g,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:st()}u=d+2}return new on(r)}const Zw=["userId","batchId"];function Op(n,e){return[n,Ri(e)]}function Gm(n,e,t){return[n,Ri(e),t]}const HA={},zA=["prefixPath","collectionGroup","readTime","documentId"],VC=["prefixPath","collectionGroup","documentId"],BC=["collectionGroup","readTime","prefixPath","documentId"],GA=["canonicalId","targetId"],qA=["targetId","path"],qm=["path","targetId"],jC=["collectionId","parent"],m_=["indexId","uid"],y_=["uid","sequenceNumber"],Jh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],v_=["indexId","uid","orderedDocumentKey"],__=["userId","collectionPath","documentId"],Pp=["userId","collectionPath","largestBatchId"],Wm=["userId","collectionGroup","largestBatchId"],ad=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I_=[...ad,"documentOverlays"],Km=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kp=Km,WA=[...kp,"indexConfiguration","indexState","indexEntries"];class Lp extends Ww{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Er(n,e){const t=tt(n);return jo.M(t.ht,e)}function Yw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??oi.RED,this.left=o??oi.EMPTY,this.right=u??oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new oi(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return oi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xw(this.data.getIterator())}getIteratorFrom(e){return new Xw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class Xw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fp(n){return n.hasNext()?n.getNext():void 0}class as{constructor(e){this.fields=e,e.sort(Pr.comparator)}static empty(){return new as([])}unionWith(e){let t=new qn(Pr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Up extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Up("Invalid base64 string: "+o):o}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const Jw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(pt(!!n),"string"==typeof n){let e=0;const t=Jw.exec(n);if(pt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Vp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zm(n){const e=n.mapValue.fields.__previous_value__;return Vp(e)?Zm(e):e}function tf(n){const e=Na(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class KA{constructor(e,t,r,o,u,d,g,w,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=w,this.useFetchStreams=C}}class Sc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}const zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ym={nullValue:"NULL_VALUE"};function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vp(n)?4:b_(n)?9007199254740991:10:st()}function us(n,e){if(n===e)return!0;const t=xs(n);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tf(n).isEqual(tf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Na(r.timestampValue),d=Na(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Su(n.bytesValue).isEqual(Su(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Wn(r.geoPointValue.latitude)===Wn(o.geoPointValue.latitude)&&Wn(r.geoPointValue.longitude)===Wn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wn(r.integerValue)===Wn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Wn(r.doubleValue),d=Wn(o.doubleValue);return u===d?Ra(u)===Ra(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return sd(n.arrayValue.values||[],e.arrayValue.values||[],us);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Yw(u)!==Yw(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!us(u[g],d[g])))return!1;return!0}(n,e);default:return st()}var o}function Bp(n,e){return void 0!==(n.values||[]).find(t=>us(t,e))}function Au(n,e){if(n===e)return 0;const t=xs(n),r=xs(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Wn(o.integerValue||o.doubleValue),g=Wn(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return eE(n.timestampValue,e.timestampValue);case 4:return eE(tf(n),tf(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Su(o),g=Su(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let w=0;w<d.length&&w<g.length;w++){const C=kt(d[w],g[w]);if(0!==C)return C}return kt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=kt(Wn(o.latitude),Wn(u.latitude));return 0!==d?d:kt(Wn(o.longitude),Wn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let w=0;w<d.length&&w<g.length;++w){const C=Au(d[w],g[w]);if(C)return C}return kt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===zo.mapValue&&u===zo.mapValue)return 0;if(o===zo.mapValue)return 1;if(u===zo.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),w=u.fields||{},C=Object.keys(w);g.sort(),C.sort();for(let M=0;M<g.length&&M<C.length;++M){const N=kt(g[M],C[M]);if(0!==N)return N;const $=Au(d[g[M]],w[C[M]]);if(0!==$)return $}return kt(g.length,C.length)}(n.mapValue,e.mapValue);default:throw st()}}function eE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=Na(n),r=Na(e),o=kt(t.seconds,r.seconds);return 0!==o?o:kt(t.nanos,r.nanos)}function nf(n){return E_(n)}function E_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Na(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=E_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${E_(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function Ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $p(n){return!!n&&"integerValue"in n}function Qm(n){return!!n&&"arrayValue"in n}function Xm(n){return!!n&&"nullValue"in n}function D_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jm(n){return!!n&&"mapValue"in n}function Hp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function b_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $C(n){return"nullValue"in n?Ym:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ac(Sc.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function tE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ac(Sc.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?zo:st()}function nE(n,e){const t=Au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rE(n,e){const t=Au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ni{constructor(e){this.value=e}static empty(){return new Ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hp(t)}setAll(e){let t=Pr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=Hp(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Jm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Jm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ni(Hp(this.value))}}function C_(n){const e=[];return Tu(n.fields,(t,r)=>{const o=new Pr([t]);if(Jm(r)){const u=C_(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new as(e)}class jn{constructor(e,t,r,o,u,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new jn(e,0,vt.min(),vt.min(),vt.min(),Ni.empty(),0)}static newFoundDocument(e,t,r,o){return new jn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new jn(e,2,t,vt.min(),vt.min(),Ni.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,vt.min(),vt.min(),Ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ai{constructor(e,t){this.position=e,this.inclusive=t}}function T_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(d.referenceValue),t.key):Au(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function HC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!us(n.position[t],e.position[t]))return!1;return!0}class Mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function xc(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ey{}class tn extends ey{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new M_(e,t,r):"array-contains"===t?new sE(e,r):"in"===t?new x_(e,r):"not-in"===t?new WC(e,r):"array-contains-any"===t?new oE(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new GC(e,r):new qC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Au(t,this.value)):null!==t&&xs(this.value)===xs(t)&&this.matchesComparison(Au(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xn extends ey{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new xn(e,t)}matches(e){return rf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rf(n){return"and"===n.op}function zp(n){return"or"===n.op}function to(n){return S_(n)&&rf(n)}function S_(n){for(const e of n.filters)if(e instanceof xn)return!1;return!0}function A_(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+nf(n.value);if(to(n))return n.filters.map(e=>A_(e)).join(",");{const e=n.filters.map(t=>A_(t)).join(",");return`${n.op}(${e})`}}function zC(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&us(t.value,r.value)):n instanceof xn?function(t,r){return r instanceof xn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&zC(u,r.filters[d]),!0)}(n,e):void st();var t,r}function Kr(n,e){const t=n.filters.concat(e);return xn.create(t,n.op)}function iE(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${nf(e.value)}`:n instanceof xn?function(e){return e.op.toString()+" {"+e.getFilters().map(iE).join(" ,")+"}"}(n):"Filter";var e}class M_ extends tn{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class GC extends tn{constructor(e,t){super(e,"in",t),this.keys=ty(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qC extends tn{constructor(e,t){super(e,"not-in",t),this.keys=ty(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ty(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class sE extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qm(t)&&Bp(t.arrayValue,this.value)}}class x_ extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bp(this.value.arrayValue,t)}}class WC extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bp(this.value.arrayValue,t)}}class oE extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bp(this.value.arrayValue,r))}}class aE{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.dt=null}}function R_(n,e=null,t=[],r=[],o=null,u=null,d=null){return new aE(n,e,t,r,o,u,d)}function ud(n){const e=tt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>A_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nf(r)).join(",")),e.dt=t}return e.dt}function Gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xc(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HC(n.startAt,e.startAt)&&HC(n.endAt,e.endAt)}function qp(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Mu(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function Oa(n,e,t){let r=Ym,o=!0;for(const u of Mu(n,e)){let d=Ym,g=!0;switch(u.op){case"<":case"<=":d=$C(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=Ym}nE({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];nE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function cd(n,e,t){let r=zo,o=!0;for(const u of Mu(n,e)){let d=zo,g=!0;switch(u.op){case">=":case">":d=tE(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=zo}rE({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];rE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class xu{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=w,this.wt=null,this._t=null}}function uE(n,e,t,r,o,u,d,g){return new xu(n,e,t,r,o,u,d,g)}function ld(n){return new xu(n)}function N_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Rc(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function sf(n){return null!==n.collectionGroup}function Nc(n){const e=tt(n);if(null===e.wt){e.wt=[];const t=Rc(e),r=Wp(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Mc(t)),e.wt.push(new Mc(Pr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Mc(Pr.keyField(),u))}}}return e.wt}function Oi(n){const e=tt(n);if(!e._t)if("F"===e.limitType)e._t=R_(e.path,e.collectionGroup,Nc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Nc(e))t.push(new Mc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ai(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new ai(e.startAt.position,e.startAt.inclusive):null;e._t=R_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function O_(n,e){e.getFirstInequalityField(),Rc(n);const t=n.filters.concat([e]);return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ny(n,e,t){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kp(n,e){return Gp(Oi(n),Oi(e))&&n.limitType===e.limitType}function cE(n){return`${ud(Oi(n))}|lt:${n.limitType}`}function ry(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>iE(r)).join(", ")}]`),Xh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nf(r)).join(",")),`Target(${t})`}(Oi(n))}; limitType=${n.limitType})`}function iy(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ye.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Nc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=T_(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Nc(t),r)||t.endAt&&!function(o,u,d){const g=T_(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Nc(t),r)));var t,r}function lE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KC(n){return(e,t)=>{let r=!1;for(const o of Nc(n)){const u=ZA(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function ZA(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),w=d.data.field(o);return null!==g&&null!==w?Au(g,w):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Qw(this.inner)}size(){return this.innerSize}}const dE=new Bn(Ye.comparator);function Rs(){return dE}const Zp=new Bn(Ye.comparator);function sy(...n){let e=Zp;for(const t of n)e=e.insert(t.key,t);return e}function P_(n){let e=Zp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Go(){return af()}function hE(){return af()}function af(){return new Pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const fE=new Bn(Ye.comparator),Ft=new qn(Ye.comparator);function Vt(...n){let e=Ft;for(const t of n)e=e.add(t);return e}const pE=new qn(kt);function Oc(){return pE}function k_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(e)?"-0":e}}function gE(n){return{integerValue:""+n}}function Yp(n,e){return Kw(e)?gE(e):k_(n,e)}class Ru{constructor(){this._=void 0}}function L_(n,e,t){return n instanceof Pc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Vp(o)&&(o=Zm(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Nu?oy(n,e):n instanceof kc?ay(n,e):function(r,o){const u=F_(r,o),d=mE(u)+mE(r.gt);return $p(u)&&$p(r.gt)?gE(d):k_(r.serializer,d)}(n,e)}function Qp(n,e,t){return n instanceof Nu?oy(n,e):n instanceof kc?ay(n,e):t}function F_(n,e){return n instanceof uf?$p(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Pc extends Ru{}class Nu extends Ru{constructor(e){super(),this.elements=e}}function oy(n,e){const t=yE(e);for(const r of n.elements)t.some(o=>us(o,r))||t.push(r);return{arrayValue:{values:t}}}class kc extends Ru{constructor(e){super(),this.elements=e}}function ay(n,e){let t=yE(e);for(const r of n.elements)t=t.filter(o=>!us(o,r));return{arrayValue:{values:t}}}class uf extends Ru{constructor(e,t){super(),this.serializer=e,this.gt=t}}function mE(n){return Wn(n.integerValue||n.doubleValue)}function yE(n){return Qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class cf{constructor(e,t){this.field=e,this.transform=t}}class YC{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Xp{}function U_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new df(n.key,ir.none()):new lf(n.key,n.data,ir.none());{const t=n.data,r=Ni.empty();let o=new qn(Pr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Lc(n.key,r,new as(o.toArray()),ir.none())}}function QC(n,e,t){n instanceof lf?function(r,o,u){const d=r.value.clone(),g=V_(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Lc?function(r,o,u){if(!uy(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=V_(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(cy(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jp(n,e,t,r){return n instanceof lf?function(o,u,d,g){if(!uy(o.precondition,u))return d;const w=o.value.clone(),C=_E(o.fieldTransforms,g,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lc?function(o,u,d,g){if(!uy(o.precondition,u))return d;const w=_E(o.fieldTransforms,g,u),C=u.data;return C.setAll(cy(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(M=>M.field))}(n,e,t,r):(d=t,uy(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function Ns(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=F_(r.transform,o||null);null!=u&&(null===t&&(t=Ni.empty()),t.set(r.field,u))}return t||null}function vE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sd(t,r,(o,u)=>function ZC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Nu&&r instanceof Nu||t instanceof kc&&r instanceof kc?sd(t.elements,r.elements,us):t instanceof uf&&r instanceof uf?us(t.gt,r.gt):t instanceof Pc&&r instanceof Pc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class lf extends Xp{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Lc extends Xp{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function V_(n,e,t){const r=new Map;pt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,Qp(d,g,t[o]))}return r}function _E(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,L_(u,d,e))}return r}class df extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B_ extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ly{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&QC(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hE();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const w=U_(d,g);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&sd(this.mutations,e.mutations,(t,r)=>vE(t,r))&&sd(this.baseMutations,e.baseMutations,(t,r)=>vE(t,r))}}class j_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pt(e.mutations.length===r.length);let o=fE;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new j_(e,t,r,o)}}class $_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class XC{constructor(e,t){this.count=e,this.unchangedNames=t}}var jr,cn;function IE(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function wE(n){if(void 0===n)return wr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case jr.OK:return ce.OK;case jr.CANCELLED:return ce.CANCELLED;case jr.UNKNOWN:return ce.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ce.INTERNAL;case jr.UNAVAILABLE:return ce.UNAVAILABLE;case jr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case jr.NOT_FOUND:return ce.NOT_FOUND;case jr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case jr.ABORTED:return ce.ABORTED;case jr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case jr.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(cn=jr||(jr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class no{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hf}static getOrCreateInstance(){return null===hf&&(hf=new no),hf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let hf=null;function EE(){return new TextEncoder}const DE=new Zh([4294967295,4294967295],0);function bE(n){const e=EE().encode(n),t=new RC;return t.update(e),new Uint8Array(t.digest())}function z_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Zh([t,r],0),new Zh([o,u],0)]}class dy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fc(`Invalid padding: ${t}`);if(r<0)throw new Fc(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Fc(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Fc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Zh.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(Zh.fromNumber(r)));return 1===o.compare(DE)&&(o=new Zh([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=bE(e),[r,o]=z_(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,o,u);if(!this.At(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new dy(u,o,t);return r.forEach(g=>d.insert(g)),d}insert(e){if(0===this.It)return;const t=bE(e),[r,o]=z_(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,o,u);this.Rt(d)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,hy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dd(vt.min(),o,new Bn(kt),Rs(),Vt())}}class hy{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hy(r,t,Vt(),Vt(),Vt())}}class eg{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class G_{constructor(e,t){this.targetId=e,this.Vt=t}}class q_{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class W_{constructor(){this.St=0,this.Dt=CE(),this.Ct=Wr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Vt(),t=Vt(),r=Vt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new hy(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=CE()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class K_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Rs(),this.zt=ka(),this.Wt=new Bn(kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const d=u.target;if(qp(d))if(0===o){const g=new Ye(d.path);this.Yt(r,g,jn.newNoDocument(g,vt.min()))}else pt(1===o);else{const g=this.ie(r);if(g!==o){const w=this.re(e,g);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=no.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,M,N){var $,te,Ce,Ve,He,gt;const Tt={localCacheCount:M,existenceFilterCount:N.count},Dt=N.unchangedNames;return Dt&&(Tt.bloomFilter={applied:0===C,hashCount:null!==($=Dt?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Ve=null===(Ce=null===(te=Dt?.bits)||void 0===te?void 0:te.bitmap)||void 0===Ce?void 0:Ce.length)&&void 0!==Ve?Ve:0,padding:null!==(gt=null===(He=Dt?.bits)||void 0===He?void 0:He.padding)&&void 0!==gt?gt:0}),Tt}(w,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:d=0},hashCount:g=0}=r;let w,C;try{w=Su(u).toUint8Array()}catch(M){if(M instanceof Up)return Bo("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{C=new dy(w,d,g)}catch(M){return Bo(M instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===C.It?1:o!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const d=this.Gt.ue(),g=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,d)=>{const g=this.se(d);if(g){if(u.current&&qp(g.target)){const w=new Ye(g.target.path);null!==this.jt.get(w)||this.ae(d,w)||this.Yt(d,w,jn.newNoDocument(w,e))}u.Mt&&(t.set(d,u.Ot()),u.Ft())}});let r=Vt();this.zt.forEach((u,d)=>{let g=!0;d.forEachWhile(w=>{const C=this.se(w);return!C||"TargetPurposeLimboResolution"===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,d)=>d.setReadTime(e));const o=new dd(e,t,this.Wt,this.jt,r);return this.jt=Rs(),this.zt=ka(),this.Wt=new Bn(kt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new W_,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new qn(kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new W_),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ka(){return new Bn(Ye.comparator)}function CE(){return new Bn(Ye.comparator)}const JC={asc:"ASCENDING",desc:"DESCENDING"},Z_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eT={and:"AND",or:"OR"};class TE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Y_(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function Ou(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ff(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SE(n,e){return Ou(n,e.toTimestamp())}function sr(n){return pt(!!n),vt.fromTimestamp(function(e){const t=Na(e);return new rr(t.seconds,t.nanos)}(n))}function AE(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ME(n){const e=on.fromString(n);return pt(UE(e)),e}function pf(n,e){return AE(n.databaseId,e.path)}function qo(n,e){const t=ME(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(X_(t))}function Q_(n,e){return AE(n.databaseId,e)}function xE(n){const e=ME(n);return 4===e.length?on.emptyPath():X_(e)}function gf(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function X_(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mf(n,e,t){return{name:pf(n,e),fields:t.value.mapValue.fields}}function RE(n,e,t){const r=qo(n,e.name),o=sr(e.updateTime),u=e.createTime?sr(e.createTime):vt.min(),d=new Ni({mapValue:{fields:e.fields}}),g=jn.newFoundDocument(r,o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function tg(n,e){let t;if(e instanceof lf)t={update:mf(n,e.key,e.value)};else if(e instanceof df)t={delete:pf(n,e.key)};else if(e instanceof Lc)t={update:mf(n,e.key,e.data),updateMask:fy(e.fieldMask)};else{if(!(e instanceof B_))return st();t={verify:pf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Pc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Nu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof uf)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:SE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function J_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ir.updateTime(sr(o.updateTime)):void 0!==o.exists?ir.exists(o.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(pt("REQUEST_TIME"===d.setToServerValue),g=new Pc):"appendMissingElements"in d?g=new Nu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new kc(d.removeAllFromArray.values||[]):"increment"in d?g=new uf(u,d.increment):st();const w=Pr.fromServerFormat(d.fieldPath);return new cf(w,g)}(n,o)):[];var o;if(e.update){const o=qo(n,e.update.name),u=new Ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new as((e.updateMask.fieldPaths||[]).map(C=>Pr.fromServerFormat(C)));return new Lc(o,u,d,t,r)}return new lf(o,u,t,r)}if(e.delete){const o=qo(n,e.delete);return new df(o,t)}if(e.verify){const o=qo(n,e.verify);return new B_(o,t)}return st()}function PE(n,e){return{documents:[Q_(n,e.path)]}}function e0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Q_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Q_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return FE(xn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Pu((M=C).field),direction:nT(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Y_(n,e.limit);var g,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function kE(n){let e=xE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=function(M){const N=LE(M);return N instanceof xn&&to(N)?N.getFilters():[N]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Mc(hd((N=M).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(M){let N;return N="object"==typeof M?M.value:M,Xh(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new ai((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new ai(M.values||[],!M.before)}(t.endAt)),uE(e,o,d,u,g,"F",w,C)}function LE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hd(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=hd(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hd(e.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=hd(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?tn.create(hd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return xn.create(e.compositeFilter.filters.map(t=>LE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function nT(n){return JC[n]}function rT(n){return Z_[n]}function iT(n){return eT[n]}function Pu(n){return{fieldPath:n.canonicalString()}}function hd(n){return Pr.fromServerFormat(n.fieldPath)}function FE(n){return n instanceof tn?function(e){if("=="===e.op){if(D_(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NAN"}};if(Xm(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(D_(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NAN"}};if(Xm(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(e.field),op:rT(e.op),value:e.value}}}(n):n instanceof xn?function(e){const t=e.getFilters().map(r=>FE(r));return 1===t.length?t[0]:{compositeFilter:{op:iT(e.op),filters:t}}}(n):st()}function fy(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ku{constructor(e,t,r,o,u=vt.min(),d=vt.min(),g=Wr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=w}withSequenceNumber(e){return new ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VE{constructor(e){this.fe=e}}function BE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:py(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:pf(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ou(o,u.version.toTimestamp()),createTime:Ou(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fd(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:fd(e.version)}}var o,u;return r}function py(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uc(n){const e=new rr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Vc(n,e){const t=(e.baseMutations||[]).map(u=>J_(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>J_(n.fe,u)),o=rr.fromMillis(e.localWriteTimeMs);return new ly(e.batchId,o,t,r)}function rg(n){const e=Uc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Uc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(pt(1===(o=n.query).documents.length),r=Oi(ld(xE(o.documents[0])))):r=Oi(kE(n.query)),new ku(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function oT(n,e){const t=fd(e.snapshotVersion),r=fd(e.lastLimboFreeSnapshotVersion);let o;o=qp(e.target)?PE(n.fe,e.target):e0(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ud(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function gy(n){const e=kE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ny(e,e.limit,"L"):e}function my(n,e){return new $_(e.largestBatchId,J_(n.fe,e.overlayMutation))}function aT(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function ig(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fd(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class uT{getBundleMetadata(e,t){return jE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Uc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return jE(e).put({bundleId:(r=t).id,createTime:fd(sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return yy(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:gy(o.bundledQuery),readTime:Uc(o.readTime)};var o})}saveNamedQuery(e,t){return yy(e).put({name:(r=t).name,readTime:fd(sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jE(n){return Er(n,"bundles")}function yy(n){return Er(n,"namedQueries")}class vy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new vy(e,t.uid||"")}getOverlay(e,t){return cs(e).get(aT(this.userId,t)).next(r=>r?my(this.serializer,r):null)}getOverlays(e,t){const r=Go();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new $_(t,d);o.push(this.we(e,g))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ri(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(cs(e).J("collectionPathOverlayIndex",g))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Go(),u=Ri(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return cs(e).j("collectionPathOverlayIndex",d).next(g=>{for(const w of g){const C=my(this.serializer,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Go();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cs(e).X({index:"collectionGroupOverlayIndex",range:g},(w,C,M)=>{const N=my(this.serializer,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):M.done()}).next(()=>u)}we(e,t){return cs(e).put(function(r,o,u){const[d,g,w]=aT(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:tg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function cs(n){return Er(n,"documentOverlays")}class Wo{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Ra(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Su(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?b_(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Ye.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Pi(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Bc(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Pi(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Wo.Ve=new Wo;class _y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=Bc(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=Bc(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class ro{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class t0{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class La{constructor(){this.je=new _y,this.ze=new ro(this.je),this.We=new t0(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class io{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new io(this.indexId,this.documentKey,this.arrayValue,r)}}function Os(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pd(n.arrayValue,e.arrayValue),0!==t?t:(t=pd(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function pd(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class yf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){pt(e.collectionGroup===this.collectionId);const t=od(e);if(void 0!==t&&!this.en(t))return!1;const r=bc(e);let o=new Set,u=0,d=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[d++],g))return!1}++u}for(;u<r.length;++u)if(d>=this.Ye.length||!this.sn(this.Ye[d++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function gd(n){var e,t;if(pt(n instanceof tn||n instanceof xn),n instanceof tn){if(n instanceof x_){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return xn.create(o,"or")}return n}const r=n.filters.map(o=>gd(o));return xn.create(r,n.op)}function vf(n){if(0===n.getFilters().length)return[];const e=Iy(gd(n));return pt(n0(e)),jc(e)||$c(e)?[e]:e.getFilters()}function jc(n){return n instanceof tn}function $c(n){return n instanceof xn&&to(n)}function n0(n){return jc(n)||$c(n)||function(e){if(e instanceof xn&&zp(e)){for(const t of e.getFilters())if(!jc(t)&&!$c(t))return!1;return!0}return!1}(n)}function Iy(n){if(pt(n instanceof tn||n instanceof xn),n instanceof tn)return n;if(1===n.filters.length)return Iy(n.filters[0]);const e=n.filters.map(r=>Iy(r));let t=xn.create(e,n.op);return t=sg(t),n0(t)?t:(pt(t instanceof xn),pt(rf(t)),pt(t.filters.length>1),t.filters.reduce((r,o)=>wy(r,o)))}function wy(n,e){let t;return pt(n instanceof tn||n instanceof xn),pt(e instanceof tn||e instanceof xn),t=n instanceof tn?e instanceof tn?xn.create([n,e],"and"):r0(n,e):e instanceof tn?r0(e,n):function(r,o){if(pt(r.filters.length>0&&o.filters.length>0),rf(r)&&rf(o))return Kr(r,o.getFilters());const u=zp(r)?r:o,d=zp(r)?o:r,g=u.filters.map(w=>wy(w,d));return xn.create(g,"or")}(n,e),sg(t)}function r0(n,e){if(rf(e))return Kr(e,n.getFilters());{const t=e.filters.map(r=>wy(n,r));return xn.create(t,"or")}}function sg(n){if(pt(n instanceof tn||n instanceof xn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return sg(e[0]);if(S_(n))return n;const t=e.map(o=>sg(o)),r=[];return t.forEach(o=>{o instanceof tn?r.push(o):o instanceof xn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:xn.create(r,n.op)}class $E{constructor(){this.rn=new Ey}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(xi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Ey{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new qn(on.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new qn(on.comparator)).toArray()}}const og=new Uint8Array(0);class HE{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Ey,this.un=new Pa(r=>ud(r),(r,o)=>Gp(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ri(o)};return Dy(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Hw(t),""],!1,!0);return Dy(e).j(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ho(d.parent))}return r})}addFieldIndex(e,t){const r=s0(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=by(e);return u.next(g=>{d.put(ig(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=s0(e),o=by(e),u=ag(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ag(e);let o=!0;const u=new Map;return se.forEach(this.cn(t),d=>this.an(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Vt();const g=[];return se.forEach(u,(w,C)=>{var M;Fe("IndexedDbIndexManager",`Using index ${M=w,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${ud(t)}`);const N=function(Dt,Ot){const zt=od(Ot);if(void 0===zt)return null;for(const dn of Mu(Dt,zt.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(C,w),$=function(Dt,Ot){const zt=new Map;for(const dn of bc(Ot))for(const ds of Mu(Dt,dn.fieldPath))switch(ds.op){case"==":case"in":zt.set(dn.fieldPath.canonicalString(),ds.value);break;case"not-in":case"!=":return zt.set(dn.fieldPath.canonicalString(),ds.value),Array.from(zt.values())}return null}(C,w),te=function(Dt,Ot){const zt=[];let dn=!0;for(const ds of bc(Ot)){const qg=0===ds.kind?Oa(Dt,ds.fieldPath,Dt.startAt):cd(Dt,ds.fieldPath,Dt.startAt);zt.push(qg.value),dn&&(dn=qg.inclusive)}return new ai(zt,dn)}(C,w),Ce=function(Dt,Ot){const zt=[];let dn=!0;for(const ds of bc(Ot)){const qg=0===ds.kind?cd(Dt,ds.fieldPath,Dt.endAt):Oa(Dt,ds.fieldPath,Dt.endAt);zt.push(qg.value),dn&&(dn=qg.inclusive)}return new ai(zt,dn)}(C,w),Ve=this.hn(w,C,te),He=this.hn(w,C,Ce),gt=this.ln(w,C,$),Tt=this.fn(w.indexId,N,Ve,te.inclusive,He,Ce.inclusive,gt);return se.forEach(Tt,Dt=>r.H(Dt,t.limit).next(Ot=>{Ot.forEach(zt=>{const dn=Ye.fromSegments(zt.documentKey);d.has(dn)||(d=d.add(dn),g.push(dn))})}))}).next(()=>g)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:vf(xn.create(e.filters,"and")).map(r=>R_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,d,g){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const $=t?this.dn(t[N/C]):og,te=this.wn(e,$,r[N%C],o),Ce=this._n(e,$,u[N%C],d),Ve=g.map(He=>this.wn(e,$,He,!0));M.push(...this.createRange(te,Ce,Ve))}return M}wn(e,t,r,o){const u=new io(e,Ye.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new io(e,Ye.empty(),t,r);return o?u.Je():u}an(e,t){const r=new yf(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.tn(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;const o=this.cn(t);return se.forEach(o,u=>this.an(e,u).next(d=>{d?0!==r&&d.fields.length<function(g){let w=new qn(Pr.comparator),C=!1;for(const M of g.filters)for(const N of M.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?C=!0:w=w.add(N.field));for(const M of g.orderBy)M.field.isKeyField()||(w=w.add(M.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new La;for(const o of bc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.He(o.kind);Wo.Ve._e(u,d)}return r.Qe()}dn(e){const t=new La;return Wo.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new La;return Wo.Ve._e(Ac(this.databaseId,t),r.He(function(o){const u=bc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new La);let u=0;for(const d of bc(e)){const g=r[u++];for(const w of o)if(this.yn(t,d.fieldPath)&&Qm(g))o=this.pn(o,d,g);else{const C=w.He(d.kind);Wo.Ve._e(g,C)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const w=new La;w.seed(g.Qe()),Wo.Ve._e(d,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=s0(e),o=by(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const d=[];return se.forEach(u,g=>o.get([g.indexId,this.uid]).next(w=>{d.push(function(C,M){const N=M?new Np(M.sequenceNumber,new xi(Uc(M.readTime),new Ye(Ho(M.documentKey)),M.largestBatchId)):Np.empty(),$=C.fields.map(([te,Ce])=>new Yh(Pr.fromServerFormat(te),Ce));return new un(C.indexId,C.collectionGroup,$,N)}(g,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=s0(e),u=by(e);return this.Tn(e).next(d=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>se.forEach(g,w=>u.put(ig(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),se.forEach(g,w=>this.En(e,o,w).next(C=>{const M=this.An(u,w);return C.isEqual(M)?se.resolve():this.vn(e,u,w,C,M)}))))})}Rn(e,t,r,o){return ag(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return ag(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=ag(e);let u=new qn(Os);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(d,g)=>{u=u.add(new io(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new qn(Os);const o=this.mn(t,e);if(null==o)return r;const u=od(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Qm(d))for(const g of d.arrayValue.values||[])r=r.add(new io(t.indexId,e.key,this.dn(g),o))}else r=r.add(new io(t.indexId,e.key,og,o));return r}vn(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,w,C,M,N){const $=g.getIterator(),te=w.getIterator();let Ce=Fp($),Ve=Fp(te);for(;Ce||Ve;){let He=!1,gt=!1;if(Ce&&Ve){const Tt=C(Ce,Ve);Tt<0?gt=!0:Tt>0&&(He=!0)}else null!=Ce?gt=!0:He=!0;He?(M(Ve),Ve=Fp(te)):gt?(N(Ce),Ce=Fp($)):(Ce=Fp($),Ve=Fp(te))}}(o,u,Os,g=>{d.push(this.Rn(e,t,r,g))},g=>{d.push(this.Pn(e,t,r,g))}),se.waitFor(d)}Tn(e){let t=1;return by(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Os(d,g)).filter((d,g,w)=>!g||0!==Os(d,w[g-1]));const o=[];o.push(e);for(const d of r){const g=Os(d,e),w=Os(d,t);if(0===g)o[0]=e.Je();else if(g>0&&w<0)o.push(d),o.push(d.Je());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.bn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,og,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,og,[]]))}return u}bn(e,t){return Os(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zE)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||st())).next(zE)}}function Dy(n){return Er(n,"collectionParents")}function ag(n){return Er(n,"indexEntries")}function s0(n){return Er(n,"indexConfiguration")}function by(n){return Er(n,"indexState")}function zE(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;qw(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new xi(e.readTime,e.documentKey,t)}const GE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const w=r.X({range:d},(M,N,$)=>(g++,$.delete()));u.push(w.next(()=>{pt(1===g)}));const C=[];for(const M of t.mutations){const N=Gm(e,M.key.path,t.batchId);u.push(o.delete(N)),C.push(M.key)}return se.waitFor(u).next(()=>C)}function o0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class Cy{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){pt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Cy(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).X({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=zc(e),d=Hc(e);return d.add({}).next(g=>{pt("number"==typeof g);const w=new ly(g,t,r,o),C=function($,te,Ce){const Ve=Ce.baseMutations.map(gt=>tg($.fe,gt)),He=Ce.mutations.map(gt=>tg($.fe,gt));return{userId:te,batchId:Ce.batchId,localWriteTimeMs:Ce.localWriteTime.toMillis(),baseMutations:Ve,mutations:He}}(this.serializer,this.userId,w),M=[];let N=new qn(($,te)=>kt($.canonicalString(),te.canonicalString()));for(const $ of o){const te=Gm(this.userId,$.key.path,g);N=N.add($.key.path.popLast()),M.push(d.put(C)),M.push(u.put(te,HA))}return N.forEach($=>{M.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[g]=w.keys()}),se.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Hc(e).get(t).next(r=>r?(pt(r.userId===this.userId),Vc(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Hc(e).X({index:"userMutationsIndex",range:o},(d,g,w)=>{g.userId===this.userId&&(pt(g.batchId>=r),u=Vc(this.serializer,g)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).j("userMutationsIndex",t).next(r=>r.map(o=>Vc(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Op(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return zc(e).X({range:o},(d,g,w)=>{const[C,M,N]=d,$=Ho(M);if(C===this.userId&&t.path.isEqual($))return Hc(e).get(N).next(te=>{if(!te)throw st();pt(te.userId===this.userId),u.push(Vc(this.serializer,te))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(kt);const o=[];return t.forEach(u=>{const d=Op(this.userId,u.path),g=IDBKeyRange.lowerBound(d),w=zc(e).X({range:g},(C,M,N)=>{const[$,te,Ce]=C,Ve=Ho(te);$===this.userId&&u.path.isEqual(Ve)?r=r.add(Ce):N.done()});o.push(w)}),se.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Op(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new qn(kt);return zc(e).X({range:d},(w,C,M)=>{const[N,$,te]=w,Ce=Ho($);N===this.userId&&r.isPrefixOf(Ce)?Ce.length===o&&(g=g.add(te)):M.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Hc(e).get(u).next(d=>{if(null===d)throw st();pt(d.userId===this.userId),r.push(Vc(this.serializer,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return qE(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return zc(e).X({range:r},(u,d,g)=>{if(u[0]===this.userId){const w=Ho(u[1]);o.push(w)}else g.done()}).next(()=>{pt(0===o.length)})})}containsKey(e,t){return WE(e,this.userId,t)}xn(e){return _f(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WE(n,e,t){const r=Op(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return zc(n).X({range:u,Y:!0},(g,w,C)=>{const[M,N,$]=g;M===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Hc(n){return Er(n,"mutations")}function zc(n){return Er(n,"documentMutations")}function _f(n){return Er(n,"mutationQueues")}class Lu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Lu(0)}static Mn(){return new Lu(-1)}}class Ty{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Lu(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>md(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return md(e).X((d,g)=>{const w=rg(g);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return md(e).X((r,o)=>{const u=rg(o);t(u)})}$n(e){return If(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}On(e,t){return If(e).put("targetGlobalKey",t)}Fn(e,t){return md(e).put(oT(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ud(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return md(e).X({range:o,index:"queryTargetsIndex"},(d,g,w)=>{const C=rg(g);Gp(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Fu(e);return t.forEach(d=>{const g=Ri(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=Fu(e);return se.forEach(t,u=>{const d=Ri(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Fu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Fu(e);let u=Vt();return o.X({range:r,Y:!0},(d,g,w)=>{const C=Ho(d[1]),M=new Ye(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Ri(t.path),o=IDBKeyRange.bound([r],[Hw(r)],!1,!0);let u=0;return Fu(e).X({index:"documentTargetsIndex",Y:!0,range:o},([d,g],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}le(e,t){return md(e).get(t).next(r=>r?rg(r):null)}}function md(n){return Er(n,"targets")}function If(n){return Er(n,"targetGlobal")}function Fu(n){return Er(n,"targetDocuments")}function KE([n,e],[t,r]){const o=kt(n,t);return 0===o?kt(e,r):o}class ug{constructor(e){this.Ln=e,this.buffer=new qn(KE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Tc(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Aa(r)}yield t.Qn(3e5)}))}}class cT{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ms.ct);const r=new ug(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(GE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GE):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,d,g,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),id()<=Ks.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(w-g)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class lT{constructor(e,t){this.db=e,this.garbageCollector=function YE(n,e){return new cT(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return wf(e,r)}removeReference(e,t,r){return wf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wf(e,t)}Xn(e,t){return function(r,o){let u=!1;return _f(r).Z(d=>WE(r,d,o).next(g=>(g&&(u=!0),se.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(d,g)=>{if(g<=t){const w=this.Xn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),Fu(e).delete([0,Ri(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wf(e,t)}Yn(e,t){const r=Fu(e);let o,u=Ms.ct;return r.X({index:"documentTargetsIndex"},([d,g],{path:w,sequenceNumber:C})=>{0===d?(u!==Ms.ct&&t(new Ye(Ho(o)),u),u=C,o=w):u=Ms.ct}).next(()=>{u!==Ms.ct&&t(new Ye(Ho(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(n,e){return Fu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class cg{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Uu(e).put(r)}removeEntry(e,t,r){return Uu(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],py(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return Uu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return Uu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(o,u)=>{r={document:this.ts(t,u),size:o0(u)}}).next(()=>r)}getEntries(e,t){let r=Rs();return this.ns(e,t,(o,u)=>{const d=this.ts(o,u);r=r.insert(o,d)}).next(()=>r)}ss(e,t){let r=Rs(),o=new Bn(Ye.comparator);return this.ns(e,t,(u,d)=>{const g=this.ts(u,d);r=r.insert(u,g),o=o.insert(u,o0(d))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let o=new qn(XE);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(lg(o.first()),lg(o.last())),d=o.getIterator();let g=d.getNext();return Uu(e).X({index:"documentKeyIndex",range:u},(w,C,M)=>{const N=Ye.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;g&&XE(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,C),g=d.hasNext()?d.getNext():null),g?M.G(lg(g)):M.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),py(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uu(e).j(IDBKeyRange.bound(d,g,!0)).next(w=>{let C=Rs();for(const M of w){const N=this.ts(Ye.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);N.isFoundDocument()&&(iy(t,N)||o.has(N.key))&&(C=C.insert(N.key,N))}return C})}getAllFromCollectionGroup(e,t,r,o){let u=Rs();const d=a0(t,r),g=a0(t,xi.max());return Uu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(w,C,M)=>{const N=this.ts(Ye.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new hT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QE(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Zn(e,t){return QE(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function sT(n,e){let t;if(e.document)t=RE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),o=Uc(e.noDocument.readTime);t=jn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ye.fromSegments(e.unknownDocument.path),o=Uc(e.unknownDocument.version);t=jn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new rr(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return jn.newInvalidDocument(e)}}function dT(n){return new Sy(n)}class hT extends cg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Pa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new qn((u,d)=>kt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),d.isValidDocument()){const w=BE(this.os.serializer,d);o=o.add(u.path.popLast());const C=o0(w);r+=C-g.size,t.push(this.os.addEntry(e,u,w))}else if(r-=g.size,this.trackRemovals){const w=BE(this.os.serializer,d.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,d)=>{this.us.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function QE(n){return Er(n,"remoteDocumentGlobal")}function Uu(n){return Er(n,"remoteDocumentsV14")}function lg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function a0(n,e){const t=e.documentKey.path.toArray();return[n,py(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XE(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=kt(t[u],r[u]),o)return o;return o=kt(t.length,r.length),o||(o=kt(t[t.length-2],r[r.length-2]),o||kt(t[t.length-1],r[r.length-1]))}class fT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u0{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Jp(r.mutation,o,as.empty(),rr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const o=Go();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=sy();return u.forEach((g,w)=>{d=d.insert(g,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=Rs();const d=af(),g=af();return t.forEach((w,C)=>{const M=r.get(C.key);o.has(C.key)&&(void 0===M||M.mutation instanceof Lc)?u=u.insert(C.key,C):void 0!==M?(d.set(C.key,M.mutation.getFieldMask()),Jp(M.mutation,C,M.mutation.getFieldMask(),rr.now())):d.set(C.key,as.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,M)=>d.set(C,M)),t.forEach((C,M)=>{var N;return g.set(C,new fT(M,null!==(N=d.get(C))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=af();let o=new Bn((d,g)=>d-g),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let M=r.get(w)||as.empty();M=g.applyToLocalView(C,M),r.set(w,M);const N=(o.get(g.batchId)||Vt()).add(w);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const w=g.getNext(),C=w.key,M=w.value,N=hE();M.forEach($=>{if(!u.has($)){const te=U_(t.get($),r.get($));null!==te&&N.set($,te),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Go());let g=-1,w=u;return d.next(C=>se.forEach(C,(M,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(M)?se.resolve():this.remoteDocumentCache.getEntry(e,M).next($=>{w=w.insert(M,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Vt())).next(M=>({batchId:g,changes:P_(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let o=sy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=sy();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,g=>{const w=(C=t,M=g.child(o),new xu(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((M,N)=>{u=u.insert(M,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((g,w)=>{const C=w.getKey();null===u.get(C)&&(u=u.insert(C,jn.newInvalidDocument(C)))});let d=sy();return u.forEach((g,w)=>{const C=o.get(g);void 0!==C&&Jp(C.mutation,w,as.empty(),rr.now()),iy(t,w)&&(d=d.insert(g,w))}),d})}}class JE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:sr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:gy(r.bundledQuery),readTime:sr(r.readTime)}),se.resolve();var r}}class eD{constructor(){this.overlays=new Bn(Ye.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Go();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Go(),u=t.length+1,d=new Ye(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const w=g.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Bn((C,M)=>C-M);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=Go(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const g=Go(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>g.set(C,M)),!(g.size()>=o)););return se.resolve(g)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new $_(t,r));let u=this.ls.get(t);void 0===u&&(u=Vt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class c0{constructor(){this.fs=new qn(ui.ds),this.ws=new qn(ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ye(new on([])),r=new ui(t,e),o=new ui(t,e+1),u=[];return this.ws.forEachInRange([r,o],d=>{this.ys(d),u.push(d.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ye(new on([])),r=new ui(t,e),o=new ui(t,e+1);let u=Vt();return this.ws.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ye.comparator(e.key,t.key)||kt(e.As,t.As)}static _s(e,t){return kt(e.As,t.As)||Ye.comparator(e.key,t.key)}}class pT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new qn(ui.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const d=new ly(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.Rs=this.Rs.add(new ui(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),o=new ui(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],d=>{const g=this.Ps(d.As);u.push(g)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(kt);return t.forEach(o=>{const u=new ui(o,0),d=new ui(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,d],g=>{r=r.add(g.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const d=new ui(new Ye(u),0);let g=new qn(kt);return this.Rs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(g=g.add(w.As)),!0)},d),se.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){pt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,o=>{const u=new ui(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ui(t,0),o=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tD{constructor(e){this.Ds=e,this.docs=new Bn(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Rs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():jn.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Rs();const d=t.path,g=new Ye(d.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:C,value:{document:M}}=w.getNext();if(!d.isPrefixOf(C.path))break;C.path.length>d.length+1||qw(h_(M),r)<=0||(o.has(M.key)||iy(t,M))&&(u=u.insert(M.key,M.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,o){st()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new l0(this)}getSize(e){return se.resolve(this.size)}}class l0 extends cg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class d0{constructor(e){this.persistence=e,this.xs=new Pa(t=>ud(t),Gp),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new c0,this.targetCount=0,this.Ms=Lu.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Lu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class h0{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new d0(this),this.indexManager=new $E,this.remoteDocumentCache=new tD(r=>this.referenceDelegate.Ls(r)),this.serializer=new VE(t),this.qs=new JE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new pT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new Ay(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Ay extends Ww{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Qs=new c0,this.js=null}static zs(e){return new yd(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const o=Ye.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class nD{constructor(e){this.serializer=e}O(e,t,r,o){const u=new Ma("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0}),g.createObjectStore("documentMutations"),rD(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),rD(e)),d=d.next(()=>function(g){const w=g.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,w){return w.store("mutations").j().next(C=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0});const M=w.store("mutations"),N=C.map($=>M.put($));return se.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ys(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(d=d.next(()=>this.Zs(u))),r<8&&o>=8&&(d=d.next(()=>this.ti(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.ei(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const w=g.createObjectStore("documentOverlays",{keyPath:__});w.createIndex("collectionPathOverlayIndex",Pp,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Wm,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const w=g.createObjectStore("remoteDocumentsV14",{keyPath:zA});w.createIndex("documentKeyIndex",VC),w.createIndex("collectionGroupIndex",BC)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.si(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:m_}).createIndex("sequenceNumberIndex",y_,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Jh}).createIndex("documentKeyIndex",v_,{unique:!1})}(e))),d}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=o0(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",d).next(g=>se.forEach(g,w=>{pt(w.userId===u.userId);const C=Vc(this.serializer,w);return qE(e,u.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((d,g)=>{const w=new on(d),C=[0,Ri(w)];u.push(t.get(C).next(M=>M?se.resolve():t.put({targetId:0,path:Ri(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:jC});const r=t.store("collectionParents"),o=new Ey,u=d=>{if(o.add(d)){const g=d.lastSegment(),w=d.popLast();return r.put({collectionId:g,parent:Ri(w)})}};return t.store("remoteDocuments").X({Y:!0},(d,g)=>{const w=new on(d);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([d,g,w],C)=>{const M=Ho(g);return u(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=rg(o),d=oT(this.serializer,u);return t.put(d)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,d)=>{const g=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Ye(on.fromString(C.document.name).popFirst(5)):C.noDocument?Ye.fromSegments(C.noDocument.path):C.unknownDocument?Ye.fromSegments(C.unknownDocument.path):st()).path.toArray();var C;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(M))}).next(()=>se.waitFor(o))}si(e,t){const r=t.store("mutations"),o=dT(this.serializer),u=new h0(yd.zs,this.serializer.fe);return r.j().next(d=>{const g=new Map;return d.forEach(w=>{var C;let M=null!==(C=g.get(w.userId))&&void 0!==C?C:Vt();Vc(this.serializer,w).keys().forEach(N=>M=M.add(N)),g.set(w.userId,M)}),se.forEach(g,(w,C)=>{const M=new si(C),N=vy.de(this.serializer,M),$=u.getIndexManager(M),te=Cy.de(M,this.serializer,$,u.referenceDelegate);return new u0(o,te,N,$).recalculateAndSaveOverlaysForDocumentKeys(new Lp(t,Ms.ct),w).next()})})}}function rD(n){n.createObjectStore("targetDocuments",{keyPath:qA}).createIndex("documentTargetsIndex",qm,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GA,{unique:!0}),n.createObjectStore("targetGlobal")}const f0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class p0{constructor(e,t,r,o,u,d,g,w,C,M,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=d,this.document=g,this.ri=C,this.oi=M,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!p0.D())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lT(this,o),this.di=t+"main",this.serializer=new VE(w),this.wi=new jo(this.di,this.ui,new nD(this.serializer)),this.Bs=new Ty(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dT(this.serializer),this.qs=new uT,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,f0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Df(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Tc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return vd(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return Df(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Er(r,"clientMetadata");return o.j().next(u=>{const d=e.Si(u,18e5),g=u.filter(w=>-1===d.indexOf(w));return se.forEach(g,w=>o.delete(w.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):vd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,f0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Df(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lp(t,Ms.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Df(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Cy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HE(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return vy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.ui)?WA:14===d?kp:13===d?Km:12===d?I_:11===d?ad:void st();var d;let g;return this.wi.runTransaction(e,o,u,w=>(g=new Lp(w,this.Os?this.Os.next():Ms.ct),"readwrite-primary"===t?this.Ti(g).next(C=>!!C||this.Ei(g)).next(C=>{if(!C)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new xe(ce.FAILED_PRECONDITION,$m);return r(g)}).next(C=>this.vi(g).next(()=>C)):this.Oi(g).next(()=>r(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Oi(e){return vd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,f0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vd(e).put("owner",t)}static D(){return jo.D()}Ai(e){const t=vd(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Zt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vd(n){return Er(n,"owner")}function Df(n){return Er(n,"clientMetadata")}function My(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xy{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Vt(),o=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new xy(e,t.fromCache,r,o)}}class iD{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(N_(t))return se.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=ny(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Vt(...u);return this.Ui.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.ji(t,g);return this.zi(t,C,d,w.readTime)?this.Ki(e,ny(t,null,"F")):this.Wi(e,C,t,w)}))})))}Gi(e,t,r,o){return N_(t)||o.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const d=this.ji(t,u);return this.zi(t,d,r,o)?this.Qi(e,t):(id()<=Ks.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ry(t)),this.Wi(e,d,t,d_(o,-1)))})}ji(e,t){let r=new qn(KC(e));return t.forEach((o,u)=>{iy(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return id()<=Ks.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",ry(t)),this.Ui.getDocumentsMatchingQuery(e,t,xi.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class gT{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Bn(kt),this.Yi=new Pa(u=>ud(u),Gp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function g0(n,e,t,r){return new gT(n,e,t,r)}function Ry(n,e){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,ve.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let w=Vt();for(const C of o){d.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of u){g.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.localDocuments.getDocuments(r,w).next(C=>({er:C,removedBatchIds:d,addedBatchIds:g}))})})}),Ny.apply(this,arguments)}function y0(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function v0(n,e,t){let r=Vt(),o=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Rs();return t.forEach((g,w)=>{const C=u.get(g);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(g)),w.isNoDocument()&&w.version.isEqual(vt.min())?(e.removeEntry(g,w.readTime),d=d.insert(g,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(g,w)):Fe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",w.version)}),{nr:d,sr:o}})}function sD(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _d(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Bs.allocateTargetId(r).next(d=>(o=new ku(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Id(n,e,t){return _0.apply(this,arguments)}function _0(){return _0=(0,ve.Z)(function*(n,e,t){const r=tt(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Tc(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),_0.apply(this,arguments)}function Oy(n,e,t){const r=tt(n);let o=vt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,w,C){const M=tt(g),N=M.Yi.get(C);return void 0!==N?se.resolve(M.Ji.get(N)):M.Bs.getTargetData(w,C)}(r,d,Oi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(d,g.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(d,e,t?o:vt.min(),t?u:Vt())).next(g=>(Py(r,lE(e),g),{documents:g,ir:u})))}function oD(n,e){const t=tt(n),r=tt(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(d=>d?d.target:null))}function I0(n,e){const t=tt(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,d_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Py(t,e,o),o))}function Py(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function ky(){return ky=(0,ve.Z)(function*(n,e,t,r){const o=tt(n);let u=Vt(),d=Rs();for(const C of t){const M=e.rr(C.metadata.name);C.document&&(u=u.add(M));const N=e.ur(C);N.setReadTime(e.cr(C.metadata.readTime)),d=d.insert(M,N)}const g=o.Zi.newChangeBuffer({trackRemovals:!0}),w=yield _d(o,(C=r,Oi(ld(on.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>v0(C,g,d).next(M=>(g.apply(C),M)).next(M=>o.Bs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Bs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,M.nr,M.sr)).next(()=>M.nr)))}),ky.apply(this,arguments)}function uD(n,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,ve.Z)(function*(n,e,t=Vt()){const r=yield _d(n,Oi(gy(e.bundledQuery))),o=tt(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=sr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Wr.EMPTY_BYTE_STRING,d);return o.Ji=o.Ji.insert(g.targetId,g),o.Bs.updateTargetData(u,g).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Ly.apply(this,arguments)}function w0(n,e){return`firestore_clients_${n}_${e}`}function E0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fy(n,e){return`firestore_targets_${n}_${e}`}class dg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new dg(e,t,o.state,u):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Gc(e,r.state,o):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ko{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Oc();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Kw(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Ko(e,u):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class D0{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new D0(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class b0{constructor(){this.activeTargetIds=Oc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hg{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Bn(kt),this.started=!1,this.yr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=w0(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new b0),this.Tr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(w0(e.persistenceKey,o));if(u){const d=Ko.ar(o,u);d&&(e.gr=e.gr.insert(d.clientId,d))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fy(this.persistenceKey,e));if(r){const o=Gc.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fy(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let d=Ms.ct;if(null!=u)try{const g=JSON.parse(u);pt("number"==typeof g),d=g}catch(g){wr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Ms.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new dg(this.currentUser,e,t,r),u=E0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=E0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=Fy(this.persistenceKey,e),u=new Gc(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Ko.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return dg.ar(new si(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Gc.ar(o,t)}br(e){return D0.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),d=[],g=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||g.push(w)}),this.syncEngine.Wr(d,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Oc();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class qc{constructor(){this.Hr=new b0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new b0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C0{Yr(e){}shutdown(){}}class cD{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bf=null;function lD(){return null===bf?bf=268435456+Math.round(2147483648*Math.random()):bf++,"0x"+bf.toString(16)}const YA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ki="WebChannelConnection";class dD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const d=lD(),g=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${d}:`,g,r);const w={};return this.Eo(w,o,u),this.Ao(e,g,w,r).then(C=>(Fe("RestConnection",`Received RPC '${e}' ${d}: `,C),C),C=>{throw Bo("RestConnection",`RPC '${e}' ${d} failed with error: `,C,"url: ",g,"request:",r),C})}vo(e,t,r,o,u,d){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${YA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=lD();return new Promise((d,g)=>{const w=new Lw;w.setWithCredentials(!0),w.listenOnce(VA.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case u_.NO_ERROR:const M=w.getResponseJson();Fe(ki,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(M)),d(M);break;case u_.TIMEOUT:Fe(ki,`RPC '${e}' ${u} timed out`),g(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case u_.HTTP_ERROR:const N=w.getStatus();if(Fe(ki,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let $=w.getResponseJson();Array.isArray($)&&($=$[0]);const te=$?.error;if(te&&te.status&&te.message){const Ce=function(Ve){const He=Ve.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(He)>=0?He:ce.UNKNOWN}(te.status);g(new xe(Ce,te.message))}else g(new xe(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else g(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Fe(ki,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(o);Fe(ki,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",C,r,15)})}Ro(e,t,r){const o=lD(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Ec(),g=Mp(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(w.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(w.xmlHttpFactory=new jA({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const M=u.join("");Fe(ki,`Creating RPC '${e}' stream ${o}: ${M}`,w);const N=d.createWebChannel(M,w);let $=!1,te=!1;const Ce=new yT({ro:He=>{te?Fe(ki,`Not sending because RPC '${e}' stream ${o} is closed:`,He):($||(Fe(ki,`Opening RPC '${e}' stream ${o} transport.`),N.open(),$=!0),Fe(ki,`RPC '${e}' stream ${o} sending:`,He),N.send(He))},oo:()=>N.close()}),Ve=(He,gt,Tt)=>{He.listen(gt,Dt=>{try{Tt(Dt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Ve(N,c_.EventType.OPEN,()=>{te||Fe(ki,`RPC '${e}' stream ${o} transport opened.`)}),Ve(N,c_.EventType.CLOSE,()=>{te||(te=!0,Fe(ki,`RPC '${e}' stream ${o} transport closed`),Ce.wo())}),Ve(N,c_.EventType.ERROR,He=>{te||(te=!0,Bo(ki,`RPC '${e}' stream ${o} transport errored:`,He),Ce.wo(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Ve(N,c_.EventType.MESSAGE,He=>{var gt;if(!te){const Tt=He.data[0];pt(!!Tt);const Ot=Tt.error||(null===(gt=Tt[0])||void 0===gt?void 0:gt.error);if(Ot){Fe(ki,`RPC '${e}' stream ${o} received error:`,Ot);const zt=Ot.status;let dn=function(qg){const nR=jr[qg];if(void 0!==nR)return wE(nR)}(zt),ds=Ot.message;void 0===dn&&(dn=ce.INTERNAL,ds="Unknown error status: "+zt+" with message "+Ot.message),te=!0,Ce.wo(new xe(dn,ds)),N.close()}else Fe(ki,`RPC '${e}' stream ${o} received:`,Tt),Ce._o(Tt)}}),Ve(g,BA.STAT_EVENT,He=>{He.stat===xC.PROXY?Fe(ki,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===xC.NOPROXY&&Fe(ki,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Ce.fo()},0),Ce}}function hD(){return typeof window<"u"?window:null}function Dr(){return typeof document<"u"?document:null}function Cf(n){return new TE(n,!0)}class T0{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fD{constructor(e,t,r,o,u,d,g,w){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new T0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pD extends fD{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function OE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:st(),o=e.targetChange.targetIds||[],u=function(w,C){return w.useProto3Json?(pt(void 0===C||"string"==typeof C),Wr.fromBase64String(C||"")):(pt(void 0===C||C instanceof Uint8Array),Wr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:wE(w.code);return new xe(C,w.message||"")}(d);t=new q_(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=qo(n,r.document.name),u=sr(r.document.updateTime),d=r.document.createTime?sr(r.document.createTime):vt.min(),g=new Ni({mapValue:{fields:r.document.fields}}),w=jn.newFoundDocument(o,u,d,g);t=new eg(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=qo(n,r.document),u=r.readTime?sr(r.readTime):vt.min(),d=jn.newNoDocument(o,u);t=new eg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=qo(n,r.document);t=new eg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:o=0,unchangedNames:u}=r,d=new XC(o,u);t=new G_(r.targetId,d)}}var w;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?sr(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=gf(this.serializer),t.addTarget=function(o,u){let d;const g=u.target;if(d=qp(g)?{documents:PE(o,g)}:{query:e0(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=ff(o,u.resumeToken);const w=Y_(o,u.expectedCount);null!==w&&(d.expectedCount=w)}else if(u.snapshotVersion.compareTo(vt.min())>0){d.readTime=Ou(o,u.snapshotVersion.toTimestamp());const w=Y_(o,u.expectedCount);null!==w&&(d.expectedCount=w)}return d}(this.serializer,e);const r=function tT(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=gf(this.serializer),t.removeTarget=e,this.Wo(t)}}class vT extends fD{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ng(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,o){let u=sr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=sr(o)),new YC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.cu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=gf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tg(this.serializer,r))};this.Wo(t)}}class gD extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.vo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class _T{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(wr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class IT{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var w;ci(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ve.Z)(function*(C){const M=tt(C);M.vu.add(4),yield wd(M),M.bu.set("Unknown"),M.vu.delete(4),yield Tf(M)}),function(C){return w.apply(this,arguments)})(d))}))}),this.bu=new _T(r,o)}}function Tf(n){return S0.apply(this,arguments)}function S0(){return S0=(0,ve.Z)(function*(n){if(ci(n))for(const e of n.Ru)yield e(!0)}),S0.apply(this,arguments)}function wd(n){return yD.apply(this,arguments)}function yD(){return yD=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),yD.apply(this,arguments)}function fg(n,e){const t=tt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),oo(t)?A0(t):bd(t).Ko()&&so(t,e))}function Sf(n,e){const t=tt(n),r=bd(t);t.Au.delete(e),r.Ko()&&vD(t,e),0===t.Au.size&&(r.Ko()?r.jo():ci(t)&&t.bu.set("Unknown"))}function so(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bd(n).su(e)}function vD(n,e){n.Vu.qt(e),bd(n).iu(e)}function A0(n){n.Vu=new K_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),bd(n).start(),n.bu.gu()}function oo(n){return ci(n)&&!bd(n).Uo()&&n.Au.size>0}function ci(n){return 0===tt(n).vu.size}function ao(n){n.Vu=void 0}function _D(n){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{so(n,e)})}),Uy.apply(this,arguments)}function wT(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,ve.Z)(function*(n,e){ao(n),oo(n)?(n.bu.Iu(e),A0(n)):n.bu.set("Unknown")}),M0.apply(this,arguments)}function ET(n,e,t){return x0.apply(this,arguments)}function x0(){return x0=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof q_&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.Au.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.Au.delete(g),o.Vu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Af(n,r)}else if(e instanceof eg?n.Vu.Ht(e):e instanceof G_?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield y0(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Vu.ce(u);return d.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const C=o.Au.get(w);C&&o.Au.set(w,C.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach((g,w)=>{const C=o.Au.get(g);if(!C)return;o.Au.set(g,C.withResumeToken(Wr.EMPTY_BYTE_STRING,C.snapshotVersion)),vD(o,g);const M=new ku(C.target,g,w,C.sequenceNumber);so(o,M)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Af(n,r)}var r}),x0.apply(this,arguments)}function Af(n,e,t){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,ve.Z)(function*(n,e,t){if(!Tc(e))throw e;n.vu.add(1),yield wd(n),n.bu.set("Offline"),t||(t=()=>y0(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Tf(n)}))}),Ed.apply(this,arguments)}function ID(n,e){return e().catch(t=>Af(n,t,e))}function Dd(n){return R0.apply(this,arguments)}function R0(){return R0=(0,ve.Z)(function*(n){const e=tt(n),t=Vu(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;DT(e);)try{const o=yield sD(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,wD(e,o)}catch(o){yield Af(e,o)}N0(e)&&pg(e)}),R0.apply(this,arguments)}function DT(n){return ci(n)&&n.Eu.length<10}function wD(n,e){n.Eu.push(e);const t=Vu(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function N0(n){return ci(n)&&!Vu(n).Uo()&&n.Eu.length>0}function pg(n){Vu(n).start()}function bT(n){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,ve.Z)(function*(n){Vu(n).hu()}),Vy.apply(this,arguments)}function ED(n){return By.apply(this,arguments)}function By(){return By=(0,ve.Z)(function*(n){const e=Vu(n);for(const t of n.Eu)e.uu(t.mutations)}),By.apply(this,arguments)}function CT(n,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),o=j_.from(r,e,t);yield ID(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Dd(n)}),O0.apply(this,arguments)}function P0(n,e){return gg.apply(this,arguments)}function gg(){return gg=(0,ve.Z)(function*(n,e){var t;e&&Vu(n).ou&&(yield(t=(0,ve.Z)(function*(r,o){if(IE(u=o.code)&&u!==ce.ABORTED){const d=r.Eu.shift();Vu(r).Qo(),yield ID(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Dd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),N0(n)&&pg(n)}),gg.apply(this,arguments)}function k0(n,e){return jy.apply(this,arguments)}function jy(){return jy=(0,ve.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=ci(t);t.vu.add(3),yield wd(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Tf(t)}),jy.apply(this,arguments)}function $y(n,e){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,ve.Z)(function*(n,e){const t=tt(n);e?(t.vu.delete(2),yield Tf(t)):e||(t.vu.add(2),yield wd(t),t.bu.set("Unknown"))}),Hy.apply(this,arguments)}function bd(n){return n.Su||(n.Su=function(e,t,r){const o=tt(e);return o.fu(),new pD(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:_D.bind(null,n),ao:wT.bind(null,n),nu:ET.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),oo(n)?A0(n):n.bu.set("Unknown")):(yield n.Su.stop(),ao(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Vu(n){return n.Du||(n.Du=function(e,t,r){const o=tt(e);return o.fu(),new vT(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:bT.bind(null,n),ao:P0.bind(null,n),au:ED.bind(null,n),cu:CT.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield Dd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class zy{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new zy(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cd(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Tc(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Mf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=sy(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new Mf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Mf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DD{constructor(){this.Cu=new Bn(Ye.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class xf{constructor(e,t,r,o,u,d,g,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new xf(e,t,Mf.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class TT{constructor(){this.Nu=void 0,this.listeners=[]}}class ST{constructor(){this.queries=new Pa(e=>cE(e),Kp),this.onlineState="Unknown",this.ku=new Set}}function L0(n,e){return F0.apply(this,arguments)}function F0(){return F0=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new TT),o)try{u.Nu=yield t.onListen(r)}catch(d){const g=Cd(d,`Initialization of query '${ry(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&B0(t)}),F0.apply(this,arguments)}function U0(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),V0.apply(this,arguments)}function AT(n,e){const t=tt(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.$u(o)&&(r=!0);d.Nu=o}}r&&B0(t)}function MT(n,e,t){const r=tt(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function B0(n){n.ku.forEach(e=>{e.next()})}class j0{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new xf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=xf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xT{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class bD{constructor(e){this.serializer=e}rr(e){return qo(this.serializer,e)}ur(e){return e.metadata.exists?RE(this.serializer,e.document,!1):jn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return sr(e)}}class RT{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CD(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=on.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new bD(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Vt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function aD(n,e,t,r){return ky.apply(this,arguments)}(e.localStore,new bD(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield uD(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function CD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TD{constructor(e){this.key=e}}class $0{constructor(e){this.key=e}}class H0{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Vt(),this.mutatedKeys=Vt(),this.tc=KC(e),this.ec=new Mf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new DD,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const $=o.get(M),te=iy(this.query,N)?N:null,Ce=!!$&&this.mutatedKeys.has($.key),Ve=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let He=!1;$&&te?$.data.isEqual(te.data)?Ce!==Ve&&(r.track({type:3,doc:te}),He=!0):this.rc($,te)||(r.track({type:2,doc:te}),He=!0,(w&&this.tc(te,w)>0||C&&this.tc(te,C)<0)&&(g=!0)):!$&&te?(r.track({type:0,doc:te}),He=!0):$&&!te&&(r.track({type:1,doc:$}),He=!0,(w||C)&&(g=!0)),He&&(te?(d=d.add(te),u=Ve?u.add(M):u.delete(M)):(d=d.delete(M),u=u.delete(M)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const M="F"===this.query.limitType?d.last():d.first();d=d.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{ec:d,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((C,M)=>function(N,$){const te=Ce=>{switch(Ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return te(N)-te($)}(C.type,M.type)||this.tc(C.doc,M.doc)),this.oc(r);const d=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,w=g!==this.Xu;return this.Xu=g,0!==u.length||w?{snapshot:new xf(this.query,e.ec,o,u,e.mutatedKeys,0===g,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:d}:{cc:d}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new DD,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Vt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new $0(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new TD(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Vt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return xf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class SD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AD{constructor(e){this.key=e,this.fc=!1}}class MD{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.dc={},this.wc=new Pa(g=>cE(g),Kp),this._c=new Map,this.mc=new Set,this.gc=new Bn(Ye.comparator),this.yc=new Map,this.Ic=new c0,this.Tc={},this.Ec=new Map,this.Ac=Lu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function xD(n,e){return Gy.apply(this,arguments)}function Gy(){return Gy=(0,ve.Z)(function*(n,e){const t=X0(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const d=yield _d(t.localStore,Oi(e)),g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield qy(t,e,r,"current"===g,d.resumeToken),t.isPrimaryClient&&fg(t.remoteStore,d)}return o}),Gy.apply(this,arguments)}function qy(n,e,t,r,o){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,ve.Z)(function*(n,e,t,r,o){n.Rc=(N,$,te)=>{return(Ce=(0,ve.Z)(function*(Ve,He,gt,Tt){let Dt=He.view.sc(gt);Dt.zi&&(Dt=yield Oy(Ve.localStore,He.query,!1).then(({documents:dn})=>He.view.sc(dn,Dt)));const Ot=Tt&&Tt.targetChanges.get(He.targetId),zt=He.view.applyChanges(Dt,Ve.isPrimaryClient,Ot);return Nf(Ve,He.targetId,zt.cc),zt.snapshot}),function(Ve,He,gt,Tt){return Ce.apply(this,arguments)})(n,N,$,te);var Ce};const u=yield Oy(n.localStore,e,!0),d=new H0(e,u.ir),g=d.sc(u.documents),w=hy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(g,n.isPrimaryClient,w);Nf(n,t,C.cc);const M=new SD(e,t,d);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),Wy.apply(this,arguments)}function RD(n,e){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,ve.Z)(function*(n,e){const t=tt(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!Kp(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Id(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Sf(t.remoteStore,r.targetId),Rf(t,r.targetId)}).catch(Aa))):(Rf(t,r.targetId),yield Id(t.localStore,r.targetId,!0))}),Ky.apply(this,arguments)}function z0(){return z0=(0,ve.Z)(function*(n,e,t){const r=J0(n);try{const o=yield function(u,d){const g=tt(u),w=rr.now(),C=d.reduce(($,te)=>$.add(te.key),Vt());let M,N;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let te=Rs(),Ce=Vt();return g.Zi.getEntries($,C).next(Ve=>{te=Ve,te.forEach((He,gt)=>{gt.isValidDocument()||(Ce=Ce.add(He))})}).next(()=>g.localDocuments.getOverlayedDocuments($,te)).next(Ve=>{M=Ve;const He=[];for(const gt of d){const Tt=Ns(gt,M.get(gt.key).overlayedDocument);null!=Tt&&He.push(new Lc(gt.key,Tt,C_(Tt.value.mapValue),ir.exists(!0)))}return g.mutationQueue.addMutationBatch($,w,He,d)}).next(Ve=>{N=Ve;const He=Ve.applyToLocalDocumentSet(M,Ce);return g.documentOverlayCache.saveOverlays($,Ve.batchId,He)})}).then(()=>({batchId:N.batchId,changes:P_(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let w=u.Tc[u.currentUser.toKey()];w||(w=new Bn(kt)),w=w.insert(d,g),u.Tc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Fa(r,o.changes),yield Dd(r.remoteStore)}catch(o){const u=Cd(o,"Failed to persist write");t.reject(u)}}),z0.apply(this,arguments)}function ND(n,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,ve.Z)(function*(n,e){const t=tt(n);try{const r=yield function mT(n,e){const t=tt(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const g=[];e.targetChanges.forEach((M,N)=>{const $=o.get(N);if(!$)return;g.push(t.Bs.removeMatchingKeys(u,M.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,M.addedDocuments,N)));let te=$.withSequenceNumber(u.currentSequenceNumber);var Ce,Ve,He;null!==e.targetMismatches.get(N)?te=te.withResumeToken(Wr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):M.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(M.resumeToken,r)),o=o.insert(N,te),Ve=te,He=M,(0===(Ce=$).resumeToken.approximateByteSize()||Ve.snapshotVersion.toMicroseconds()-Ce.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,te))});let w=Rs(),C=Vt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,M))}),g.push(v0(u,d,e.documentUpdates).next(M=>{w=M.nr,C=M.sr})),!r.isEqual(vt.min())){const M=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(M)}return se.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.yc.get(u);d&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.fc=!0:o.modifiedDocuments.size>0?pt(d.fc):o.removedDocuments.size>0&&(pt(d.fc),d.fc=!1))}),yield Fa(t,r,e)}catch(r){yield Aa(r)}}),Kc.apply(this,arguments)}function NT(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,d)=>{const g=d.view.Mu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=tt(u);g.onlineState=d;let w=!1;g.queries.forEach((C,M)=>{for(const N of M.listeners)N.Mu(d)&&(w=!0)}),w&&B0(g)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function G0(n,e,t){return OD.apply(this,arguments)}function OD(){return OD=(0,ve.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let d=new Bn(Ye.comparator);d=d.insert(u,jn.newNoDocument(u,vt.min()));const g=Vt().add(u),w=new dd(vt.min(),new Map,new Bn(kt),d,g);yield ND(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),kD(r)}else yield Id(r.localStore,e,!1).then(()=>Rf(r,e,t)).catch(Aa)}),OD.apply(this,arguments)}function PD(n,e){return Zy.apply(this,arguments)}function Zy(){return Zy=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const o=yield function m0(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(d,g,w,C){const M=w.batch,N=M.keys();let $=se.resolve();return N.forEach(te=>{$=$.next(()=>C.getEntry(g,te)).next(Ce=>{const Ve=w.docVersions.get(te);pt(null!==Ve),Ce.version.compareTo(Ve)<0&&(M.applyToRemoteDocument(Ce,w),Ce.isValidDocument()&&(Ce.setReadTime(w.commitVersion),C.addEntry(Ce)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(g,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Vt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(g=g.add(d.batch.mutations[w].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);Yc(t,r,null),W0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fa(t,o)}catch(o){yield Aa(o)}}),Zy.apply(this,arguments)}function QA(n,e,t){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,ve.Z)(function*(n,e,t){const r=tt(n);try{const o=yield function(u,d){const g=tt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return g.mutationQueue.lookupMutationBatch(w,d).next(M=>(pt(null!==M),C=M.keys(),g.mutationQueue.removeMutationBatch(w,M))).next(()=>g.mutationQueue.performConsistencyCheck(w)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>g.localDocuments.getDocuments(w,C))})}(r.localStore,e);Yc(r,e,t),W0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fa(r,o)}catch(o){yield Aa(o)}}),Zc.apply(this,arguments)}function q0(){return q0=(0,ve.Z)(function*(n,e){const t=tt(n);ci(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=tt(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Cd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),q0.apply(this,arguments)}function W0(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Yc(n,e,t){const r=tt(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Rf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||mg(n,r)})}function mg(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Sf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),kD(n))}function Nf(n,e,t){for(const r of t)r instanceof TD?(n.Ic.addReference(r.key,e),ls(n,r)):r instanceof $0?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||mg(n,r.key)):st()}function ls(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),kD(n))}function kD(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ye(on.fromString(e)),r=n.Ac.next();n.yc.set(r,new AD(t)),n.gc=n.gc.insert(t,r),fg(n.remoteStore,new ku(Oi(ld(t.path)),r,"TargetPurposeLimboResolution",Ms.ct))}}function Fa(n,e,t){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,ve.Z)(function*(n,e,t){const r=tt(n),o=[],u=[],d=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,w)=>{d.push(r.Rc(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const M=xy.Li(w.targetId,C);u.push(M)}}))}),yield Promise.all(d),r.dc.nu(o),yield(g=(0,ve.Z)(function*(w,C){const M=tt(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>se.forEach(C,$=>se.forEach($.Fi,te=>M.persistence.referenceDelegate.addReference(N,$.targetId,te)).next(()=>se.forEach($.Bi,te=>M.persistence.referenceDelegate.removeReference(N,$.targetId,te)))))}catch(N){if(!Tc(N))throw N;Fe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const te=M.Ji.get($),Ve=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);M.Ji=M.Ji.insert($,Ve)}}}),function(w,C){return g.apply(this,arguments)})(r.localStore,u))}),Yy.apply(this,arguments)}function PT(n,e){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,ve.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Ry(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(d=>{d.forEach(g=>{g.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fa(t,r.er)}var o}),Qy.apply(this,arguments)}function LD(n,e){const t=tt(n),r=t.yc.get(e);if(r&&r.fc)return Vt().add(r.key);{let o=Vt();const u=t._c.get(e);if(!u)return o;for(const d of u){const g=t.wc.get(d);o=o.unionWith(g.view.nc)}return o}}function FD(n,e){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,ve.Z)(function*(n,e){const t=tt(n),r=yield Oy(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&Nf(t,e.targetId,o.cc),o}),Xy.apply(this,arguments)}function kT(n,e){return K0.apply(this,arguments)}function K0(){return K0=(0,ve.Z)(function*(n,e){const t=tt(n);return I0(t.localStore,e).then(r=>Fa(t,r))}),K0.apply(this,arguments)}function LT(n,e,t,r){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,ve.Z)(function*(n,e,t,r){const o=tt(n),u=yield function(d,g){const w=tt(d),C=tt(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.Sn(M,g).next(N=>N?w.localDocuments.getDocuments(M,N):se.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Dd(o.remoteStore):"acknowledged"===t||"rejected"===t?(Yc(o,e,r||null),W0(o,e),g=e,tt(tt(o.localStore).mutationQueue).Cn(g)):st(),yield Fa(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sd.apply(this,arguments)}function Z0(){return Z0=(0,ve.Z)(function*(n,e){const t=tt(n);if(X0(t),J0(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield UD(t,r.toArray());t.vc=!0,yield $y(t.remoteStore,!0);for(const u of o)fg(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Rf(t,d),Id(t.localStore,d,!0))),Sf(t.remoteStore,d)}),yield o,yield UD(t,r),function(u){const d=tt(u);d.yc.forEach((g,w)=>{Sf(d.remoteStore,w)}),d.Ic.Ts(),d.yc=new Map,d.gc=new Bn(Ye.comparator)}(t),t.vc=!1,yield $y(t.remoteStore,!1)}}),Z0.apply(this,arguments)}function UD(n,e,t){return Of.apply(this,arguments)}function Of(){return Of=(0,ve.Z)(function*(n,e,t){const r=tt(n),o=[],u=[];for(const d of e){let g;const w=r._c.get(d);if(w&&0!==w.length){g=yield _d(r.localStore,Oi(w[0]));for(const C of w){const M=r.wc.get(C),N=yield FD(r,M);N.snapshot&&u.push(N.snapshot)}}else{const C=yield oD(r.localStore,d);g=yield _d(r.localStore,C),yield qy(r,Y0(C),d,!1,g.resumeToken)}o.push(g)}return r.dc.nu(u),o}),Of.apply(this,arguments)}function Y0(n){return uE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VD(n){const e=tt(n);return tt(tt(e.localStore).persistence).$i()}function BD(n,e,t,r){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,ve.Z)(function*(n,e,t,r){const o=tt(n);if(o.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield I0(o.localStore,lE(u[0])),g=dd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wr.EMPTY_BYTE_STRING);yield Fa(o,d,g);break}case"rejected":yield Id(o.localStore,e,!0),Rf(o,e,r);break;default:st()}}),Q0.apply(this,arguments)}function yg(n,e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,ve.Z)(function*(n,e,t){const r=X0(n);if(r.vc){for(const o of e){if(r._c.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield oD(r.localStore,o),d=yield _d(r.localStore,u);yield qy(r,Y0(u),d.targetId,!1,d.resumeToken),fg(r.remoteStore,d)}for(const o of t)r._c.has(o)&&(yield Id(r.localStore,o,!1).then(()=>{Sf(r.remoteStore,o),Rf(r,o)}).catch(Aa))}}),Ad.apply(this,arguments)}function X0(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ND.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G0.bind(null,e),e.dc.nu=AT.bind(null,e.eventManager),e.dc.Pc=MT.bind(null,e.eventManager),e}function J0(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QA.bind(null,e),e}class Pf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=Cf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return g0(this.persistence,new iD,e.initialUser,this.serializer)}createPersistence(e){return new h0(yd.zs,this.serializer)}createSharedClientState(e){return new qc}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Jy extends Pf{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield J0(r.Vc.syncEngine),yield Dd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return g0(this.persistence,new iD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ZE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new FC(t,this.persistence);return new g_(e.asyncQueue,r)}createPersistence(e){const t=My(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new p0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hD(),Dr(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new qc}}class $D extends Jy{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof hg&&(r.sharedClientState.syncEngine={jr:LT.bind(null,o),zr:BD.bind(null,o),Wr:yg.bind(null,o),$i:VD.bind(null,o),Qr:kT.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ve.Z)(function*(d){yield function FT(n,e){return Z0.apply(this,arguments)}(r.Vc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=hD();if(!hg.D(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=My(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Md{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>NT(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=PT.bind(null,r.syncEngine),yield $y(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ST}createDatastore(e){const t=Cf(e.databaseInfo.databaseId),r=new dD(e.databaseInfo);return new gD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>NT(this.syncEngine,g,0),d=cD.D()?new cD:new C0,new IT(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,w,C){const M=new MD(r,o,u,d,g,w);return C&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=tt(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield wd(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HD(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class XA{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new qr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new xT(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,d){const g=tt(u),w=gf(g.serializer)+"/documents",C={documents:d.map(te=>pf(g.serializer,te))},M=yield g.vo("BatchGetDocuments",w,C,d.length),N=new Map;M.forEach(te=>{const Ce=function NE(n,e){return"found"in e?function(t,r){pt(!!r.found);const o=qo(t,r.found.name),u=sr(r.found.updateTime),d=r.found.createTime?sr(r.found.createTime):vt.min(),g=new Ni({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(o,u,d,g)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const o=qo(t,r.missing),u=sr(r.readTime);return jn.newNoDocument(o,u)}(n,e):st()}(g.serializer,te);N.set(Ce.key.toString(),Ce)});const $=[];return d.forEach(te=>{const Ce=N.get(te.toString());pt(!!Ce),$.push(Ce)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new df(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ye.fromPath(o);e.mutations.push(new B_(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const d=tt(o),g=gf(d.serializer)+"/documents",w={writes:u.map(C=>tg(d.serializer,C))};yield d.Io("Commit",g,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class eM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new T0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new JA(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!Xh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!IE(t)}return!1}}class tM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=si.UNAUTHENTICATED,this.clientId=$w.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Cd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function vg(n,e){return kf.apply(this,arguments)}function kf(){return kf=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield Ry(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),kf.apply(this,arguments)}function eI(n,e){return tI.apply(this,arguments)}function tI(){return tI=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xd(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>k0(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>k0(e.remoteStore,u)),n._onlineComponents=e}),tI.apply(this,arguments)}function nI(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function xd(n){return rI.apply(this,arguments)}function rI(){return rI=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!nI(t))throw t;Bo("Error using user provided cache. Falling back to memory cache: "+t),yield vg(n,new Pf)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield vg(n,new Pf);return n._offlineComponents}),rI.apply(this,arguments)}function tv(n){return iI.apply(this,arguments)}function iI(){return iI=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield eI(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield eI(n,new Md))),n._onlineComponents}),iI.apply(this,arguments)}function zD(n){return xd(n).then(e=>e.persistence)}function sI(n){return xd(n).then(e=>e.localStore)}function GD(n){return tv(n).then(e=>e.remoteStore)}function nv(n){return tv(n).then(e=>e.syncEngine)}function Lf(n){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,ve.Z)(function*(n){const e=yield tv(n),t=e.eventManager;return t.onListen=xD.bind(null,e.syncEngine),t.onUnlisten=RD.bind(null,e.syncEngine),t}),Rd.apply(this,arguments)}function oI(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,g,w){const C=new ev({next:N=>{u.enqueueAndForget(()=>U0(o,M));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&g&&"server"===g.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new j0(ld(d.path),C,{includeMetadataChanges:!0,Ku:!0});return L0(o,M)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}function aI(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,g,w){const C=new ev({next:N=>{u.enqueueAndForget(()=>U0(o,M)),N.fromCache&&"server"===g.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new j0(d,C,{includeMetadataChanges:!0,Ku:!0});return L0(o,M)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}function cI(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ZD=new Map;function lI(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YD(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rv(n){if(!Ye.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QD(n){if(Ye.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _g(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_g(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XD(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class JD{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=cI(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NC;switch(t.type){case"firstParty":return new PC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ZD.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),ZD.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class _i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _i(this.firestore,e,this._query)}}class Ua extends _i{constructor(e,t,r){super(e,t,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Ye(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function dI(n,e,...t){if(n=(0,Zt.m9)(n),lI("collection","path",e),n instanceof Ig){const r=on.fromString(e,...t);return QD(r),new Ua(n,null,r)}{if(!(n instanceof Kn||n instanceof Ua))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return QD(r),new Ua(n.firestore,null,r)}}function iv(n,e,...t){if(n=(0,Zt.m9)(n),1===arguments.length&&(e=$w.A()),lI("doc","path",e),n instanceof Ig){const r=on.fromString(e,...t);return rv(r),new Kn(n,null,new Ye(r))}{if(!(n instanceof Kn||n instanceof Ua))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return rv(r),new Kn(n.firestore,n instanceof Ua?n.converter:null,new Ye(r))}}function nb(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),(n instanceof Kn||n instanceof Ua)&&(e instanceof Kn||e instanceof Ua)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sv(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),n instanceof _i&&e instanceof _i&&n.firestore===e.firestore&&Kp(n._query,e._query)&&n.converter===e.converter}class zT{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new T0(this,"async_queue_retry"),this.Xc=()=>{const t=Dr();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Dr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Dr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new qr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Tc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=zy.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function hI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class GT{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pn extends Ig{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new zT,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ib(this),this._firestoreClient.terminate()}}function cr(n){return n._firestoreClient||ib(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ib(n){var e,t,r;const o=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KA(n._databaseId,g,n._persistenceKey,(C=o).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,cI(C.experimentalLongPollingOptions),C.useFetchStreams));var g,C;n._firestoreClient=new tM(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function sb(n,e,t){const r=new qr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield vg(n,t),yield eI(n,e),r.resolve()}catch(o){const u=o;if(!nI(u))throw u;Bo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function ab(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(Wr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Va(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ba{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qc{constructor(e){this._methodName=e}}class wg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const lb=/^__.*__$/;class db{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms):new lf(e,this.data,t,this.fieldTransforms)}}class hb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class ov{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ov(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Jc(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(fb(this.ca)&&lb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class QT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cf(e)}ya(e,t,r,o=!1){return new ov({ca:e,methodName:t,ga:r,path:Pr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xc(n){const e=n._freezeSettings(),t=Cf(n._databaseId);return new QT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mI(n,e,t,r,o,u={}){const d=n.ya(u.merge||u.mergeFields?2:0,e,t,o);_I("Data must be an object, but it was:",d,r);const g=mb(r,d);let w,C;if(u.merge)w=new as(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const M=[];for(const N of u.mergeFields){const $=Eg(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);II(M,$)||M.push($)}w=new as(M),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new db(new Ni(g),w,C)}class Uf extends Qc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function pb(n,e,t){return new ov({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yI extends Qc{_toFieldTransform(e){return new cf(e.path,new Pc)}isEqual(e){return e instanceof yI}}class nM extends Qc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=pb(this,e,!0),r=this.pa.map(u=>Od(u,t)),o=new Nu(r);return new cf(e.path,o)}isEqual(e){return this===e}}class XT extends Qc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=pb(this,e,!0),r=this.pa.map(u=>Od(u,t)),o=new kc(r);return new cf(e.path,o)}isEqual(e){return this===e}}class JT extends Qc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new uf(e.serializer,Yp(e.serializer,this.Ia));return new cf(e.path,t)}isEqual(e){return this===e}}function vI(n,e,t,r){const o=n.ya(1,e,t);_I("Data must be an object, but it was:",o,r);const u=[],d=Ni.empty();Tu(r,(w,C)=>{const M=uv(e,w,t);C=(0,Zt.m9)(C);const N=o.da(M);if(C instanceof Uf)u.push(M);else{const $=Od(C,N);null!=$&&(u.push(M),d.set(M,$))}});const g=new as(u);return new hb(d,g,o.fieldTransforms)}function av(n,e,t,r,o,u){const d=n.ya(1,e,t),g=[Eg(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(Eg(e,u[$])),w.push(u[$+1]);const C=[],M=Ni.empty();for(let $=g.length-1;$>=0;--$)if(!II(C,g[$])){const te=g[$];let Ce=w[$];Ce=(0,Zt.m9)(Ce);const Ve=d.da(te);if(Ce instanceof Uf)C.push(te);else{const He=Od(Ce,Ve);null!=He&&(C.push(te),M.set(te,He))}}const N=new as(C);return new hb(M,N,d.fieldTransforms)}function gb(n,e,t,r=!1){return Od(t,n.ya(r?4:3,e))}function Od(n,e){if(yb(n=(0,Zt.m9)(n)))return _I("Unsupported field value:",e,n),mb(n,e);if(n instanceof Qc)return function(t,r){if(!fb(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Od(d,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yp(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=rr.fromDate(t);return{timestampValue:Ou(r.serializer,o)}}if(t instanceof rr){const o=new rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ou(r.serializer,o)}}if(t instanceof wg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Va)return{bytesValue:ff(r.serializer,t._byteString)};if(t instanceof Kn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:AE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${_g(t)}`)}(n,e)}function mb(n,e){const t={};return Qw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,o)=>{const u=Od(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function yb(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof wg||n instanceof Va||n instanceof Kn||n instanceof Qc)}function _I(n,e,t){if(!yb(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_g(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Eg(n,e,t){if((e=(0,Zt.m9)(e))instanceof Ba)return e._internalPath;if("string"==typeof e)return uv(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const eS=new RegExp("[~\\*/\\[\\]]");function uv(n,e,t){if(e.search(eS)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ba(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,g+n+w)}function II(n,e){return n.some(t=>t.isEqual(e))}class Vf{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vb extends Vf{data(){return super.data()}}function Dg(n,e){return"string"==typeof e?uv(n,e):e instanceof Ba?e._internalPath:e._delegate._internalPath}function wI(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EI{}class bg extends EI{}function Pd(n,e,...t){let r=[];e instanceof EI&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof Bf).length,d=o.filter(g=>g instanceof cv).length;if(u>1||u>0&&d>0)throw new xe(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class cv extends bg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cv(e,t,r)}_apply(e){const t=this._parse(e);return Ib(e._query,t),new _i(e.firestore,e.converter,O_(e._query,t))}_parse(e){const t=Xc(e.firestore);return function(o,u,d,g,w,C,M){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){TI(M,C);const $=[];for(const te of M)$.push(Tg(g,o,te));N={arrayValue:{values:$}}}else N=Tg(g,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||TI(M,C),N=gb(d,"where",M,"in"===C||"not-in"===C);return tn.create(w,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Bf extends EI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const g of d)Ib(u,g),u=O_(u,g)}(e._query,t),new _i(e.firestore,e.converter,O_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class DI extends bg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new DI(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Mc(o,u);return function(g,w){if(null===Wp(g)){const C=Rc(g);null!==C&&SI(0,C,w.field)}}(r,d),d}(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new xu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lv extends bg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lv(e,t,r)}_apply(e){return new _i(e.firestore,e.converter,ny(e._query,this._limit,this._limitType))}}class CI extends bg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new CI(e,t,r)}_apply(e){const t=_b(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(o=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class el extends bg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new el(e,t,r)}_apply(e){const t=_b(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(o=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function _b(n,e,t,r){if(t[0]=(0,Zt.m9)(t[0]),t[0]instanceof Vf)return function(o,u,d,g,w){if(!g)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const M of Nc(o))if(M.field.isKeyField())C.push(Ac(u,g.key));else{const N=g.data.field(M.field);if(Vp(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=M.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new ai(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Xc(n.firestore);return function(u,d,g,w,C,M){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let te=0;te<C.length;te++){const Ce=C[te];if(N[te].field.isKeyField()){if("string"!=typeof Ce)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Ce}`);if(!sf(u)&&-1!==Ce.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Ce}' contains a slash.`);const Ve=u.path.child(on.fromString(Ce));if(!Ye.isDocumentKey(Ve))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const He=new Ye(Ve);$.push(Ac(d,He))}else{const Ve=gb(g,w,Ce);$.push(Ve)}}return new ai($,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Tg(n,e,t){if("string"==typeof(t=(0,Zt.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sf(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!Ye.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(n,new Ye(r))}if(t instanceof Kn)return Ac(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(t)}.`)}function TI(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ib(n,e){if(e.isInequality()){const r=Rc(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Wp(n);null!==u&&SI(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function SI(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class AI{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Tu(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new wg(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tf(e));default:return null}}convertTimestamp(e){const t=Na(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);pt(UE(r));const o=new Sc(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return o.isEqual(t)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function dv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wb extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class kd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ja extends Vf{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jf extends ja{data(e={}){return super.data(e)}}class $a{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new kd(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jf(this._firestore,this._userDataWriter,r.key,r,new kd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new jf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new jf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:Db(d.type),doc:g,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Db(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function bb(n,e){return n instanceof ja&&e instanceof ja?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $a&&e instanceof $a&&n._firestore===e._firestore&&sv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bu extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function hv(n,e,t){n=nn(n,Kn);const r=nn(n.firestore,Pn),o=dv(n.converter,e,t);return Ld(r,[mI(Xc(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ir.none())])}function fv(n,e,t,...r){n=nn(n,Kn);const o=nn(n.firestore,Pn),u=Xc(o);let d;return d="string"==typeof(e=(0,Zt.m9)(e))||e instanceof Ba?av(u,"updateDoc",n._key,e,t,r):vI(u,"updateDoc",n._key,e),Ld(o,[d.toMutation(n._key,ir.exists(!0))])}function Sb(n,...e){var t,r,o;n=(0,Zt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||hI(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(hI(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,M;if(n instanceof Kn)C=nn(n.firestore,Pn),M=ld(n._key.path),w={next:N=>{e[d]&&e[d](Ag(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=nn(n,_i);C=nn(N.firestore,Pn),M=N._query;const $=new Bu(C);w={next:te=>{e[d]&&e[d](new $a(C,$,N,te))},error:e[d+1],complete:e[d+2]},wI(n._query)}return function(N,$,te,Ce){const Ve=new ev(Ce),He=new j0($,Ve,te);return N.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return L0(yield Lf(N),He)})),()=>{Ve.Dc(),N.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return U0(yield Lf(N),He)}))}}(cr(C),M,g,w)}function Ld(n,e){return function(t,r){const o=new qr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Td(n,e,t){return z0.apply(this,arguments)}(yield nv(t),r,o)})),o.promise}(cr(n),e)}function Ag(n,e,t){const r=t.docs.get(e._key),o=new Bu(n);return new ja(n,o,e._key,r,new kd(t.hasPendingWrites,t.fromCache),e.converter)}const hM={maxAttempts:5};class yS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xc(e)}set(e,t,r){this._verifyNotCommitted();const o=ju(e,this._firestore),u=dv(o.converter,t,r),d=mI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,ir.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ju(e,this._firestore);let d;return d="string"==typeof(t=(0,Zt.m9)(t))||t instanceof Ba?av(this._dataReader,"WriteBatch.update",u._key,t,r,o):vI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ju(e,this._firestore);return this._mutations=this._mutations.concat(new df(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ju(n,e){if((n=(0,Zt.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class NI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xc(e)}get(e){const t=ju(e,this._firestore),r=new wb(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new Vf(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Vf(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=ju(e,this._firestore),u=dv(o.converter,t,r),d=mI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=ju(e,this._firestore);let d;return d="string"==typeof(t=(0,Zt.m9)(t))||t instanceof Ba?av(this._dataReader,"Transaction.update",u._key,t,r,o):vI(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=ju(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ju(e,this._firestore),r=new Bu(this._firestore);return super.get(e).then(o=>new ja(this._firestore,r,t._key,o._document,new kd(!1,!1),t.converter))}}function xg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PI(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Nb(){if(!function w_(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dc=xo.SDK_VERSION,(0,xo._registerComponent)(new Ws.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Pn(new jw(t.getProvider("auth-internal")),new kC(t.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(g.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,xo.registerVersion)(Fw,"3.13.0",n),(0,xo.registerVersion)(Fw,"3.13.0","esm2017")}();class tl{constructor(e){this._delegate=e}static fromBase64String(e){return Nb(),new tl(Va.fromBase64String(e))}static fromUint8Array(e){return PI(),new tl(Va.fromUint8Array(e))}toBase64(){return Nb(),this._delegate.toBase64()}toUint8Array(){return PI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rg(n){return function yM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ob{enableIndexedDbPersistence(e,t){return function KT(n,e){ab(n=nn(n,Pn));const t=cr(n);if(t._uninitializedComponentsProvider)throw new xe(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Md;return sb(t,o,new Jy(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fI(n){ab(n=nn(n,Pn));const e=cr(n);if(e._uninitializedComponentsProvider)throw new xe(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Md;return sb(e,r,new $D(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZT(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!jo.D())return Promise.resolve();const o=r+"main";yield jo.delete(o)}),function(r){return t.apply(this,arguments)})(My(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Pb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function eb(n,e,t,r={}){var o;const u=(n=nn(n,Ig))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==d&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),r.mockUserToken){let g,w;if("string"==typeof r.mockUserToken)g=r.mockUserToken,w=si.MOCK_USER;else{g=(0,Zt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new si(C)}n._authCredentials=new OC(new Bw(g,w))}}(this._delegate,e,t,r)}enableNetwork(){return function ob(n){return function VT(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zD(n),t=yield GD(n);return e.setNetworkEnabled(!0),function(r){const o=tt(r);return o.vu.delete(0),Tf(o)}(t)}))}(cr(n=nn(n,Pn)))}(this._delegate)}disableNetwork(){return function YT(n){return function WD(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zD(n),t=yield GD(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=tt(o);u.vu.add(0),yield wd(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(cr(n=nn(n,Pn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Nd(n){return function(e){const t=new qr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function OT(n,e){return q0.apply(this,arguments)}(yield nv(e),t)})),t.promise}(cr(n=nn(n,Pn)))}(this._delegate)}onSnapshotsInSync(e){return function lS(n,e){return function $T(n,e){const t=new ev(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Lf(n),o=t,tt(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Lf(n),o=t,void tt(r).ku.delete(o);var r,o}))}}(cr(n=nn(n,Pn)),hI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fd(this,dI(this._delegate,e))}catch(t){throw Wi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zo(this,iv(this._delegate,e))}catch(t){throw Wi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Li(this,function tb(n,e){if(n=nn(n,Ig),lI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _i(n,null,(t=e,new xu(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Wi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fM(n,e,t){n=nn(n,Pn);const r=Object.assign(Object.assign({},hM),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const g=new qr;return o.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const w=yield function qD(n){return tv(n).then(e=>e.datastore)}(o);new eM(o.asyncQueue,w,d,u,g).run()})),g.promise}(cr(n),o=>e(new NI(n,o)),r)}(this._delegate,t=>e(new kb(this,t)))}batch(){return cr(this._delegate),new kI(new yS(this._delegate,e=>Ld(this._delegate,e)))}loadBundle(e){return function pI(n,e){const t=cr(n=nn(n,Pn)),r=new GT;return function uI(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?EE().encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return HD(w,C);if(w instanceof ArrayBuffer)return HD(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new XA(w,d);var w}(t,Cf(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function UT(n,e,t){const r=tt(n);var o;(o=(0,ve.Z)(function*(u,d,g){try{const w=yield d.getMetadata();if(yield function($,te){const Ce=tt($),Ve=sr(te.createTime);return Ce.persistence.runTransaction("hasNewerBundle","readonly",He=>Ce.qs.getBundleMetadata(He,te.id)).then(He=>!!He&&He.createTime.compareTo(Ve)>=0)}(u.localStore,w))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(CD(w));const C=new RT(w,u.localStore,d.serializer);let M=yield d.bc();for(;M;){const $=yield C.zu(M);$&&g._updateProgress($),M=yield d.bc()}const N=yield C.complete();return yield Fa(u,N.Ju,void 0),yield function($,te){const Ce=tt($);return Ce.persistence.runTransaction("Save bundle","readwrite",Ve=>Ce.qs.saveBundleMetadata(Ve,te))}(u.localStore,w),g._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return Bo("SyncEngine",`Loading bundle failed with ${w}`),g._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield nv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gI(n,e){return function HT(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=tt(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield sI(n),e)}))}(cr(n=nn(n,Pn)),e).then(t=>t?new _i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Li(this,t):null)}}class Ng extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new tl(new Va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zo.forKey(t,this.firestore,null)}}class kb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}get(e){const t=nl(e);return this._delegate.get(t).then(r=>new Og(this._firestore,new ja(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=nl(e);return r?(xg("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=nl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=nl(e);return this._delegate.delete(t),this}}class kI{constructor(e){this._delegate=e}set(e,t,r){const o=nl(e);return r?(xg("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=nl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=nl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $u{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$u.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new $u(e,new Ng(e),t),o.set(t,u)),u}}$u.INSTANCES=new WeakMap;class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zo(t,new Kn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Zo(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fd(this.firestore,dI(this._delegate,e))}catch(t){throw Wi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Zt.m9)(e))instanceof Kn&&nb(this._delegate,e)}set(e,t){t=xg("DocumentReference.set",t);try{return t?hv(this._delegate,e,t):hv(this._delegate,e)}catch(r){throw Wi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fv(this._delegate,e):fv(this._delegate,e,t,...r)}catch(o){throw Wi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function uS(n){return Ld(nn(n.firestore,Pn),[new df(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=ES(e),r=Lb(e,o=>new Og(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Sb(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function oS(n){n=nn(n,Kn);const e=nn(n.firestore,Pn),t=cr(e),r=new Bu(e);return function BT(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const g=yield function(w,C){const M=tt(w);return M.persistence.runTransaction("read document","readonly",N=>M.localDocuments.getDocument(N,C))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=Cd(g,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield sI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ja(e,r,n._key,o,new kd(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function aS(n){n=nn(n,Kn);const e=nn(n.firestore,Pn);return oI(cr(e),n._key,{source:"server"}).then(t=>Ag(e,n,t))}(this._delegate):function Cb(n){n=nn(n,Kn);const e=nn(n.firestore,Pn);return oI(cr(e),n._key).then(t=>Ag(e,n,t))}(this._delegate),t.then(r=>new Og(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}function Wi(n,e,t){return n.message=n.message.replace(e,t),n}function ES(n){for(const e of n)if("object"==typeof e&&!Rg(e))return e;return{}}function Lb(n,e){var t,r;let o;return o=Rg(n[0])?n[0]:Rg(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Og{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bb(this._delegate,e._delegate)}}class Pg extends Og{data(e){const t=this._delegate.data(e);return function l_(n,e){n||st()}(void 0!==t),t}}class Li{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ng(e)}where(e,t,r){try{return new Li(this.firestore,Pd(this._delegate,function tS(n,e,t){const r=e,o=Dg("where",n);return cv._create(o,r,t)}(e,t,r)))}catch(o){throw Wi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Li(this.firestore,Pd(this._delegate,function Cg(n,e="asc"){const t=e,r=Dg("orderBy",n);return DI._create(r,t)}(e,t)))}catch(r){throw Wi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Li(this.firestore,Pd(this._delegate,function bI(n){return XD("limit",n),lv._create("limit",n,"F")}(e)))}catch(t){throw Wi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Li(this.firestore,Pd(this._delegate,function nS(n){return XD("limitToLast",n),lv._create("limitToLast",n,"L")}(e)))}catch(t){throw Wi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Li(this.firestore,Pd(this._delegate,function rS(...n){return CI._create("startAt",n,!0)}(...e)))}catch(t){throw Wi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Li(this.firestore,Pd(this._delegate,function sM(...n){return CI._create("startAfter",n,!1)}(...e)))}catch(t){throw Wi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Li(this.firestore,Pd(this._delegate,function iS(...n){return el._create("endBefore",n,!1)}(...e)))}catch(t){throw Wi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Li(this.firestore,Pd(this._delegate,function sS(...n){return el._create("endAt",n,!0)}(...e)))}catch(t){throw Wi(t,"endAt()","Query.endAt()")}}isEqual(e){return sv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function RI(n){n=nn(n,_i);const e=nn(n.firestore,Pn),t=cr(e),r=new Bu(e);return function jT(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const g=yield Oy(o,u,!0),w=new H0(u,g.ir),C=w.sc(g.documents),M=w.applyChanges(C,!1);d.resolve(M.snapshot)}catch(g){const w=Cd(g,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield sI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new $a(e,r,n,o))}(this._delegate):"server"===e?.source?function Tb(n){n=nn(n,_i);const e=nn(n.firestore,Pn),t=cr(e),r=new Bu(e);return aI(t,n._query,{source:"server"}).then(o=>new $a(e,r,n,o))}(this._delegate):function xI(n){n=nn(n,_i);const e=nn(n.firestore,Pn),t=cr(e),r=new Bu(e);return wI(n._query),aI(t,n._query).then(o=>new $a(e,r,n,o))}(this._delegate),t.then(r=>new LI(this.firestore,new $a(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ES(e),r=Lb(e,o=>new LI(this.firestore,new $a(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Sb(this._delegate,t,r)}withConverter(e){return new Li(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}class Fb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Li(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Fb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pg(this._firestore,r))})}isEqual(e){return bb(this._delegate,e._delegate)}}class Fd extends Li{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zo(this.firestore,e):null}doc(e){try{return new Zo(this.firestore,void 0===e?iv(this._delegate):iv(this._delegate,e))}catch(t){throw Wi(t,"doc()","CollectionReference.doc()")}}add(e){return function cS(n,e){const t=nn(n.firestore,Pn),r=iv(n),o=dv(n.converter,e);return Ld(t,[mI(Xc(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Zo(this.firestore,t))}isEqual(e){return nb(this._delegate,e._delegate)}withConverter(e){return new Fd(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}function nl(n){return nn(n,Kn)}class FI{constructor(...e){this._delegate=new Ba(...e)}static documentId(){return new FI(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,Zt.m9)(e))instanceof Ba&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ud{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gM(){return new yI("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ud(e)}static delete(){const e=function pM(){return new Uf("deleteField")}();return e._methodName="FieldValue.delete",new Ud(e)}static arrayUnion(...e){const t=function Mg(...n){return new nM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ud(t)}static arrayRemove(...e){const t=function vS(...n){return new XT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ud(t)}static increment(e){const t=function OI(n){return new JT("increment",n)}(e);return t._methodName="FieldValue.increment",new Ud(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ub={Firestore:Pb,GeoPoint:wg,Timestamp:rr,Blob:tl,Transaction:kb,WriteBatch:kI,DocumentReference:Zo,DocumentSnapshot:Og,Query:Li,QueryDocumentSnapshot:Pg,QuerySnapshot:LI,CollectionReference:Fd,FieldPath:FI,FieldValue:Ud,setLogLevel:function Hf(n){!function Uw(n){Mi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Vb(n){(function DS(n,e){n.INTERNAL.registerComponent(new Ws.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Ub)))})(n,(e,t)=>new Pb(e,t,new Ob)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(fa.Z);var Ha=O(8645),Bb=O(3019),kg=O(3093),Ii=O(4664),bS=O(4552);class vM extends Ha.x{constructor(e=1/0,t=1/0,r=bS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)g=w;g&&r.splice(0,g+1)}}}var jb=O(3020);function CS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,jb.B)({connector:()=>new vM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const UI=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vd=O(6232);function Lg(n){return n<=0?()=>Vd.E:(0,$t.e)((e,t)=>{let r=0;e.subscribe((0,vr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function VI(n){return(0,$t.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function TS(n=IM){return(0,$t.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function IM(){return new UI}var BI=O(2737);function Hu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):BI.y,Lg(1),t?VI(e):TS(()=>new UI))}var Bd=O(4674);function jI(n,e){return(0,Bd.m)(e)?(0,Ii.w)(()=>n,e):(0,Ii.w)(()=>n)}var $I=O(5137);O(4097);var zI=O(4303);const Ug=new Map,$b={activated:!1,tokenObservers:[]},MS={initialized:!1,enabled:!1};function br(n){return Ug.get(n)||Object.assign({},$b)}function yv(){return MS}const GI="https://content-firebaseappcheck.googleapis.com/v1",OS="exchangeDebugToken",qI={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class PS{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Zt.BH,yield function kS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const li=new Zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Fi(n){if(!br(n).activated)throw li.create("use-before-activation",{appName:n.name})}function _v(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,u)}catch(N){throw li.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==d.status)throw li.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(N){throw li.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=g.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const C=1e3*Number(w[1]),M=Date.now();return{token:g.token,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),Iv.apply(this,arguments)}function zu(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${GI}/projects/${t}/apps/${r}:${OS}?key=${o}`,body:{debug_token:e}}}const zb="firebase-app-check-database",YI=1,jd="firebase-app-check-store";let QI=null;function qb(){return qb=(0,ve.Z)(function*(n,e){const r=(yield function XI(){return QI||(QI=new Promise((n,e)=>{try{const t=indexedDB.open(zb,YI);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(li.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(jd,{keyPath:"compositeKey"})}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}}),QI)}()).transaction(jd,"readwrite"),u=r.objectStore(jd).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;g(li.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),qb.apply(this,arguments)}const wv=new Ks.Yd("@firebase/app-check");function Dv(n,e){return(0,Zt.hl)()?function US(n,e){return function JI(n,e){return qb.apply(this,arguments)}(function nw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{wv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Cv(){return yv().enabled}function rl(){return zf.apply(this,arguments)}function zf(){return zf=(0,ve.Z)(function*(){const n=yv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),zf.apply(this,arguments)}const Kb={error:"UNKNOWN_ERROR"};function $S(n){return Zt.US.encodeString(JSON.stringify(n),!1)}function Tv(n){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ve.Z)(function*(n,e=!1){const t=n.app;Fi(t);const r=br(t);let u,o=r.token;if(o&&!Gf(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(Gf(w)?o=w:yield Dv(t,void 0))}if(!e&&o&&Gf(o))return{token:o.token};let g,d=!1;if(Cv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_v(zu(t,yield rl()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield Dv(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield br(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?wv.warn(w.message):wv.error(w),u=w}return o?u?g=Gf(o)?{token:o.token,internalError:u}:Qb(u):(g={token:o.token},r.token=o,yield Dv(t,o)):g=Qb(u),d&&function aw(n,e){const t=br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),Zb.apply(this,arguments)}function sw(){return sw=(0,ve.Z)(function*(n){const e=n.app;Fi(e);const{provider:t}=br(e);if(Cv()){const r=yield rl(),{token:o}=yield _v(zu(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),sw.apply(this,arguments)}function Yb(n,e){const t=br(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HS(n){const{app:e}=n,t=br(e);let r=t.tokenRefresher;r||(r=function RM(n){const{app:e}=n;return new PS((0,ve.Z)(function*(){let r;if(r=br(e).token?yield Tv(n,!0):yield Tv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},qI.RETRIAL_MIN_WAIT,qI.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gf(n){return n.expireTimeMillis-Date.now()>0}function Qb(n){return{token:$S(Kb),error:n}}class zS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=br(this.app);for(const t of e)Yb(this.app,t.next);return Promise.resolve()}}const hw="app-check-internal";!function QS(){(0,zI.Xd)(new Ws.wA("app-check",n=>function NM(n,e){return new zS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hw).initialize()})),(0,zI.Xd)(new Ws.wA(hw,n=>function OM(n){return{getToken:e=>Tv(n,e),getLimitedUseToken:()=>function iw(n){return sw.apply(this,arguments)}(n),addTokenListener:e=>function ow(n,e,t,r){const{app:o}=n,u=br(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Gf(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),HS(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>HS(n))}(n,"INTERNAL",e),removeTokenListener:e=>Yb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zI.KN)("@firebase/app-check","0.8.0")}();class jg{constructor(){return(0,zn.vb)("app-check")}}typeof window<"u"&&window;var nC=O(120);const rC=new v.OlP("angularfire2.auth.use-emulator"),Pv=new v.OlP("angularfire2.auth.settings"),fw=new v.OlP("angularfire2.auth.tenant-id"),pw=new v.OlP("angularfire2.auth.langugage-code"),iC=new v.OlP("angularfire2.auth.use-device-language"),$g=new v.OlP("angularfire.auth.persistence"),sC=(n,e,t,r,o,u,d,g)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,M]of Object.entries(d))w.settings[C]=M;return g&&w.setPersistence(g),w},[t,r,o,u,d,g]);let oC=(()=>{class n{constructor(t,r,o,u,d,g,w,C,M,N,$,te){const Ce=new Ha.x,Ve=(0,yt.of)(void 0).pipe((0,kg.Q)(d.outsideAngular),(0,Ii.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8977)))),(0,Ut.U)(()=>(0,Nr.on)(t,u,r)),(0,Ut.U)(He=>sC(He,u,g,C,M,N,w,$)),CS({bufferSize:1,refCount:!1}));if(ms(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,yt.of)(null);else{Ve.pipe(Hu()).subscribe();const gt=Ve.pipe((0,Ii.w)(Ot=>Ot.getRedirectResult().then(zt=>zt,()=>null)),zn.iC,CS({bufferSize:1,refCount:!1})),Tt=Ve.pipe((0,Ii.w)(Ot=>new mi.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(dn=>zt.next(dn),dn=>zt.error(dn),()=>zt.complete()))})))),Dt=Ve.pipe((0,Ii.w)(Ot=>new mi.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(dn=>zt.next(dn),dn=>zt.error(dn),()=>zt.complete()))}))));this.authState=gt.pipe(jI(Tt),(0,$I.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.user=gt.pipe(jI(Dt),(0,$I.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular)),this.idToken=this.user.pipe((0,Ii.w)(Ot=>Ot?(0,Vn.D)(Ot.getIdToken()):(0,yt.of)(null))),this.idTokenResult=this.user.pipe((0,Ii.w)(Ot=>Ot?(0,Vn.D)(Ot.getIdTokenResult()):(0,yt.of)(null))),this.credential=(0,Bb.T)(gt,Ce,this.authState.pipe(er(Ot=>!Ot))).pipe((0,Ut.U)(Ot=>Ot?.user?Ot:null),(0,$I.R)(d.outsideAngular),(0,kg.Q)(d.insideAngular))}return(0,Nr.pX)(this,Ve,u,{spy:{apply:(He,gt,Tt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Tt.then(Dt=>Ce.next(Dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Nr.Dh),v.LFG(Nr.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(zn.HU),v.LFG(rC,8),v.LFG(Pv,8),v.LFG(fw,8),v.LFG(pw,8),v.LFG(iC,8),v.LFG($g,8),v.LFG(jg,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function iA(n,e){return function aC(n,e=yh.z){return new mi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function uC(n,e){return iA(n,e).pipe((0,Ut.U)(t=>({payload:t,type:"query"})))}function kv(n,e){return uC(n,e).pipe(es(void 0),ni(),(0,Ut.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const w=o.find(M=>M.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(M=>M.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function oA(n,e,t){return kv(n,t).pipe(qs((r,o)=>function KM(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function aA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gw(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gw(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gw(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,Mo.x)(),(0,Ut.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function gw(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function uA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ut.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(es(void 0),ni(),er(([r,o])=>o.length>0||!r),(0,Ut.U)(([r,o])=>o),zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uA(e);return oA(this.query,t,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return uC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zn.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(zn.iC)}add(e){return this.ref.add(e)}doc(e){return new lA(this.ref.doc(e),this.afs)}}class lA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=hA(r,t);return new cA(o,u,this.afs)}snapshotChanges(){return function sA(n,e){return iA(n,e).pipe(es(void 0),ni(),(0,Ut.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vn.D)(this.ref.get(e)).pipe(zn.iC)}}class ZM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kv(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),er(t=>t.length>0),zn.iC):kv(this.query,this.afs.schedulers.outsideAngular).pipe(zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uA(e);return oA(this.query,t,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return uC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),zn.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(zn.iC)}}const dA=new v.OlP("angularfire2.enableFirestorePersistence"),cC=new v.OlP("angularfire2.firestore.persistenceSettings"),YM=new v.OlP("angularfire2.firestore.settings"),QM=new v.OlP("angularfire2.firestore.use-emulator");function hA(n,e=(t=>t)){return{query:e(n),ref:n}}let fA=(()=>{class n{constructor(t,r,o,u,d,g,w,C,M,N,$,te,Ce,Ve,He,gt,Tt){this.schedulers=w;const Dt=(0,Nr.on)(t,g,r),Ot=M;N&&sC(Dt,g,$,Ce,Ve,He,te,gt),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${Dt.name}.firestore`,"AngularFirestore",Dt.name,()=>{const zt=g.runOutsideAngular(()=>Dt.firestore());if(u&&zt.settings(u),Ot&&zt.useEmulator(...Ot),o&&!ms(d)){const dn=()=>{try{return(0,Vn.D)(zt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ds){return typeof console<"u"&&console.warn(ds),(0,yt.of)(!1)}};return[zt,g.runOutsideAngular(dn)]}return[zt,(0,yt.of)(!1)]},[u,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=hA(o,r),g=this.schedulers.ngZone.run(()=>u);return new cA(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new ZM(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new lA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Nr.Dh),v.LFG(Nr.xv,8),v.LFG(dA,8),v.LFG(YM,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(zn.HU),v.LFG(cC,8),v.LFG(QM,8),v.LFG(oC,8),v.LFG(rC,8),v.LFG(Pv,8),v.LFG(fw,8),v.LFG(pw,8),v.LFG(iC,8),v.LFG($g,8),v.LFG(jg,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XM=(()=>{class n{constructor(){nC.Z.registerVersion("angularfire",zn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dA,useValue:!0},{provide:cC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[fA]}),n})();var za=O(5619);const{isArray:i}=Array,{getPrototypeOf:s,prototype:a,keys:c}=Object;const{isArray:m}=Array;var x=O(7103);function L(...n){const e=(0,Jn.yG)(n),t=(0,Jn.jO)(n),{args:r,keys:o}=function l(n){if(1===n.length){const e=n[0];if(i(e))return{args:e,keys:null};if(function f(n){return n&&"object"==typeof n&&s(n)===a}(e)){const t=c(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Vn.D)([],e);const u=new mi.y(function G(n,e,t=BI.y){return r=>{Q(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let w=0;w<o;w++)Q(e,()=>{const C=(0,Vn.D)(n[w],e);let M=!1;C.subscribe((0,vr.x)(r,N=>{u[w]=N,M||(M=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function S(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):BI.y));return t?u.pipe(function D(n){return(0,Ut.U)(e=>function I(n,e){return m(e)?n(...e):n(e)}(n,e))}(t)):u}function Q(n,e,t){n?(0,x.f)(t,n,e):e()}var _e=O(4829);function Ue(n){return new mi.y(e=>{(0,_e.Xf)(n()).subscribe(e)})}var et=O(8407);function ht(n,e){const t=(0,Bd.m)(n)?n:()=>n,r=o=>o.error(t());return new mi.y(e?o=>e.schedule(r,0,o):r)}var Re=O(7394);function xt(){return(0,$t.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ht extends mi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$t.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.w0.EMPTY)}return e}refCount(){return xt()(this)}}var Bt=O(1631);function di(n,e){return(0,Bd.m)(e)?(0,Bt.z)(n,e,1):(0,Bt.z)(n,1)}var or=O(9397);function uo(n){return(0,$t.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,vr.x)(t,void 0,void 0,d=>{u=(0,_e.Xf)(n(d,uo(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Hg(n){return n<=0?()=>Vd.E:(0,$t.e)((e,t)=>{let r=[];e.subscribe((0,vr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function yA(n){return(0,$t.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var aR=O(2420);const Wt="primary",mw=Symbol("RouteTitle");class cR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lv(n){return new cR(n)}function lR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function sl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!JM(n[o],e[o]))return!1;return!0}function JM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ex(n){return n.length>0?n[n.length-1]:null}function qf(n){return function pA(n){return!!n&&(n instanceof mi.y||(0,Bd.m)(n.lift)&&(0,Bd.m)(n.subscribe))}(n)?n:(0,v.QGY)(n)?(0,Vn.D)(Promise.resolve(n)):(0,yt.of)(n)}const hR={exact:function rx(n,e,t){if(!zg(n.segments,e.segments)||!lC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rx(n.children[r],e.children[r],t))return!1;return!0},subset:ix},tx={exact:function fR(n,e){return sl(n,e)},subset:function pR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JM(n[t],e[t]))},ignored:()=>!0};function nx(n,e,t){return hR[t.paths](n.root,e.root,t.matrixParams)&&tx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ix(n,e,t){return sx(n,e,e.segments,t)}function sx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!zg(o,t)||e.hasChildren()||!lC(o,t,r))}if(n.segments.length===t.length){if(!zg(n.segments,t)||!lC(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ix(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(zg(n.segments,o)&&lC(n.segments,o,r)&&n.children[Wt])&&sx(n.children[Wt],e,u,r)}}function lC(n,e,t){return e.every((r,o)=>tx[t](n[o].parameters,r.parameters))}class Fv{constructor(e=new kn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lv(this.queryParams)),this._queryParamMap}toString(){return yR.serialize(this)}}class kn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dC(this)}}class yw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lv(this.parameters)),this._parameterMap}toString(){return ux(this)}}function zg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return new vA},providedIn:"root"})}return n})();class vA{parse(e){const t=new AR(e);return new Fv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_w(e.root,!0)}`,r=function IR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${hC(t)}=${hC(o)}`).join("&"):`${hC(t)}=${hC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function vR(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const yR=new vA;function dC(n){return n.segments.map(e=>ux(e)).join("/")}function _w(n,e){if(!n.hasChildren())return dC(n);if(e){const t=n.children[Wt]?_w(n.children[Wt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==Wt&&r.push(`${o}:${_w(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mR(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Wt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Wt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===Wt?[_w(n.children[Wt],!1)]:[`${o}:${_w(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${dC(n)}/${t[0]}`:`${dC(n)}/(${t.join("//")})`}}function ox(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hC(n){return ox(n).replace(/%3B/gi,";")}function _A(n){return ox(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fC(n){return decodeURIComponent(n)}function ax(n){return fC(n.replace(/\+/g,"%20"))}function ux(n){return`${_A(n.path)}${function _R(n){return Object.keys(n).map(e=>`;${_A(e)}=${_A(n[e])}`).join("")}(n.parameters)}`}const wR=/^[^\/()?;#]+/;function IA(n){const e=n.match(wR);return e?e[0]:""}const ER=/^[^\/()?;=#]+/,bR=/^[^=?&#]+/,TR=/^[^&#]+/;class AR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new kn(e,t)),r}parseSegment(){const e=IA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(e),new yw(fC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function DR(n){const e=n.match(ER);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=IA(this.remaining);o&&(r=o,this.capture(r))}e[fC(t)]=fC(r)}parseQueryParam(e){const t=function CR(n){const e=n.match(bR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function SR(n){const e=n.match(TR);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=ax(t),u=ax(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=IA(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new v.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Wt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Wt]:new kn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new v.vHH(4011,!1)}}function cx(n){return n.segments.length>0?new kn([],{[Wt]:n}):n}function lx(n){const e={};for(const r of Object.keys(n.children)){const u=lx(n.children[r]);if(r===Wt&&0===u.segments.length&&u.hasChildren())for(const[d,g]of Object.entries(u.children))e[d]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function MR(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new kn(n.segments.concat(e.segments),e.children)}return n}(new kn(n.segments,e))}function Gg(n){return n instanceof Fv}function dx(n){let e;const o=cx(function t(u){const d={};for(const w of u.children){const C=t(w);d[w.outlet]=C}const g=new kn(u.url,d);return u===n&&(e=g),g}(n.root));return e??o}function hx(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return wA(o,o,o,t,r);const u=function RR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new px(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([w,C])=>{g[w]="string"==typeof C?C.split("/"):C}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new px(t,e,r)}(e);if(u.toRoot())return wA(o,o,new kn([],{}),t,r);const d=function NR(n,e,t){if(n.isAbsolute)return new gC(e,!0,0);if(!t)return new gC(e,!1,NaN);if(null===t.parent)return new gC(t,!0,0);const r=pC(n.commands[0])?0:1;return function OR(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new v.vHH(4005,!1);o=r.segments.length}return new gC(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),g=d.processChildren?ww(d.segmentGroup,d.index,u.commands):gx(d.segmentGroup,d.index,u.commands);return wA(o,d.segmentGroup,g,t,r)}function pC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Iw(n){return"object"==typeof n&&null!=n&&n.outlets}function wA(n,e,t,r,o){let d,u={};r&&Object.entries(r).forEach(([w,C])=>{u[w]=Array.isArray(C)?C.map(M=>`${M}`):`${C}`}),d=n===e?t:fx(n,e,t);const g=cx(lx(d));return new Fv(g,u,o)}function fx(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:fx(u,e,t)}),new kn(n.segments,r)}class px{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pC(r[0]))throw new v.vHH(4003,!1);const o=r.find(Iw);if(o&&o!==ex(r))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gx(n,e,t){if(n||(n=new kn([],{})),0===n.segments.length&&n.hasChildren())return ww(n,e,t);const r=function kR(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(Iw(g))break;const w=`${g}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!yx(w,C,d))return u;r+=2}else{if(!yx(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new kn(n.segments.slice(0,r.pathIndex),{});return u.children[Wt]=new kn(n.segments.slice(r.pathIndex),n.children),ww(u,0,o)}return r.match&&0===o.length?new kn(n.segments,{}):r.match&&!n.hasChildren()?EA(n,e,t):r.match?ww(n,0,o):EA(n,e,t)}function ww(n,e,t){if(0===t.length)return new kn(n.segments,{});{const r=function PR(n){return Iw(n[0])?n[0].outlets:{[Wt]:n}}(t),o={};if(Object.keys(r).some(u=>u!==Wt)&&n.children[Wt]&&1===n.numberOfChildren&&0===n.children[Wt].segments.length){const u=ww(n.children[Wt],e,t);return new kn(n.segments,u.children)}return Object.entries(r).forEach(([u,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(o[u]=gx(n.children[u],e,d))}),Object.entries(n.children).forEach(([u,d])=>{void 0===r[u]&&(o[u]=d)}),new kn(n.segments,o)}}function EA(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Iw(u)){const w=LR(u.outlets);return new kn(r,w)}if(0===o&&pC(t[0])){r.push(new yw(n.segments[e].path,mx(t[0]))),o++;continue}const d=Iw(u)?u.outlets[Wt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&pC(g)?(r.push(new yw(d,mx(g))),o+=2):(r.push(new yw(d,{})),o++)}return new kn(r,{})}function LR(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=EA(new kn([],{}),0,r))}),e}function mx(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yx(n,e,t){return n==t.path&&sl(e,t.parameters)}const Ew="imperative";class ol{constructor(e,t){this.id=e,this.url=t}}class mC extends ol{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wf extends ol{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dw extends ol{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uv extends ol{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class yC extends ol{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vx extends ol{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FR extends ol{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UR extends ol{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class VR extends ol{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BR extends ol{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jR{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $R{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HR{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zR{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GR{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qR{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _x{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class DA{}class bA{constructor(e){this.url=e}}class WR{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bw,this.attachRef=null}}let bw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new WR,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ix{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=TA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return TA(e,this._root).map(t=>t.value)}}function CA(n,e){if(n===e.value)return e;for(const t of e.children){const r=CA(n,t);if(r)return r}return null}function TA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=TA(n,t);if(r.length)return r.unshift(e),r}return[]}class $d{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wx extends Ix{constructor(e,t){super(e),this.snapshot=t,SA(this,e)}toString(){return this.snapshot.toString()}}function Ex(n,e){const t=function KR(n,e){const d=new vC([],{},{},"",{},Wt,e,null,{});return new bx("",new $d(d,[]))}(0,e),r=new za.X([new yw("",{})]),o=new za.X({}),u=new za.X({}),d=new za.X({}),g=new za.X(""),w=new Bv(r,o,d,g,u,Wt,e,t.root);return w.snapshot=t.root,new wx(new $d(w,[]),t)}class Bv{constructor(e,t,r,o,u,d,g,w){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=d,this.component=g,this._futureSnapshot=w,this.title=this.dataSubject?.pipe((0,Ut.U)(C=>C[mw]))??(0,yt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.U)(e=>Lv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.U)(e=>Lv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function ZR(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vC{get title(){return this.data?.[mw]}constructor(e,t,r,o,u,d,g,w,C){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=w,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bx extends Ix{constructor(e,t){super(t),this.url=e,SA(this,t)}toString(){return Cx(this._root)}}function SA(n,e){e.value._routerState=n,e.children.forEach(t=>SA(n,t))}function Cx(n){const e=n.children.length>0?` { ${n.children.map(Cx).join(", ")} } `:"";return`${n.value}${e}`}function AA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,sl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),sl(e.params,t.params)||n.paramsSubject.next(t.params),function dR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!sl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),sl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function MA(n,e){const t=sl(n.params,e.params)&&function gR(n,e){return zg(n,e)&&n.every((t,r)=>sl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MA(n.parent,e.parent))}let Tx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.parentContexts=(0,v.f3M)(bw),this.location=(0,v.f3M)(v.s_b),this.changeDetector=(0,v.f3M)(v.sBO),this.environmentInjector=(0,v.f3M)(v.lqb),this.inputBinder=(0,v.f3M)(_C,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v.vHH(4013,!1);this._activatedRoute=t;const o=this.location,d=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,w=new YR(t,g,o.injector);this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[v.TTD]})}return n})();class YR{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bv?this.route:e===bw?this.childContexts:this.parent.get(e,t)}}const _C=new v.OlP("");let Sx=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=L([r.queryParams,r.params,r.data]).pipe((0,Ii.w)(([u,d,g],w)=>(g={...u,...d,...g},0===w?(0,yt.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=(0,v.qFp)(r.component);if(d)for(const{templateName:g}of d.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();function Cw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function XR(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Cw(n,r,o);return Cw(n,r)})}(n,e,t);return new $d(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>Cw(n,g)),d}}const r=function JR(n){return new Bv(new za.X(n.url),new za.X(n.params),new za.X(n.queryParams),new za.X(n.fragment),new za.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Cw(n,u));return new $d(r,o)}}const xA="ngNavigationCancelingError";function Ax(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Mx(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Mx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function xx(n){return n&&n[xA]}let Rx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(r,o){1&r&&v._UZ(0,"router-outlet")},dependencies:[Tx],encapsulation:2})}return n})();function RA(n){const e=n.children&&n.children.map(RA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=Rx),t}function Gu(n){return n.outlet||Wt}function Tw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class aN{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Vv(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Vv(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Vv(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=Vv(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new qR(u.value.snapshot))}),e.children.length&&this.forwardEvent(new zR(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(AA(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),AA(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=Tw(o.snapshot);d.attachRef=null,d.route=o,d.injector=g,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Nx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class IC{constructor(e,t){this.component=e,this.route=t}}function uN(n,e,t){const r=n._root;return Sw(r,e?e._root:null,t,[r.value])}function jv(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,v.Z0I)(n)?e.get(n):n:r}function Sw(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Vv(e);return n.children.forEach(d=>{(function lN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function dN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zg(n.url,e.url)||!sl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MA(n,e)||!sl(n.queryParams,e.queryParams);default:return!MA(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Nx(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Sw(n,e,u.component?g?g.children:null:t,r,o),w&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new IC(g.outlet.component,d))}else d&&Aw(e,g,o),o.canActivateChecks.push(new Nx(r)),Sw(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Object.entries(u).forEach(([d,g])=>Aw(g,t.getContext(d),o)),o}function Aw(n,e,t){const r=Vv(n),o=n.value;Object.entries(r).forEach(([u,d])=>{Aw(d,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new IC(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Mw(n){return"function"==typeof n}function Ox(n){return n instanceof UI||"EmptyError"===n?.name}const wC=Symbol("INITIAL_VALUE");function $v(){return(0,Ii.w)(n=>L(n.map(e=>e.pipe(Lg(1),es(wC)))).pipe((0,Ut.U)(e=>{for(const t of e)if(!0!==t){if(t===wC)return wC;if(!1===t||t instanceof Fv)return t}return!0}),er(e=>e!==wC),Lg(1)))}function Px(n){return(0,et.z)((0,or.b)(e=>{if(Gg(e))throw Ax(0,e)}),(0,Ut.U)(e=>!0===e))}class EC{constructor(e){this.segmentGroup=e||null}}class kx{constructor(e){this.urlTree=e}}function Hv(n){return ht(new EC(n))}function Lx(n){return ht(new kx(n))}class RN{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new v.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,yt.of)(r);if(o.numberOfChildren>1||!o.children[Wt])return ht(new v.vHH(4e3,!1));o=o.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Fv(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[o]=t[g]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Object.entries(t.children).forEach(([g,w])=>{d[g]=this.createSegmentGroup(e,w,r,o)}),new kn(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new v.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const NA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NN(n,e,t,r,o){const u=OA(n,e,t);return u.matched?(r=function tN(n,e){return n.providers&&!n._injector&&(n._injector=(0,v.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function AN(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,yt.of)(!0);const u=o.map(d=>{const g=jv(d,n);return qf(function yN(n){return n&&Mw(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,yt.of)(u).pipe($v(),Px())}(r,e,t).pipe((0,Ut.U)(d=>!0===d?u:{...NA}))):(0,yt.of)(u)}function OA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...NA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||lR)(t,n,e);if(!o)return{...NA};const u={};Object.entries(o.posParams??{}).forEach(([g,w])=>{u[g]=w.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Fx(n,e,t,r){return t.length>0&&function kN(n,e,t){return t.some(r=>DC(n,e,r)&&Gu(r)!==Wt)}(n,t,r)?{segmentGroup:new kn(e,PN(r,new kn(t,n.children))),slicedSegments:[]}:0===t.length&&function LN(n,e,t){return t.some(r=>DC(n,e,r))}(n,t,r)?{segmentGroup:new kn(n.segments,ON(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new kn(n.segments,n.children),slicedSegments:t}}function ON(n,e,t,r,o){const u={};for(const d of r)if(DC(n,t,d)&&!o[Gu(d)]){const g=new kn([],{});u[Gu(d)]=g}return{...o,...u}}function PN(n,e){const t={};t[Wt]=e;for(const r of n)if(""===r.path&&Gu(r)!==Wt){const o=new kn([],{});t[Gu(r)]=o}return t}function DC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class BN{constructor(e,t,r,o,u,d,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=d,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new RN(this.urlSerializer,this.urlTree)}noMatchError(e){return new v.vHH(4002,!1)}recognize(){const e=Fx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe(uo(t=>{if(t instanceof kx)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof EC?this.noMatchError(t):t}),(0,Ut.U)(t=>{const r=new vC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,{}),o=new $d(r,t),u=new bx("",o),d=function xR(n,e,t=null,r=null){return hx(dx(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(d),this.inheritParamsAndData(u._root),{state:u,tree:d}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Wt).pipe(uo(r=>{throw r instanceof EC?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Dx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Vn.D)(o).pipe(di(u=>{const d=r.children[u],g=function sN(n,e){const t=n.filter(r=>Gu(r)===e);return t.push(...n.filter(r=>Gu(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,d,u)}),qs((u,d)=>(u.push(...d),u)),VI(null),function gA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):BI.y,Hg(1),t?VI(e):TS(()=>new UI))}(),(0,Bt.z)(u=>{if(null===u)return Hv(r);const d=Ux(u);return function jN(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(d),(0,yt.of)(d)}))}processSegment(e,t,r,o,u,d){return(0,Vn.D)(t).pipe(di(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,o,u,d).pipe(uo(w=>{if(w instanceof EC)return(0,yt.of)(null);throw w}))),Hu(g=>!!g),uo(g=>{if(Ox(g))return function UN(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,yt.of)([]):Hv(r);throw g}))}processSegmentAgainstRoute(e,t,r,o,u,d,g){return function FN(n,e,t,r){return!!(Gu(n)===r||r!==Wt&&DC(e,t,n))&&("**"===n.path||OA(e,n,t).matched)}(r,o,u,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,d,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,d):Hv(o):Hv(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Lx(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Bt.z)(d=>{const g=new kn(d,{});return this.processSegment(e,t,g,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:w,remainingSegments:C,positionalParamSegments:M}=OA(t,o,u);if(!g)return Hv(t);const N=this.applyRedirects.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?Lx(N):this.applyRedirects.lineralizeSegments(o,N).pipe((0,Bt.z)($=>this.processSegment(e,r,t,$.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,d){let g;if("**"===r.path){const w=o.length>0?ex(o).parameters:{},C=new vC(o,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vx(r),Gu(r),r.component??r._loadedComponent??null,r,Bx(r));g=(0,yt.of)({snapshot:C,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=NN(t,r,o,e).pipe((0,Ut.U)(({matched:w,consumedSegments:C,remainingSegments:M,parameters:N})=>w?{snapshot:new vC(C,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vx(r),Gu(r),r.component??r._loadedComponent??null,r,Bx(r)),consumedSegments:C,remainingSegments:M}:null));return g.pipe((0,Ii.w)(w=>null===w?Hv(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Ii.w)(({routes:C})=>{const M=r._loadedInjector??e,{snapshot:N,consumedSegments:$,remainingSegments:te}=w,{segmentGroup:Ce,slicedSegments:Ve}=Fx(t,$,te,C);if(0===Ve.length&&Ce.hasChildren())return this.processChildren(M,C,Ce).pipe((0,Ut.U)(gt=>null===gt?null:[new $d(N,gt)]));if(0===C.length&&0===Ve.length)return(0,yt.of)([new $d(N,[])]);const He=Gu(r)===u;return this.processSegment(M,C,Ce,Ve,He?Wt:u,!0).pipe((0,Ut.U)(gt=>[new $d(N,gt)]))}))))}getChildConfig(e,t,r){return t.children?(0,yt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,yt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function SN(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,yt.of)(!0);const u=o.map(d=>{const g=jv(d,n);return qf(function fN(n){return n&&Mw(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,yt.of)(u).pipe($v(),Px())}(e,t,r).pipe((0,Bt.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,or.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function xN(n){return ht(Mx(!1,3))}())):(0,yt.of)({routes:[],injector:e})}}function $N(n){const e=n.value.routeConfig;return e&&""===e.path}function Ux(n){const e=[],t=new Set;for(const r of n){if(!$N(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ux(r.children);e.push(new $d(r.value,o))}return e.filter(r=>!t.has(r))}function Vx(n){return n.data||{}}function Bx(n){return n.resolve||{}}function jx(n){return"string"==typeof n.title||null===n.title}function PA(n){return(0,Ii.w)(e=>{const t=n(e);return t?(0,Vn.D)(t).pipe((0,Ut.U)(()=>e)):(0,yt.of)(e)})}const zv=new v.OlP("ROUTES");let kA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,v.f3M)(v.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,yt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=qf(t.loadComponent()).pipe((0,Ut.U)($x),(0,or.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),yA(()=>{this.componentLoaders.delete(t)})),o=new Ht(r,()=>new Ha.x).pipe(xt());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,yt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function ZN(n,e,t,r){return qf(n.loadChildren()).pipe((0,Ut.U)($x),(0,Bt.z)(o=>o instanceof v.YKP||Array.isArray(o)?(0,yt.of)(o):(0,Vn.D)(e.compileModuleAsync(o))),(0,Ut.U)(o=>{r&&r(n);let u,d,g=!1;return Array.isArray(o)?(d=o,!0):(u=o.create(t).injector,d=u.get(zv,[],{optional:!0,self:!0}).flat()),{routes:d.map(RA),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(yA(()=>{this.childrenLoaders.delete(r)})),d=new Ht(u,()=>new Ha.x).pipe(xt());return this.childrenLoaders.set(r,d),d}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $x(n){return function YN(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let bC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ha.x,this.transitionAbortSubject=new Ha.x,this.configLoader=(0,v.f3M)(kA),this.environmentInjector=(0,v.f3M)(v.lqb),this.urlSerializer=(0,v.f3M)(vw),this.rootContexts=(0,v.f3M)(bw),this.inputBindingEnabled=null!==(0,v.f3M)(_C,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,yt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new $R(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new jR(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new za.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ew,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(er(u=>0!==u.id),(0,Ut.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,Ii.w)(u=>{this.currentTransition=u;let d=!1,g=!1;return(0,yt.of)(u).pipe((0,or.b)(w=>{this.currentNavigation={id:w.id,initialUrl:w.rawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ii.w)(w=>{const C=w.currentBrowserUrl.toString(),M=!t.navigated||w.extractedUrl.toString()!==C||C!==w.currentUrlTree.toString();if(!M&&"reload"!==(w.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const $="";return this.events.next(new Uv(w.id,this.urlSerializer.serialize(w.rawUrl),$,0)),w.resolve(null),Vd.E}if(t.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return(0,yt.of)(w).pipe((0,Ii.w)($=>{const te=this.transitions?.getValue();return this.events.next(new mC($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),te!==this.transitions?.getValue()?Vd.E:Promise.resolve($)}),function HN(n,e,t,r,o,u){return(0,Bt.z)(d=>function VN(n,e,t,r,o,u,d="emptyOnly"){return new BN(n,e,t,r,o,d,u).recognize()}(n,e,t,r,d.extractedUrl,o,u).pipe((0,Ut.U)(({state:g,tree:w})=>({...d,targetSnapshot:g,urlAfterRedirects:w}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,or.b)($=>{u.targetSnapshot=$.targetSnapshot,u.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:$.urlAfterRedirects};const te=new vx($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(te)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(w.currentRawUrl)){const{id:$,extractedUrl:te,source:Ce,restoredState:Ve,extras:He}=w,gt=new mC($,this.urlSerializer.serialize(te),Ce,Ve);this.events.next(gt);const Tt=Ex(0,this.rootComponentType).snapshot;return this.currentTransition=u={...w,targetSnapshot:Tt,urlAfterRedirects:te,extras:{...He,skipLocationChange:!1,replaceUrl:!1}},(0,yt.of)(u)}{const $="";return this.events.next(new Uv(w.id,this.urlSerializer.serialize(w.extractedUrl),$,1)),w.resolve(null),Vd.E}}),(0,or.b)(w=>{const C=new FR(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(C)}),(0,Ut.U)(w=>(this.currentTransition=u={...w,guards:uN(w.targetSnapshot,w.currentSnapshot,this.rootContexts)},u)),function _N(n,e){return(0,Bt.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?(0,yt.of)({...t,guardsResult:!0}):function IN(n,e,t,r){return(0,Vn.D)(n).pipe((0,Bt.z)(o=>function TN(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,yt.of)(!0);const d=u.map(g=>{const w=Tw(e)??o,C=jv(g,w);return qf(function mN(n){return n&&Mw(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(Hu())});return(0,yt.of)(d).pipe($v())}(o.component,o.route,t,e,r)),Hu(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Bt.z)(g=>g&&function hN(n){return"boolean"==typeof n}(g)?function wN(n,e,t,r){return(0,Vn.D)(e).pipe(di(o=>$i(function DN(n,e){return null!==n&&e&&e(new HR(n)),(0,yt.of)(!0)}(o.route.parent,r),function EN(n,e){return null!==n&&e&&e(new GR(n)),(0,yt.of)(!0)}(o.route,r),function CN(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function cN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ue(()=>{const g=d.guards.map(w=>{const C=Tw(d.node)??t,M=jv(w,C);return qf(function gN(n){return n&&Mw(n.canActivateChild)}(M)?M.canActivateChild(r,n):C.runInContext(()=>M(r,n))).pipe(Hu())});return(0,yt.of)(g).pipe($v())}));return(0,yt.of)(u).pipe($v())}(n,o.path,t),function bN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,yt.of)(!0);const o=r.map(u=>Ue(()=>{const d=Tw(e)??t,g=jv(u,d);return qf(function pN(n){return n&&Mw(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(Hu())}));return(0,yt.of)(o).pipe($v())}(n,o.route,t))),Hu(o=>!0!==o,!0))}(r,u,n,e):(0,yt.of)(g)),(0,Ut.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,w=>this.events.next(w)),(0,or.b)(w=>{if(u.guardsResult=w.guardsResult,Gg(w.guardsResult))throw Ax(0,w.guardsResult);const C=new UR(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.events.next(C)}),er(w=>!!w.guardsResult||(this.cancelNavigationTransition(w,"",3),!1)),PA(w=>{if(w.guards.canActivateChecks.length)return(0,yt.of)(w).pipe((0,or.b)(C=>{const M=new VR(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}),(0,Ii.w)(C=>{let M=!1;return(0,yt.of)(C).pipe(function zN(n,e){return(0,Bt.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,yt.of)(t);let u=0;return(0,Vn.D)(o).pipe(di(d=>function GN(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!jx(o)&&(u[mw]=o.title),function qN(n,e,t,r){const o=function WN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,yt.of)({});const u={};return(0,Vn.D)(o).pipe((0,Bt.z)(d=>function KN(n,e,t,r){const o=Tw(e)??r,u=jv(n,o);return qf(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Hu(),(0,or.b)(g=>{u[d]=g}))),Hg(1),function mA(n){return(0,Ut.U)(()=>n)}(u),uo(d=>Ox(d)?Vd.E:ht(d)))}(u,n,e,r).pipe((0,Ut.U)(d=>(n._resolvedData=d,n.data=Dx(n,t).resolve,o&&jx(o)&&(n.data[mw]=o.title),null)))}(d.route,r,n,e)),(0,or.b)(()=>u++),Hg(1),(0,Bt.z)(d=>u===o.length?(0,yt.of)(t):Vd.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,or.b)({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(C,"",2)}}))}),(0,or.b)(C=>{const M=new BR(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}))}),PA(w=>{const C=M=>{const N=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&N.push(this.configLoader.loadComponent(M.routeConfig).pipe((0,or.b)($=>{M.component=$}),(0,Ut.U)(()=>{})));for(const $ of M.children)N.push(...C($));return N};return L(C(w.targetSnapshot.root)).pipe(VI(),Lg(1))}),PA(()=>this.afterPreactivation()),(0,Ut.U)(w=>{const C=function QR(n,e,t){const r=Cw(n,e._root,t?t._root:void 0);return new wx(r,e)}(t.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return this.currentTransition=u={...w,targetRouterState:C},u}),(0,or.b)(()=>{this.events.next(new DA)}),((n,e,t,r)=>(0,Ut.U)(o=>(new aN(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,w=>this.events.next(w),this.inputBindingEnabled),Lg(1),(0,or.b)({next:w=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wf(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects))),t.titleStrategy?.updateTitle(w.targetRouterState.snapshot),w.resolve(!0)},complete:()=>{d=!0}}),function uR(n){return(0,$t.e)((e,t)=>{(0,_e.Xf)(n).subscribe((0,vr.x)(t,()=>t.complete(),aR.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,or.b)(w=>{throw w}))),yA(()=>{d||g||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),uo(w=>{if(g=!0,xx(w))this.events.next(new Dw(u.id,this.urlSerializer.serialize(u.extractedUrl),w.message,w.cancellationCode)),function eN(n){return xx(n)&&Gg(n.url)}(w)?this.events.next(new bA(w.url)):u.resolve(!1);else{this.events.next(new yC(u.id,this.urlSerializer.serialize(u.extractedUrl),w,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(w))}catch(C){u.reject(C)}}return Vd.E}))}))}cancelNavigationTransition(t,r,o){const u=new Dw(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hx(n){return n!==Ew}let zx=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[mw]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(QN)},providedIn:"root"})}return n})(),QN=(()=>{class n extends zx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(Ae))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(eO)},providedIn:"root"})}return n})();class JN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let eO=(()=>{class n extends JN{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=v.n5z(n)))(o||n)}}();static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const CC=new v.OlP("",{providedIn:"root",factory:()=>({})});let tO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(nO)},providedIn:"root"})}return n})(),nO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xw=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xw||{});function Gx(n,e){n.events.pipe(er(t=>t instanceof Wf||t instanceof Dw||t instanceof yC||t instanceof Uv),(0,Ut.U)(t=>t instanceof Wf||t instanceof Uv?xw.COMPLETE:t instanceof Dw&&(0===t.code||1===t.code)?xw.REDIRECTING:xw.FAILED),er(t=>t!==xw.REDIRECTING),Lg(1)).subscribe(()=>{e()})}function rO(n){throw n}function iO(n,e,t){return e.parse("/")}const sO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ga=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,v.f3M)(v.c2e),this.isNgZoneEnabled=!1,this._events=new Ha.x,this.options=(0,v.f3M)(CC,{optional:!0})||{},this.pendingTasks=(0,v.f3M)(v.HDt),this.errorHandler=this.options.errorHandler||rO,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iO,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,v.f3M)(tO),this.routeReuseStrategy=(0,v.f3M)(XN),this.titleStrategy=(0,v.f3M)(zx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,v.f3M)(zv,{optional:!0})?.flat()??[],this.navigationTransitions=(0,v.f3M)(bC),this.urlSerializer=(0,v.f3M)(vw),this.location=(0,v.f3M)(qe),this.componentInputBindingEnabled=!!(0,v.f3M)(_C,{optional:!0}),this.eventsSubscription=new Re.w0,this.isNgZoneEnabled=(0,v.f3M)(v.R0b)instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fv,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ex(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(qx(r)&&this._events.next(r));if(r instanceof mC)Hx(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Uv)this.rawUrlTree=o.rawUrl;else if(r instanceof vx){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof DA)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Dw)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof bA){const u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),d={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hx(o.source)};this.scheduleNavigation(u,Ew,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof yC&&this.restoreHistory(o,!0),r instanceof Wf&&(this.navigated=!0),qx(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ew,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},d=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(RA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:d;let N,M=null;switch(g){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}null!==M&&(M=this.removeEmptyProps(M));try{N=dx(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return hx(N,t,M,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Gg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,Ew,null,r)}navigate(t,r={skipLocationChange:!1}){return function aO(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new v.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...sO}:!1===r?{...oO}:r,Gg(t))return nx(this.currentUrlTree,t,o);const u=this.parseUrl(t);return nx(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let g,w,C;d?(g=d.resolve,w=d.reject,C=d.promise):C=new Promise((N,$)=>{g=N,w=$});const M=this.pendingTasks.add();return Gx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:g,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",d)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qx(n){return!(n instanceof DA||n instanceof bA)}class Wx{}let lO=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(er(t=>t instanceof Wf),di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,v.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,Vn.D)(o).pipe((0,Gs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,yt.of)(null);const u=o.pipe((0,Bt.z)(d=>null===d?(0,yt.of)(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,Vn.D)([u,d]).pipe((0,Gs.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(Ga),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(Wx),v.LFG(kA))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const FA=new v.OlP("");let Kx=(()=>{class n{constructor(t,r,o,u,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wf?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uv&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _x&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _x(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){v.$Z()};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac})}return n})();function Hd(n,e){return{\u0275kind:n,\u0275providers:e}}function Yx(){const n=(0,v.f3M)(v.zs3);return e=>{const t=n.get(v.z2F);if(e!==t.components[0])return;const r=n.get(Ga),o=n.get(Qx);1===n.get(UA)&&r.initialNavigation(),n.get(Xx,null,v.XFs.Optional)?.setUpPreloading(),n.get(FA,null,v.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Qx=new v.OlP("",{factory:()=>new Ha.x}),UA=new v.OlP("",{providedIn:"root",factory:()=>1}),Xx=new v.OlP("");function pO(n){return Hd(0,[{provide:Xx,useExisting:lO},{provide:Wx,useExisting:n}])}const Jx=new v.OlP("ROUTER_FORROOT_GUARD"),mO=[qe,{provide:vw,useClass:vA},Ga,bw,{provide:Bv,useFactory:function Zx(n){return n.routerState.root},deps:[Ga]},kA,[]];function yO(){return new v.PXZ("Router",Ga)}let eR=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[mO,[],{provide:zv,multi:!0,useValue:t},{provide:Jx,useFactory:wO,deps:[[Ga,new v.FiY,new v.tp0]]},{provide:CC,useValue:r||{}},r?.useHash?{provide:Le,useClass:Ne}:{provide:Le,useClass:Ke},{provide:FA,useFactory:()=>{const n=(0,v.f3M)(dr),e=(0,v.f3M)(v.R0b),t=(0,v.f3M)(CC),r=(0,v.f3M)(bC),o=(0,v.f3M)(vw);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Kx(o,r,n,e,t)}},r?.preloadingStrategy?pO(r.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:yO},r?.initialNavigation?EO(r):[],r?.bindToComponentInputs?Hd(8,[Sx,{provide:_C,useExisting:Sx}]).\u0275providers:[],[{provide:tR,useFactory:Yx},{provide:v.tb,multi:!0,useExisting:tR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zv,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(Jx,8))};static#t=this.\u0275mod=v.oAB({type:n});static#n=this.\u0275inj=v.cJS({})}return n})();function wO(n){return"guarded"}function EO(n){return["disabled"===n.initialNavigation?Hd(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const e=(0,v.f3M)(Ga);return()=>{e.setUpLocationChangeListener()}}},{provide:UA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Hd(2,[{provide:UA,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:e=>{const t=e.get(Me,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Ga),u=e.get(Qx);Gx(o,()=>{r(!0)}),e.get(bC).afterPreactivation=()=>(r(!0),u.closed?(0,yt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const tR=new v.OlP(""),bO=[];let CO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=v.oAB({type:n});static#n=this.\u0275inj=v.cJS({imports:[eR.forRoot(bO),eR]})}return n})(),TO=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateToDoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteToDo(t){this.firestoreCollection.doc(t).delete()}static#e=this.\u0275fac=function(r){return new(r||n)(v.LFG(fA))};static#t=this.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SO=function(n){return{completed:n}};function AO(n,e){if(1&n){const t=v.EpF();v.TgZ(0,"li",10)(1,"span",11)(2,"i",12),v.NdJ("click",function(){const u=v.CHM(t).$implicit,d=v.oxw();return v.KtG(d.onStatusChange(u.id,!u.isDone))}),v.qZA(),v.TgZ(3,"span",13),v._uU(4),v.qZA(),v.TgZ(5,"button",14),v.NdJ("click",function(){const u=v.CHM(t).$implicit,d=v.oxw();return v.KtG(d.deleteToDoItem(u.id))}),v._uU(6,"x"),v.qZA()()()}if(2&n){const t=e.$implicit;v.xp6(2),v.Q6J("ngClass",t.isDone?"fa-solid fa-check":"fa-regular fa-circle"),v.xp6(1),v.Q6J("ngClass",v.VKq(3,SO,t.completed)),v.xp6(1),v.Oqu(t.title)}}let MO=(()=>{class n{constructor(t){this.todoService=t,this.itemIndexInAnimation=-1,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((r,o)=>-o.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value="")}onStatusChange(t,r){this.todoService.updateToDoStatus(t,r);const o=this.todos.find(u=>u.id===t);o&&(o.completed=r)}deleteToDoItem(t){this.todoService.deleteToDo(t)}checkCompletion(t){this.todos[t].completed=!this.todos[t].completed}static#e=this.\u0275fac=function(r){return new(r||n)(v.Y36(TO))};static#t=this.\u0275cmp=v.Xpm({type:n,selectors:[["app-todo"]],decls:12,vars:1,consts:[[1,"card","mt-5"],[1,"card-header","text-center"],[1,"display-6","fw-bold"],[1,"card-body"],[1,"input-group","mb-3"],["type","text","placeholder","Title",1,"form-control"],["titleInput",""],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"container-flex","py-1"],[1,"text-success",3,"ngClass","click"],[3,"ngClass"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click"]],template:function(r,o){if(1&r){const u=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),v._uU(3,"To Do List"),v.qZA()(),v.TgZ(4,"div",3)(5,"div",4),v._UZ(6,"input",5,6),v.TgZ(8,"button",7),v.NdJ("click",function(){v.CHM(u);const g=v.MAs(7);return v.KtG(o.onClick(g))}),v._uU(9,"+"),v.qZA()(),v.TgZ(10,"ul",8),v.YNc(11,AO,7,5,"li",9),v.qZA()()()}2&r&&(v.xp6(11),v.Q6J("ngForOf",o.todos))},dependencies:[lo,Wa],styles:['@import"https://fonts.googleapis.com/css2?family=Dongle:wght@300&family=Port+Lligat+Slab&display=swap";.container-flex[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]{font-family:Dongle,sans-serif;font-family:Port Lligat Slab,serif}.list-group[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{font-size:1.2em}.card-body[_ngcontent-%COMP%]{box-shadow:0 6px 20px 2px #0000001f;border-radius:0%;border:none}.list-item-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px);transition:opacity .3s,transform .3s}.completed[_ngcontent-%COMP%]{color:#888;text-decoration:line-through}']})}return n})();function xO(n,e){1&n&&(v.TgZ(0,"div",4)(1,"div",5)(2,"h2"),v._uU(3,"To do List (Work in Progress)"),v.qZA(),v._uU(4,' Il progetto "To do list" \xe8 un\'applicazione web di gestione delle attivit\xe0 costruita con Angular e Firebase Firestore. Questa applicazione ti consente di creare, aggiornare e eliminare facilmente le tue attivit\xe0 quotidiane, offrendoti un modo efficiente per organizzare il tuo lavoro e la tua vita.'),v._UZ(5,"br"),v.TgZ(6,"a",6),v._UZ(7,"img",7),v.qZA(),v.TgZ(8,"a",8),v._UZ(9,"img",9),v.qZA(),v.TgZ(10,"a",10),v._UZ(11,"img",11),v.qZA()()())}const RO=function(n){return{"on-sidebar":n}};let NO=(()=>{class n{constructor(){this.isSidebarOpen=!1}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=v.Xpm({type:n,selectors:[["app-credits"]],decls:4,vars:4,consts:[[1,"fixed-top"],[1,"btn",3,"ngClass","click"],["src","https://github.com/chiaraferrara/StudioGhibli/blob/3f4858a29cce95959742a40d7f1aca38e6b3d304/src/app/img/menu.png?raw=true",2,"height","20px"],["class","card","style","width: 350px;",4,"ngIf"],[1,"card",2,"width","350px"],[1,"card-body",2,"text-align","center"],["href","https://github.com/chiaraferrara"],["src","https://github.com/chiaraferrara/StudioGhibli/blob/56946933e0f028998ef3a97e6adc07c49962933c/src/app/img/github.png?raw=true",2,"width","40px"],["href","https://angular.io/"],["src","https://github.com/chiaraferrara/StudioGhibli/blob/9140d4e3e77cdd0f757b9ede021bbbd650e7eada/src/app/img/angular_solidBlack.png?raw=true",2,"width","50px"],["href","https://www.linkedin.com/in/chiara-ferrara-41273a265/"],["src","https://cdn.icon-icons.com/icons2/2428/PNG/512/linkedin_black_logo_icon_147114.png",2,"width","50px"]],template:function(r,o){1&r&&(v.TgZ(0,"div",0)(1,"button",1),v.NdJ("click",function(){return o.toggleSidebar()}),v._UZ(2,"img",2),v.qZA(),v.YNc(3,xO,12,0,"div",3),v.qZA()),2&r&&(v.xp6(1),v.Q6J("ngClass",v.VKq(2,RO,o.isSidebarOpen)),v.xp6(2),v.Q6J("ngIf",o.isSidebarOpen))},dependencies:[lo,ea],styles:['@import"https://fonts.googleapis.com/css2?family=Dongle:wght@300&family=Port+Lligat+Slab&display=swap";a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:#000;text-decoration:none;font-variant:small-caps;font-weight:bolder}.card-body[_ngcontent-%COMP%]{margin:auto;font-family:Dongle,sans-serif;font-family:Port Lligat Slab,serif;line-height:1.4}']})}return n})(),OO=(()=>{class n{constructor(){this.title="todolist"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(r,o){1&r&&(v.TgZ(0,"body"),v._UZ(1,"app-credits"),v.TgZ(2,"div",0)(3,"div",1)(4,"div",2),v._UZ(5,"app-todo"),v.qZA()()()())},dependencies:[MO,NO],styles:["body[_ngcontent-%COMP%]{min-height:100vh;overflow:hidden;font:16px/40px Open Sans,sans-serif;display:block;background-color:#dfdfdf}"]})}return n})();const PO_firebaseConfig={apiKey:"AIzaSyD8lf86wUWBngDElcwFJq0Y5lU6c0MpkRA",authDomain:"todolist-b19d0.firebaseapp.com",projectId:"todolist-b19d0",storageBucket:"todolist-b19d0.appspot.com",messagingSenderId:"310408811147",appId:"1:310408811147:web:061752534ca77e8b797a8e"};let kO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=v.oAB({type:n,bootstrap:[OO]});static#n=this.\u0275inj=v.cJS({imports:[Nl,CO,Nr.hO.initializeApp(PO_firebaseConfig),XM]})}return n})();mr().bootstrapModule(kO).catch(n=>console.error(n))},5619:(ot,be,O)=>{O.d(be,{X:()=>Z});var v=O(8645);class Z extends v.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const ne=super._subscribe(Y);return!ne.closed&&Y.next(this._value),ne}getValue(){const{hasError:Y,thrownError:ne,_value:fe}=this;if(Y)throw ne;return this._throwIfClosed(),fe}next(Y){super.next(this._value=Y)}}},5592:(ot,be,O)=>{O.d(be,{y:()=>Me});var v=O(305),Z=O(7394),P=O(4850),Y=O(8407),ne=O(2653),fe=O(4674),pe=O(1441);let Me=(()=>{class X{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ke=new X;return Ke.source=this,Ke.operator=Te,Ke}subscribe(Te,Ke,Ne){const qe=function j(X){return X&&X instanceof v.Lv||function F(X){return X&&(0,fe.m)(X.next)&&(0,fe.m)(X.error)&&(0,fe.m)(X.complete)}(X)&&(0,Z.Nn)(X)}(Te)?Te:new v.Hp(Te,Ke,Ne);return(0,pe.x)(()=>{const{operator:Oe,source:ut}=this;qe.add(Oe?Oe.call(qe,ut):ut?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ke){Te.error(Ke)}}forEach(Te,Ke){return new(Ke=ue(Ke))((Ne,qe)=>{const Oe=new v.Hp({next:ut=>{try{Te(ut)}catch(ct){qe(ct),Oe.unsubscribe()}},error:qe,complete:Ne});this.subscribe(Oe)})}_subscribe(Te){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Te)}[P.L](){return this}pipe(...Te){return(0,Y.U)(Te)(this)}toPromise(Te){return new(Te=ue(Te))((Ke,Ne)=>{let qe;this.subscribe(Oe=>qe=Oe,Oe=>Ne(Oe),()=>Ke(qe))})}}return X.create=Le=>new X(Le),X})();function ue(X){var Le;return null!==(Le=X??ne.config.Promise)&&void 0!==Le?Le:Promise}},8645:(ot,be,O)=>{O.d(be,{x:()=>pe});var v=O(5592),Z=O(7394);const Y=(0,O(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(9039),fe=O(1441);let pe=(()=>{class ue extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const X=new Me(this,this);return X.operator=j,X}_throwIfClosed(){if(this.closed)throw new Y}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:X}=this;for(;X.length;)X.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:X,isStopped:Le,observers:Te}=this;return X||Le?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,ne.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:X,thrownError:Le,isStopped:Te}=this;X?j.error(Le):Te&&j.complete()}asObservable(){const j=new v.y;return j.source=this,j}}return ue.create=(F,j)=>new Me(F,j),ue})();class Me extends pe{constructor(F,j){super(),this.destination=F,this.source=j}next(F){var j,X;null===(X=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===X||X.call(j,F)}error(F){var j,X;null===(X=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===X||X.call(j,F)}complete(){var F,j;null===(j=null===(F=this.destination)||void 0===F?void 0:F.complete)||void 0===j||j.call(F)}_subscribe(F){var j,X;return null!==(X=null===(j=this.source)||void 0===j?void 0:j.subscribe(F))&&void 0!==X?X:Z.Lc}}},305:(ot,be,O)=>{O.d(be,{Hp:()=>Ne,Lv:()=>X});var v=O(4674),Z=O(7394),P=O(2653),Y=O(3894),ne=O(2420);const fe=ue("C",void 0,void 0);function ue(re,Ie,ee){return{kind:re,value:Ie,error:ee}}var F=O(7599),j=O(1441);class X extends Z.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,Z.Nn)(Ie)&&Ie.add(this)):this.destination=ct}static create(Ie,ee,we){return new Ne(Ie,ee,we)}next(Ie){this.isStopped?ut(function Me(re){return ue("N",re,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?ut(function pe(re){return ue("E",void 0,re)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?ut(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Te(re,Ie){return Le.call(re,Ie)}class Ke{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:ee}=this;if(ee.next)try{ee.next(Ie)}catch(we){qe(we)}}error(Ie){const{partialObserver:ee}=this;if(ee.error)try{ee.error(Ie)}catch(we){qe(we)}else qe(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(ee){qe(ee)}}}class Ne extends X{constructor(Ie,ee,we){let Pe;if(super(),(0,v.m)(Ie)||!Ie)Pe={next:Ie??void 0,error:ee??void 0,complete:we??void 0};else{let oe;this&&P.config.useDeprecatedNextContext?(oe=Object.create(Ie),oe.unsubscribe=()=>this.unsubscribe(),Pe={next:Ie.next&&Te(Ie.next,oe),error:Ie.error&&Te(Ie.error,oe),complete:Ie.complete&&Te(Ie.complete,oe)}):Pe=Ie}this.destination=new Ke(Pe)}}function qe(re){P.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(re):(0,Y.h)(re)}function ut(re,Ie){const{onStoppedNotification:ee}=P.config;ee&&F.z.setTimeout(()=>ee(re,Ie))}const ct={closed:!0,next:ne.Z,error:function Oe(re){throw re},complete:ne.Z}},7394:(ot,be,O)=>{O.d(be,{Lc:()=>fe,w0:()=>ne,Nn:()=>pe});var v=O(4674);const P=(0,O(2306).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((X,Le)=>`${Le+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var Y=O(9039);class ne{constructor(F){this.initialTeardown=F,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let F;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:X}=this;if((0,v.m)(X))try{X()}catch(Te){F=Te instanceof P?Te.errors:[Te]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Te of Le)try{Me(Te)}catch(Ke){F=F??[],Ke instanceof P?F=[...F,...Ke.errors]:F.push(Ke)}}if(F)throw new P(F)}}add(F){var j;if(F&&F!==this)if(this.closed)Me(F);else{if(F instanceof ne){if(F.closed||F._hasParent(this))return;F._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(F)}}_hasParent(F){const{_parentage:j}=this;return j===F||Array.isArray(j)&&j.includes(F)}_addParent(F){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(F),j):j?[j,F]:F}_removeParent(F){const{_parentage:j}=this;j===F?this._parentage=null:Array.isArray(j)&&(0,Y.P)(j,F)}remove(F){const{_finalizers:j}=this;j&&(0,Y.P)(j,F),F instanceof ne&&F._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const fe=ne.EMPTY;function pe(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,v.m)(ue.remove)&&(0,v.m)(ue.add)&&(0,v.m)(ue.unsubscribe)}function Me(ue){(0,v.m)(ue)?ue():ue.unsubscribe()}},2653:(ot,be,O)=>{O.d(be,{config:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ot,be,O)=>{O.d(be,{E:()=>Z});const Z=new(O(5592).y)(ne=>ne.complete())},2459:(ot,be,O)=>{O.d(be,{D:()=>Ie});var v=O(4829),Z=O(3093),P=O(5137),fe=O(5592),Me=O(4971),ue=O(4674),F=O(7103);function X(ee,we){if(!ee)throw new Error("Iterable cannot be null");return new fe.y(Pe=>{(0,F.f)(Pe,we,()=>{const oe=ee[Symbol.asyncIterator]();(0,F.f)(Pe,we,()=>{oe.next().then(q=>{q.done?Pe.complete():Pe.next(q.value)})},0,!0)})})}var Le=O(8382),Te=O(4026),Ke=O(4266),Ne=O(3664),qe=O(5726),Oe=O(9853),ut=O(541);function Ie(ee,we){return we?function re(ee,we){if(null!=ee){if((0,Le.c)(ee))return function Y(ee,we){return(0,v.Xf)(ee).pipe((0,P.R)(we),(0,Z.Q)(we))}(ee,we);if((0,Ke.z)(ee))return function pe(ee,we){return new fe.y(Pe=>{let oe=0;return we.schedule(function(){oe===ee.length?Pe.complete():(Pe.next(ee[oe++]),Pe.closed||this.schedule())})})}(ee,we);if((0,Te.t)(ee))return function ne(ee,we){return(0,v.Xf)(ee).pipe((0,P.R)(we),(0,Z.Q)(we))}(ee,we);if((0,qe.D)(ee))return X(ee,we);if((0,Ne.T)(ee))return function j(ee,we){return new fe.y(Pe=>{let oe;return(0,F.f)(Pe,we,()=>{oe=ee[Me.h](),(0,F.f)(Pe,we,()=>{let q,Be;try{({value:q,done:Be}=oe.next())}catch(dt){return void Pe.error(dt)}Be?Pe.complete():Pe.next(q)},0,!0)}),()=>(0,ue.m)(oe?.return)&&oe.return()})}(ee,we);if((0,ut.L)(ee))return function ct(ee,we){return X((0,ut.Q)(ee),we)}(ee,we)}throw(0,Oe.z)(ee)}(ee,we):(0,v.Xf)(ee)}},4829:(ot,be,O)=>{O.d(be,{Xf:()=>Le});var v=O(7582),Z=O(4266),P=O(4026),Y=O(5592),ne=O(8382),fe=O(5726),pe=O(9853),Me=O(3664),ue=O(541),F=O(4674),j=O(3894),X=O(4850);function Le(re){if(re instanceof Y.y)return re;if(null!=re){if((0,ne.c)(re))return function Te(re){return new Y.y(Ie=>{const ee=re[X.L]();if((0,F.m)(ee.subscribe))return ee.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,Z.z)(re))return function Ke(re){return new Y.y(Ie=>{for(let ee=0;ee<re.length&&!Ie.closed;ee++)Ie.next(re[ee]);Ie.complete()})}(re);if((0,P.t)(re))return function Ne(re){return new Y.y(Ie=>{re.then(ee=>{Ie.closed||(Ie.next(ee),Ie.complete())},ee=>Ie.error(ee)).then(null,j.h)})}(re);if((0,fe.D)(re))return Oe(re);if((0,Me.T)(re))return function qe(re){return new Y.y(Ie=>{for(const ee of re)if(Ie.next(ee),Ie.closed)return;Ie.complete()})}(re);if((0,ue.L)(re))return function ut(re){return Oe((0,ue.Q)(re))}(re)}throw(0,pe.z)(re)}function Oe(re){return new Y.y(Ie=>{(function ct(re,Ie){var ee,we,Pe,oe;return(0,v.mG)(this,void 0,void 0,function*(){try{for(ee=(0,v.KL)(re);!(we=yield ee.next()).done;)if(Ie.next(we.value),Ie.closed)return}catch(q){Pe={error:q}}finally{try{we&&!we.done&&(oe=ee.return)&&(yield oe.call(ee))}finally{if(Pe)throw Pe.error}}Ie.complete()})})(re,Ie).catch(ee=>Ie.error(ee))})}},3019:(ot,be,O)=>{O.d(be,{T:()=>fe});var v=O(7537),Z=O(4829),P=O(6232),Y=O(4564),ne=O(2459);function fe(...pe){const Me=(0,Y.yG)(pe),ue=(0,Y._6)(pe,1/0),F=pe;return F.length?1===F.length?(0,Z.Xf)(F[0]):(0,v.J)(ue)((0,ne.D)(F,Me)):P.E}},2096:(ot,be,O)=>{O.d(be,{of:()=>P});var v=O(4564),Z=O(2459);function P(...Y){const ne=(0,v.yG)(Y);return(0,Z.D)(Y,ne)}},8251:(ot,be,O)=>{O.d(be,{x:()=>Z});var v=O(305);function Z(Y,ne,fe,pe,Me){return new P(Y,ne,fe,pe,Me)}class P extends v.Lv{constructor(ne,fe,pe,Me,ue,F){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=F,this._next=fe?function(j){try{fe(j)}catch(X){ne.error(X)}}:super._next,this._error=Me?function(j){try{Me(j)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(ot,be,O)=>{O.d(be,{x:()=>Y});var v=O(2737),Z=O(9360),P=O(8251);function Y(fe,pe=v.y){return fe=fe??ne,(0,Z.e)((Me,ue)=>{let F,j=!0;Me.subscribe((0,P.x)(ue,X=>{const Le=pe(X);(j||!fe(F,Le))&&(j=!1,F=Le,ue.next(X))}))})}function ne(fe,pe){return fe===pe}},7398:(ot,be,O)=>{O.d(be,{U:()=>P});var v=O(9360),Z=O(8251);function P(Y,ne){return(0,v.e)((fe,pe)=>{let Me=0;fe.subscribe((0,Z.x)(pe,ue=>{pe.next(Y.call(ne,ue,Me++))}))})}},7537:(ot,be,O)=>{O.d(be,{J:()=>P});var v=O(1631),Z=O(2737);function P(Y=1/0){return(0,v.z)(Z.y,Y)}},1631:(ot,be,O)=>{O.d(be,{z:()=>Me});var v=O(7398),Z=O(4829),P=O(9360),Y=O(7103),ne=O(8251),pe=O(4674);function Me(ue,F,j=1/0){return(0,pe.m)(F)?Me((X,Le)=>(0,v.U)((Te,Ke)=>F(X,Te,Le,Ke))((0,Z.Xf)(ue(X,Le))),j):("number"==typeof F&&(j=F),(0,P.e)((X,Le)=>function fe(ue,F,j,X,Le,Te,Ke,Ne){const qe=[];let Oe=0,ut=0,ct=!1;const re=()=>{ct&&!qe.length&&!Oe&&F.complete()},Ie=we=>Oe<X?ee(we):qe.push(we),ee=we=>{Te&&F.next(we),Oe++;let Pe=!1;(0,Z.Xf)(j(we,ut++)).subscribe((0,ne.x)(F,oe=>{Le?.(oe),Te?Ie(oe):F.next(oe)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Oe--;qe.length&&Oe<X;){const oe=qe.shift();Ke?(0,Y.f)(F,Ke,()=>ee(oe)):ee(oe)}re()}catch(oe){F.error(oe)}}))};return ue.subscribe((0,ne.x)(F,Ie,()=>{ct=!0,re()})),()=>{Ne?.()}}(X,Le,ue,j)))}},3093:(ot,be,O)=>{O.d(be,{Q:()=>Y});var v=O(7103),Z=O(9360),P=O(8251);function Y(ne,fe=0){return(0,Z.e)((pe,Me)=>{pe.subscribe((0,P.x)(Me,ue=>(0,v.f)(Me,ne,()=>Me.next(ue),fe),()=>(0,v.f)(Me,ne,()=>Me.complete(),fe),ue=>(0,v.f)(Me,ne,()=>Me.error(ue),fe)))})}},3020:(ot,be,O)=>{O.d(be,{B:()=>ne});var v=O(4829),Z=O(8645),P=O(305),Y=O(9360);function ne(pe={}){const{connector:Me=(()=>new Z.x),resetOnError:ue=!0,resetOnComplete:F=!0,resetOnRefCountZero:j=!0}=pe;return X=>{let Le,Te,Ke,Ne=0,qe=!1,Oe=!1;const ut=()=>{Te?.unsubscribe(),Te=void 0},ct=()=>{ut(),Le=Ke=void 0,qe=Oe=!1},re=()=>{const Ie=Le;ct(),Ie?.unsubscribe()};return(0,Y.e)((Ie,ee)=>{Ne++,!Oe&&!qe&&ut();const we=Ke=Ke??Me();ee.add(()=>{Ne--,0===Ne&&!Oe&&!qe&&(Te=fe(re,j))}),we.subscribe(ee),!Le&&Ne>0&&(Le=new P.Hp({next:Pe=>we.next(Pe),error:Pe=>{Oe=!0,ut(),Te=fe(ct,ue,Pe),we.error(Pe)},complete:()=>{qe=!0,ut(),Te=fe(ct,F),we.complete()}}),(0,v.Xf)(Ie).subscribe(Le))})(X)}}function fe(pe,Me,...ue){if(!0===Me)return void pe();if(!1===Me)return;const F=new P.Hp({next:()=>{F.unsubscribe(),pe()}});return(0,v.Xf)(Me(...ue)).subscribe(F)}},5137:(ot,be,O)=>{O.d(be,{R:()=>Z});var v=O(9360);function Z(P,Y=0){return(0,v.e)((ne,fe)=>{fe.add(P.schedule(()=>ne.subscribe(fe),Y))})}},4664:(ot,be,O)=>{O.d(be,{w:()=>Y});var v=O(4829),Z=O(9360),P=O(8251);function Y(ne,fe){return(0,Z.e)((pe,Me)=>{let ue=null,F=0,j=!1;const X=()=>j&&!ue&&Me.complete();pe.subscribe((0,P.x)(Me,Le=>{ue?.unsubscribe();let Te=0;const Ke=F++;(0,v.Xf)(ne(Le,Ke)).subscribe(ue=(0,P.x)(Me,Ne=>Me.next(fe?fe(Le,Ne,Ke,Te++):Ne),()=>{ue=null,X()}))},()=>{j=!0,X()}))})}},9397:(ot,be,O)=>{O.d(be,{b:()=>ne});var v=O(4674),Z=O(9360),P=O(8251),Y=O(2737);function ne(fe,pe,Me){const ue=(0,v.m)(fe)||pe||Me?{next:fe,error:pe,complete:Me}:fe;return ue?(0,Z.e)((F,j)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let Le=!0;F.subscribe((0,P.x)(j,Te=>{var Ke;null===(Ke=ue.next)||void 0===Ke||Ke.call(ue,Te),j.next(Te)},()=>{var Te;Le=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var Ke;Le=!1,null===(Ke=ue.error)||void 0===Ke||Ke.call(ue,Te),j.error(Te)},()=>{var Te,Ke;Le&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(Ke=ue.finalize)||void 0===Ke||Ke.call(ue)}))}):Y.y}},1954:(ot,be,O)=>{O.d(be,{o:()=>ne});var v=O(7394);class Z extends v.w0{constructor(pe,Me){super()}schedule(pe,Me=0){return this}}const P={setInterval(fe,pe,...Me){const{delegate:ue}=P;return ue?.setInterval?ue.setInterval(fe,pe,...Me):setInterval(fe,pe,...Me)},clearInterval(fe){const{delegate:pe}=P;return(pe?.clearInterval||clearInterval)(fe)},delegate:void 0};var Y=O(9039);class ne extends Z{constructor(pe,Me){super(pe,Me),this.scheduler=pe,this.work=Me,this.pending=!1}schedule(pe,Me=0){var ue;if(this.closed)return this;this.state=pe;const F=this.id,j=this.scheduler;return null!=F&&(this.id=this.recycleAsyncId(j,F,Me)),this.pending=!0,this.delay=Me,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(j,this.id,Me),this}requestAsyncId(pe,Me,ue=0){return P.setInterval(pe.flush.bind(pe,this),ue)}recycleAsyncId(pe,Me,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return Me;null!=Me&&P.clearInterval(Me)}execute(pe,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(pe,Me);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Me){let F,ue=!1;try{this.work(pe)}catch(j){ue=!0,F=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),F}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Me}=this,{actions:ue}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(ue,this),null!=pe&&(this.id=this.recycleAsyncId(Me,pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(ot,be,O)=>{O.d(be,{v:()=>P});var v=O(4552);class Z{constructor(ne,fe=Z.now){this.schedulerActionCtor=ne,this.now=fe}schedule(ne,fe=0,pe){return new this.schedulerActionCtor(this,ne).schedule(pe,fe)}}Z.now=v.l.now;class P extends Z{constructor(ne,fe=Z.now){super(ne,fe),this.actions=[],this._active=!1}flush(ne){const{actions:fe}=this;if(this._active)return void fe.push(ne);let pe;this._active=!0;do{if(pe=ne.execute(ne.state,ne.delay))break}while(ne=fe.shift());if(this._active=!1,pe){for(;ne=fe.shift();)ne.unsubscribe();throw pe}}}},6321:(ot,be,O)=>{O.d(be,{z:()=>P});var v=O(1954);const P=new(O(2631).v)(v.o)},4552:(ot,be,O)=>{O.d(be,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},7599:(ot,be,O)=>{O.d(be,{z:()=>v});const v={setTimeout(Z,P,...Y){const{delegate:ne}=v;return ne?.setTimeout?ne.setTimeout(Z,P,...Y):setTimeout(Z,P,...Y)},clearTimeout(Z){const{delegate:P}=v;return(P?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},4971:(ot,be,O)=>{O.d(be,{h:()=>Z});const Z=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ot,be,O)=>{O.d(be,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ot,be,O)=>{O.d(be,{_6:()=>fe,jO:()=>Y,yG:()=>ne});var v=O(4674);function P(pe){return pe[pe.length-1]}function Y(pe){return(0,v.m)(P(pe))?pe.pop():void 0}function ne(pe){return function Z(pe){return pe&&(0,v.m)(pe.schedule)}(P(pe))?pe.pop():void 0}function fe(pe,Me){return"number"==typeof P(pe)?pe.pop():Me}},9039:(ot,be,O)=>{function v(Z,P){if(Z){const Y=Z.indexOf(P);0<=Y&&Z.splice(Y,1)}}O.d(be,{P:()=>v})},2306:(ot,be,O)=>{function v(Z){const Y=Z(ne=>{Error.call(ne),ne.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}O.d(be,{d:()=>v})},1441:(ot,be,O)=>{O.d(be,{O:()=>Y,x:()=>P});var v=O(2653);let Z=null;function P(ne){if(v.config.useDeprecatedSynchronousErrorHandling){const fe=!Z;if(fe&&(Z={errorThrown:!1,error:null}),ne(),fe){const{errorThrown:pe,error:Me}=Z;if(Z=null,pe)throw Me}}else ne()}function Y(ne){v.config.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=ne)}},7103:(ot,be,O)=>{function v(Z,P,Y,ne=0,fe=!1){const pe=P.schedule(function(){Y(),fe?Z.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Z.add(pe),!fe)return pe}O.d(be,{f:()=>v})},2737:(ot,be,O)=>{function v(Z){return Z}O.d(be,{y:()=>v})},4266:(ot,be,O)=>{O.d(be,{z:()=>v});const v=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},5726:(ot,be,O)=>{O.d(be,{D:()=>Z});var v=O(4674);function Z(P){return Symbol.asyncIterator&&(0,v.m)(P?.[Symbol.asyncIterator])}},4674:(ot,be,O)=>{function v(Z){return"function"==typeof Z}O.d(be,{m:()=>v})},8382:(ot,be,O)=>{O.d(be,{c:()=>P});var v=O(4850),Z=O(4674);function P(Y){return(0,Z.m)(Y[v.L])}},3664:(ot,be,O)=>{O.d(be,{T:()=>P});var v=O(4971),Z=O(4674);function P(Y){return(0,Z.m)(Y?.[v.h])}},4026:(ot,be,O)=>{O.d(be,{t:()=>Z});var v=O(4674);function Z(P){return(0,v.m)(P?.then)}},541:(ot,be,O)=>{O.d(be,{L:()=>Y,Q:()=>P});var v=O(7582),Z=O(4674);function P(ne){return(0,v.FC)(this,arguments,function*(){const pe=ne.getReader();try{for(;;){const{value:Me,done:ue}=yield(0,v.qq)(pe.read());if(ue)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(Me)}}finally{pe.releaseLock()}})}function Y(ne){return(0,Z.m)(ne?.getReader)}},9360:(ot,be,O)=>{O.d(be,{A:()=>Z,e:()=>P});var v=O(4674);function Z(Y){return(0,v.m)(Y?.lift)}function P(Y){return ne=>{if(Z(ne))return ne.lift(function(fe){try{return Y(fe,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ot,be,O)=>{function v(){}O.d(be,{Z:()=>v})},8407:(ot,be,O)=>{O.d(be,{U:()=>P,z:()=>Z});var v=O(2737);function Z(...Y){return P(Y)}function P(Y){return 0===Y.length?v.y:1===Y.length?Y[0]:function(fe){return Y.reduce((pe,Me)=>Me(pe),fe)}}},3894:(ot,be,O)=>{O.d(be,{h:()=>P});var v=O(2653),Z=O(7599);function P(Y){Z.z.setTimeout(()=>{const{onUnhandledError:ne}=v.config;if(!ne)throw Y;ne(Y)})}},9853:(ot,be,O)=>{function v(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(be,{z:()=>v})},5879:(ot,be,O)=>{O.d(be,{$8M:()=>mu,$WT:()=>Us,$Z:()=>k_,AFp:()=>Ho,AaK:()=>X,CHM:()=>ji,CRH:()=>Mb,EJc:()=>pv,EpF:()=>g0,F4k:()=>Ny,FYo:()=>Au,FiY:()=>$l,GfV:()=>jp,HDt:()=>gv,JOm:()=>Da,KtG:()=>ac,LFG:()=>Ct,Lbi:()=>Gm,Lck:()=>YT,MAs:()=>tD,MMx:()=>ub,NdJ:()=>m0,Ojb:()=>VC,OlP:()=>un,Oqu:()=>P0,P3R:()=>on,PXZ:()=>US,Q6J:()=>l0,QGY:()=>Ry,Qsj:()=>eE,R0b:()=>Kr,RDi:()=>a_,Rgc:()=>el,SBq:()=>us,Sil:()=>DM,Suo:()=>Ab,TTD:()=>nc,TgZ:()=>Ay,VKq:()=>av,VuI:()=>aA,X6Q:()=>ow,XFs:()=>_t,Xpm:()=>qu,Xq5:()=>my,Xts:()=>od,Y36:()=>Oc,YKP:()=>ob,YNc:()=>u0,Yjl:()=>fl,Yz7:()=>at,Z0I:()=>an,ZZ4:()=>jg,_UZ:()=>Ef,_c5:()=>HM,_uU:()=>ED,aQg:()=>tC,c2e:()=>jI,cJS:()=>vn,cg1:()=>G0,dDg:()=>_v,dqk:()=>rn,eFA:()=>ew,eJc:()=>NI,eoX:()=>Iv,f3M:()=>Pt,g9A:()=>Op,h0i:()=>Nd,hGG:()=>zM,iGM:()=>dS,ifc:()=>Ui,ip1:()=>Hu,jDz:()=>Ba,kL8:()=>PD,lG2:()=>na,lqb:()=>$o,lri:()=>vv,n5z:()=>Ti,oAB:()=>Za,oxw:()=>Id,q4F:()=>Ac,qFp:()=>pA,qLn:()=>xc,qZA:()=>yd,rWj:()=>Vg,rg0:()=>Sl,sBO:()=>Gf,s_b:()=>MI,soG:()=>Fg,tb:()=>jd,tp0:()=>mc,uIk:()=>t0,vHH:()=>re,vpe:()=>to,wAp:()=>Zc,xp6:()=>Vt,z2F:()=>rl,zSh:()=>f_,zs3:()=>ai});var v=O(8645),Z=O(7394),P=O(5592),Y=O(3019),ne=O(5619),fe=O(2096),pe=O(3020),Me=O(4664),ue=O(3997);function F(i){for(let s in i)if(i[s]===F)return s;throw Error("Could not find renamed property on target object.")}function X(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(X).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Te=F({__forward_ref__:F});function Ke(i){return i.__forward_ref__=Ke,i.toString=function(){return X(this())},i}function Ne(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(Te)&&i.__forward_ref__===Ke}function Oe(i){return i&&!!i.\u0275providers}const ct="https://g.co/ng/security#xss";class re extends Error{constructor(s,a){super(function Ie(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Be(i,s){throw new re(-201,!1)}function Qe(i,s){null==i&&function ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function at(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Zn(i){return kr(i,$n)||kr(i,hs)}function an(i){return null!==Zn(i)}function kr(i,s){return i.hasOwnProperty(s)?i[s]:null}function hi(i){return i&&(i.hasOwnProperty(Yr)||i.hasOwnProperty(co))?i[Yr]:null}const $n=F({\u0275prov:F}),Yr=F({\u0275inj:F}),hs=F({ngInjectableDef:F}),co=F({ngInjectorDef:F});var _t=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(_t||{});let bt;function hn(i){const s=bt;return bt=i,s}function Dn(i,s,a){const c=Zn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&_t.Optional?null:void 0!==s?s:void Be(X(i))}const rn=globalThis,$e={},Xe="__NG_DI_FLAG__",ft="ngTempTokenPath",V=/\n/gm,W="__source";let De;function nt(i){const s=De;return De=i,s}function Nt(i,s=_t.Default){if(void 0===De)throw new re(-203,!1);return null===De?Dn(i,void 0,s):De.get(i,s&_t.Optional?null:void 0,s)}function Ct(i,s=_t.Default){return(function Rt(){return bt}()||Nt)(Ne(i),s)}function Pt(i,s=_t.Default){return Ct(i,Qn(s))}function Qn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Xt(i){const s=[];for(let a=0;a<i.length;a++){const c=Ne(i[a]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let l,f=_t.Default;for(let m=0;m<c.length;m++){const I=c[m],D=ks(I);"number"==typeof D?-1===D?l=I.token:f|=D:l=I}s.push(Ct(l,f))}else s.push(Ct(c))}return s}function Cr(i,s){return i[Xe]=s,i.prototype[Xe]=s,i}function ks(i){return i[Xe]}function Zi(i){return{toString:i}.toString()}var Ls=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ls||{}),Ui=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Ui||{});const Vi={},Gt=[],Fs=F({\u0275cmp:F}),Qo=F({\u0275dir:F}),qa=F({\u0275pipe:F}),zd=F({\u0275mod:F}),Yi=F({\u0275fac:F}),Xo=F({__NG_ELEMENT_ID__:F}),Jo=F({__NG_ENV_ID__:F});function ul(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}function lo(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],m=a[c++],I=a[c++];i.setAttribute(s,m,I,f)}else{const f=l,m=a[++c];wi(f)?i.setProperty(s,f,m):i.setAttribute(s,f,m),c++}}return c}function cl(i){return 3===i||4===i||6===i}function wi(i){return 64===i.charCodeAt(0)}function ho(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Wa(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Wa(i,s,a,c,l){let f=0,m=i.length;if(-1===s)m=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){m=-1;break}if(I>s){m=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==m&&(i.splice(m,0,s),f=m+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}const ll="ng-template";function Xn(i,s,a){let c=0,l=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&l){const m=i[c++];if(a&&"class"===f&&-1!==ul(m.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function ea(i){return 4===i.type&&i.value!==ll}function Wg(i,s,a){return s===(4!==i.type||a?i.value:ll)}function Kf(i,s,a){let c=4;const l=i.attrs||[],f=function Kg(i){for(let s=0;s<i.length;s++)if(cl(i[s]))return s;return i.length}(l);let m=!1;for(let I=0;I<s.length;I++){const D=s[I];if("number"!=typeof D){if(!m)if(4&c){if(c=2|1&c,""!==D&&!Wg(i,D,a)||""===D&&1===s.length){if(Qr(c))return!1;m=!0}}else{const S=8&c?D:s[++I];if(8&c&&null!==i.attrs){if(!Xn(i.attrs,S,a)){if(Qr(c))return!1;m=!0}continue}const L=ta(8&c?"class":D,l,ea(i),a);if(-1===L){if(Qr(c))return!1;m=!0;continue}if(""!==S){let G;G=L>f?"":l[L+1].toLowerCase();const Q=8&c?G:null;if(Q&&-1!==ul(Q,S,0)||2&c&&S!==G){if(Qr(c))return!1;m=!0}}}}else{if(!m&&!Qr(c)&&!Qr(D))return!1;if(m&&Qr(D))continue;m=!1,c=D|1&c}}return Qr(c)||m}function Qr(i){return 0==(1&i)}function ta(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function fo(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function dl(i,s,a=!1){for(let c=0;c<s.length;c++)if(Kf(i,s[c],a))return!0;return!1}function Ka(i,s){return i?":not("+s.trim()+")":s}function qd(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const I=i[++a];l+="["+m+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+m:4&c&&(l+=" "+m);else""!==l&&!Qr(m)&&(s+=Ka(f,l),l=""),c=m,f=f||!Qr(c);a++}return""!==l&&(s+=Ka(f,l)),s}function qu(i){return Zi(()=>{const s=pl(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ls.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Ui.Emulated,styles:i.styles||Gt,_:null,schemas:i.schemas||null,tView:null,id:""};Yf(a);const c=i.dependencies;return a.directiveDefs=Ya(c,!1),a.pipeDefs=Ya(c,!0),a.id=function Di(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const l of a)s=Math.imul(31,s)+l.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function hl(i){return qt(i)||Hn(i)}function Wu(i){return null!==i}function Za(i){return Zi(()=>({type:i.type,bootstrap:i.bootstrap||Gt,declarations:i.declarations||Gt,imports:i.imports||Gt,exports:i.exports||Gt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ku(i,s){if(null==i)return Vi;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}function na(i){return Zi(()=>{const s=pl(i);return Yf(s),s})}function fl(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function qt(i){return i[Fs]||null}function Hn(i){return i[Qo]||null}function $r(i){return i[qa]||null}function Us(i){const s=qt(i)||Hn(i)||$r(i);return null!==s&&s.standalone}function Hr(i,s){const a=i[zd]||null;if(!a&&!0===s)throw new Error(`Type ${X(i)} does not have '\u0275mod' property.`);return a}function pl(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||Vi,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Gt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ku(i.inputs,s),outputs:Ku(i.outputs)}}function Yf(i){i.features?.forEach(s=>s(i))}function Ya(i,s){if(!i)return null;const a=s?$r:hl;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(Wu)}const bn=0,Je=1,It=2,Cn=3,zr=4,po=5,Tr=6,Qa=7,Nn=8,gs=9,ra=10,wt=11,Sr=12,Qf=13,ms=14,Tn=15,gl=16,go=17,dr=18,ys=19,vs=20,Vs=21,bi=22,Xa=23,Bs=24,Lt=25,ia=1,Yu=2,hr=7,fr=9,Ar=11;function pr(i){return Array.isArray(i)&&"object"==typeof i[ia]}function Br(i){return Array.isArray(i)&&!0===i[ia]}function Qu(i){return 0!=(4&i.flags)}function yo(i){return i.componentOffset>-1}function pi(i){return 1==(1&i.flags)}function Xr(i){return!!i.template}function sa(i){return 0!=(512&i[It])}function vo(i,s){return i.hasOwnProperty(Yi)?i[Yi]:null}let ar=null,_o=!1;function Jr(i){const s=ar;return ar=i,s}const Io={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function tu(i){if(!wo(i)||i.dirty){if(!i.producerMustRecompute(i)&&!El(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function nu(i){i.dirty=!0,function Jd(i){if(void 0===i.liveConsumerNode)return;const s=_o;_o=!0;try{for(const a of i.liveConsumerNode)a.dirty||nu(a)}finally{_o=s}}(i),i.consumerMarkedDirty?.(i)}function eh(i){return i&&(i.nextProducerIndex=0),Jr(i)}function gr(i,s){if(Jr(s),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(wo(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)ru(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function El(i){$s(i);for(let s=0;s<i.producerNode.length;s++){const a=i.producerNode[s],c=i.producerLastReadVersion[s];if(c!==a.version||(tu(a),c!==a.version))return!0}return!1}function Dl(i){if($s(i),wo(i))for(let s=0;s<i.producerNode.length;s++)ru(i.producerNode[s],i.producerIndexOfThis[s]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function ru(i,s){if(function iu(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),$s(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)ru(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[s]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[s]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,s<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[s],l=i.liveConsumerNode[s];$s(l),l.producerIndexOfThis[c]=s}}function wo(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function $s(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let rh=null;function Sl(i){const s=Jr(null);try{return i()}finally{Jr(s)}}const Al=()=>{},rp=(()=>({...Io,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:Al}))();class ip{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function nc(){return au}function au(i){return i.type.prototype.ngOnChanges&&(i.setInput=Eo),sp}function sp(){const i=Do(this),s=i?.current;if(s){const a=i.previous;if(a===Vi)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Eo(i,s,a,c){const l=this.declaredInputs[a],f=Do(i)||function sh(i,s){return i[Xi]=s}(i,{previous:Vi,current:null}),m=f.current||(f.current={}),I=f.previous,D=I[l];m[l]=new ip(D&&D.currentValue,s,I===Vi),i[c]=s}nc.ngInherit=!0;const Xi="__ngSimpleChanges__";function Do(i){return i[Xi]||null}const Bi=function(i,s,a){};function sn(i){for(;Array.isArray(i);)i=i[bn];return i}function Mr(i,s){return sn(s[i.index])}function xl(i,s){return i.data[s]}function xr(i,s){const a=s[i];return pr(a)?a:a[bn]}function ei(i,s){return null==s?null:i[s]}function lp(i){i[go]=0}function Rl(i){1024&i[It]||(i[It]|=1024,rm(i,1))}function rc(i){1024&i[It]&&(i[It]&=-1025,rm(i,-1))}function rm(i,s){let a=i[Cn];if(null===a)return;a[po]+=s;let c=a;for(a=a[Cn];null!==a&&(1===s&&1===c[po]||-1===s&&0===c[po]);)a[po]+=s,c=a,a=a[Cn]}const Et={lFrame:mi(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rr(){return Et.bindingsEnabled}function Ae(){return Et.lFrame.lView}function jt(){return Et.lFrame.tView}function ji(i){return Et.lFrame.contextLView=i,i[Nn]}function ac(i){return Et.lFrame.contextLView=null,i}function yr(){let i=uc();for(;null!==i&&64===i.type;)i=i.parent;return i}function uc(){return Et.lFrame.currentTNode}function Hs(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function So(){return Et.lFrame.isParent}function Ao(){return Et.lFrame.bindingIndex++}function cc(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,lc(s)}function lc(i){Et.lFrame.currentDirectiveIndex=i}function dc(){return Et.lFrame.currentQueryIndex}function gh(i){Et.lFrame.currentQueryIndex=i}function mh(i){const s=i[Je];return 2===s.type?s.declTNode:1===s.type?i[Tr]:null}function hp(i,s,a){if(a&_t.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&_t.Host||(l=mh(f),null===l||(f=f[ms],10&l.type))););if(null===l)return!1;s=l,i=f}const c=Et.lFrame=yh();return c.currentTNode=s,c.lView=i,!0}function Nr(i){const s=yh(),a=i[Je];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function yh(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?mi(i):s}function mi(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Vn(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yt=Vn;function zn(){const i=Vn();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Jn(){return Et.lFrame.selectedIndex}function $i(i){Et.lFrame.selectedIndex=i}function $t(){const i=Et.lFrame;return xl(i.tView,i.selectedIndex)}let qs=!0;function Mo(){return qs}function er(i){qs=i}function fa(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:x}=f;m&&(i.contentHooks??=[]).push(-a,m),I&&((i.contentHooks??=[]).push(a,I),(i.contentCheckHooks??=[]).push(a,I)),D&&(i.viewHooks??=[]).push(-a,D),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function ve(i,s,a){Ks(i,s,3,a)}function xo(i,s,a,c){(3&i[It])===a&&Ks(i,s,a,c)}function Ws(i,s){let a=i[It];(3&a)===s&&(a&=8191,a+=1,i[It]=a)}function Ks(i,s,a,c){const f=c??-1,m=s.length-1;let I=0;for(let D=void 0!==c?65535&i[go]:0;D<m;D++)if("number"==typeof s[D+1]){if(I=s[D],null!=c&&I>=c)break}else s[D]<0&&(i[go]+=65536),(I<f||-1==f)&&(Fl(i,a,s,D),i[go]=(4294901760&i[go])+D+2),D++}function Zt(i,s){Bi(4,i,s);const a=Jr(null);try{s.call(i)}finally{Jr(a),Bi(5,i,s)}}function Fl(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];l?i[It]>>13<i[go]>>16&&(3&i[It])===s&&(i[It]+=8192,Zt(I,f)):Zt(I,f)}const _r=-1;class We{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function du(i){return i!==_r}function Gn(i){return 32767&i}function An(i,s){let a=function hc(i){return i>>16}(i),c=s;for(;a>0;)c=c[ms],a--;return c}let ts=!0;function fc(i){const s=ts;return ts=i,s}const pc=255,Eh=5;let Ir=0;const ns={};function rs(i,s){const a=Oo(i,s);if(-1!==a)return a;const c=s[Je];c.firstCreatePass&&(i.injectorIndex=s.length,ri(c.data,i),ri(s,null),ri(c.blueprint,null));const l=Zs(i,s),f=i.injectorIndex;if(du(l)){const m=Gn(l),I=An(l,s),D=I[Je].data;for(let S=0;S<8;S++)s[f+S]=I[m+S]|D[m+S]}return s[f+8]=l,f}function ri(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Oo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Zs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=ma(l),null===c)return _r;if(a++,l=l[ms],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return _r}function hu(i,s,a){!function No(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Xo)&&(c=a[Xo]),null==c&&(c=a[Xo]=Ir++);const l=c&pc;s.data[i+(l>>Eh)]|=1<<l}(i,s,a)}function pa(i,s,a){if(a&_t.Optional||void 0!==i)return i;Be()}function Po(i,s,a,c){if(a&_t.Optional&&void 0===c&&(c=null),!(a&(_t.Self|_t.Host))){const l=i[gs],f=hn(void 0);try{return l?l.get(s,c,a&_t.Optional):Dn(s,c,a&_t.Optional)}finally{hn(f)}}return pa(c,0,a)}function fu(i,s,a,c=_t.Default,l){if(null!==i){if(2048&s[It]&&!(c&_t.Self)){const m=function um(i,s,a,c,l){let f=i,m=s;for(;null!==f&&null!==m&&2048&m[It]&&!(512&m[It]);){const I=Dh(f,m,a,c|_t.Self,ns);if(I!==ns)return I;let D=f.parent;if(!D){const S=m[vs];if(S){const x=S.get(a,ns,c);if(x!==ns)return x}D=ma(m),m=m[ms]}f=D}return l}(i,s,a,c,ns);if(m!==ns)return m}const f=Dh(i,s,a,c,ns);if(f!==ns)return f}return Po(s,a,c,l)}function Dh(i,s,a,c,l){const f=function Bl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Xo)?i[Xo]:void 0;return"number"==typeof s?s>=0?s&pc:gc:s}(a);if("function"==typeof f){if(!hp(s,i,c))return c&_t.Host?pa(l,0,c):Po(s,a,c,l);try{let m;if(m=f(c),null!=m||c&_t.Optional)return m;Be()}finally{yt()}}else if("number"==typeof f){let m=null,I=Oo(i,s),D=_r,S=c&_t.Host?s[Tn][Tr]:null;for((-1===I||c&_t.SkipSelf)&&(D=-1===I?Zs(i,s):s[I+8],D!==_r&&gu(c,!1)?(m=s[Je],I=Gn(D),s=An(D,s)):I=-1);-1!==I;){const x=s[Je];if(Hi(f,I,x.data)){const L=Vl(I,s,a,m,c,S);if(L!==ns)return L}D=s[I+8],D!==_r&&gu(c,s[Je].data[I+8]===S)&&Hi(f,I,s)?(m=x,I=Gn(D),s=An(D,s)):I=-1}}return l}function Vl(i,s,a,c,l,f){const m=s[Je],I=m.data[i+8],x=pu(I,m,a,null==c?yo(I)&&ts:c!=m&&0!=(3&I.type),l&_t.Host&&f===I);return null!==x?Es(s,m,x,I):ns}function pu(i,s,a,c,l){const f=i.providerIndexes,m=s.data,I=1048575&f,D=i.directiveStart,x=f>>20,G=l?I+x:i.directiveEnd;for(let Q=c?I:I+x;Q<G;Q++){const _e=m[Q];if(Q<D&&a===_e||Q>=D&&_e.type===a)return Q}if(l){const Q=m[D];if(Q&&Xr(Q)&&Q.type===a)return D}return null}function Es(i,s,a,c){let l=i[a];const f=s.data;if(function vh(i){return i instanceof We}(l)){const m=l;m.resolving&&function Pe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}(f[a]));const I=fc(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?hn(m.injectImpl):null;hp(i,c,_t.Default);try{l=i[a]=m.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Is(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const m=au(s);(a.preOrderHooks??=[]).push(i,m),(a.preOrderCheckHooks??=[]).push(i,m)}l&&(a.preOrderHooks??=[]).push(0-i,l),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==S&&hn(S),fc(I),m.resolving=!1,yt()}}return l}function Hi(i,s,a){return!!(a[s+(i>>Eh)]&1<<i)}function gu(i,s){return!(i&_t.Self||i&_t.Host&&s)}class In{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return fu(this._tNode,this._lView,s,Qn(c),a)}}function gc(){return new In(yr(),Ae())}function Ti(i){return Zi(()=>{const s=i.prototype.constructor,a=s[Yi]||Ch(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[Yi]||Ch(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Ch(i){return qe(i)?()=>{const s=Ch(Ne(i));return s&&s()}:vo(i)}function ma(i){const s=i[Je],a=s.type;return 2===a?s.declTNode:1===a?i[Tr]:null}function mu(i){return function ws(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(cl(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(yr(),i)}const va="__parameters__";function k(i,s,a){return Zi(()=>{const c=function A(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const m=new l(...f);return I.annotation=m,I;function I(D,S,x){const L=D.hasOwnProperty(va)?D[va]:Object.defineProperty(D,va,{value:[]})[va];for(;L.length<=x;)L.push(null);return(L[x]=L[x]||[]).push(m),D}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}function bs(i,s){i.forEach(a=>Array.isArray(a)?bs(a,s):s(a))}function Th(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function fp(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const $l=Cr(k("Optional"),8),mc=Cr(k("SkipSelf"),4);function ss(i){return 128==(128&i.flags)}var Da=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Da||{});const Eu=new Map;let Jl=0;const ed="__ngContext__";function Gr(i,s){pr(s)?(i[ed]=s[ys],function yi(i){Eu.set(i[ys],i)}(s)):i[ed]=s}let B;function J(i,s){return B(i,s)}function je(i){const s=i[Cn];return Br(s)?s[Cn]:s}function yn(i){return bu(i[Sr])}function vi(i){return bu(i[zr])}function bu(i){for(;null!==i&&!Br(i);)i=i[zr];return i}function Ca(i,s,a,c,l){if(null!=c){let f,m=!1;Br(c)?f=c:pr(c)&&(m=!0,c=c[bn]);const I=sn(c);0===i&&null!==a?null==l?n_(s,a,I):Uo(s,a,I,l||null,!0):1===i&&null!==a?Uo(s,a,I,l||null,!0):2===i?function Tp(i,s,a){const c=nd(i,s);c&&function Mm(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,m):3===i&&s.destroyNode(I),null!=f&&function Pm(i,s,a,c,l){const f=a[hr];f!==sn(a)&&Ca(s,i,c,f,l);for(let I=Ar;I<a.length;I++){const D=a[I];qh(D[Je],D,i,s,c,f)}}(s,i,f,a,l)}}function wn(i,s,a){return i.createElement(s,a)}function bp(i,s){const a=i[fr],c=a.indexOf(s);rc(s),a.splice(c,1)}function td(i,s){if(i.length<=Ar)return;const a=Ar+s,c=i[a];if(c){const l=c[gl];null!==l&&l!==i&&bp(l,c),s>0&&(i[a-1][zr]=c[zr]);const f=fp(i,Ar+s);!function Ep(i,s){qh(i,s,s[wt],2,null,null),s[bn]=null,s[Tr]=null}(c[Je],c);const m=f[dr];null!==m&&m.detachView(f[Je]),c[Cn]=null,c[zr]=null,c[It]&=-129}return c}function Cm(i,s){if(!(256&s[It])){const a=s[wt];s[Xa]&&Dl(s[Xa]),s[Bs]&&Dl(s[Bs]),a.destroyNode&&qh(i,s,a,3,null,null),function Dm(i){let s=i[Sr];if(!s)return eo(i[Je],i);for(;s;){let a=null;if(pr(s))a=s[Sr];else{const c=s[Ar];c&&(a=c)}if(!a){for(;s&&!s[zr]&&s!==i;)pr(s)&&eo(s[Je],s),s=s[Cn];null===s&&(s=i),pr(s)&&eo(s[Je],s),a=s&&s[zr]}s=a}}(s)}}function eo(i,s){if(!(256&s[It])){s[It]&=-129,s[It]|=256,function TC(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof We)){const f=a[c+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const I=l[f[m]],D=f[m+1];Bi(4,I,D);try{D.call(I)}finally{Bi(5,I,D)}}else{Bi(4,l,f);try{f.call(l)}finally{Bi(5,l,f)}}}}}(i,s),function Rw(i,s){const a=i.cleanup,c=s[Qa];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const m=a[f+3];m>=0?c[m]():c[-m].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[Qa]=null);const l=s[Vs];if(null!==l){s[Vs]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(i,s),1===s[Je].type&&s[wt].destroy();const a=s[gl];if(null!==a&&Br(s[Cn])){a!==s[Cn]&&bp(a,s);const c=s[dr];null!==c&&c.detachView(i)}!function Ip(i){Eu.delete(i[ys])}(s)}}function Tm(i,s,a){return function Sm(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[bn];{const{componentOffset:l}=c;if(l>-1){const{encapsulation:f}=i.data[c.directiveStart+l];if(f===Ui.None||f===Ui.Emulated)return null}return Mr(c,a)}}(i,s.parent,a)}function Uo(i,s,a,c,l){i.insertBefore(s,a,c,l)}function n_(i,s,a){i.appendChild(s,a)}function Am(i,s,a,c,l){null!==c?Uo(i,s,a,c,l):n_(i,s,a)}function nd(i,s){return i.parentNode(s)}let xm,Lm,Wh,i_=function Hh(i,s,a){return 40&i.type?Mr(i,a):null};function zh(i,s,a,c){const l=Tm(i,c,s),f=s[wt],I=function r_(i,s,a){return i_(i,s,a)}(c.parent||s[Tr],c,s);if(null!=l)if(Array.isArray(a))for(let D=0;D<a.length;D++)Am(f,l,a[D],I,!1);else Am(f,l,a,I,!1);void 0!==xm&&xm(f,c,s,a,l)}function Gh(i,s){if(null!==s){const a=s.type;if(3&a)return Mr(s,i);if(4&a)return Nm(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Gh(i,c);{const l=i[s.index];return Br(l)?Nm(-1,l):sn(l)}}if(32&a)return J(s,i)()||sn(i[s.index]);{const c=Cp(i,s);return null!==c?Array.isArray(c)?c[0]:Gh(je(i[Tn]),c):Gh(i,s.next)}}return null}function Cp(i,s){return null!==s?i[Tn][Tr].projection[s.projection]:null}function Nm(i,s){const a=Ar+i+1;if(a<s.length){const c=s[a],l=c[Je].firstChild;if(null!==l)return Gh(c,l)}return s[hr]}function Om(i,s,a,c,l,f,m){for(;null!=a;){const I=c[a.index],D=a.type;if(m&&0===s&&(I&&Gr(sn(I),c),a.flags|=2),32!=(32&a.flags))if(8&D)Om(i,s,a.child,c,l,f,!1),Ca(s,i,l,I,f);else if(32&D){const S=J(a,c);let x;for(;x=S();)Ca(s,i,l,x,f);Ca(s,i,l,I,f)}else 16&D?s_(i,s,c,a,l,f):Ca(s,i,l,I,f);a=m?a.projectionNext:a.next}}function qh(i,s,a,c,l,f){Om(a,c,i.firstChild,s,l,f,!1)}function s_(i,s,a,c,l,f){const m=a[Tn],D=m[Tr].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Ca(s,i,l,D[S],f);else{let S=D;const x=m[Cn];ss(c)&&(S.flags|=128),Om(i,s,S,x,l,f,!0)}}function o_(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function rd(i,s,a){const{mergedAttrs:c,classes:l,styles:f}=a;null!==c&&lo(i,s,c),null!==l&&o_(i,s,l),null!==f&&function Ow(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function a_(i){Lm=i}function ii(i){return function Fm(){if(void 0===Wh&&(Wh=null,rn.trustedTypes))try{Wh=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wh}()?.createScriptURL(i)||i}class Sp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function Ec(i){return i instanceof Sp?i.changingThisBreaksApplicationSecurity:i}function Mp(i,s){const a=function u_(i){return i instanceof Sp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ct})`)}return a===s}const si=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var xp=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(xp||{});function kt(i){const s=Ye();return s?s.sanitize(xp.URL,i)||"":Mp(i,"URL")?Ec(i):function Dc(i){return(i=String(i)).match(si)?i:"unsafe:"+i}(ee(i))}function sd(i){const s=Ye();if(s)return ii(s.sanitize(xp.RESOURCE_URL,i)||"");if(Mp(i,"ResourceURL"))return ii(Ec(i));throw new re(904,!1)}function on(i,s,a){return function Rp(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?sd:kt}(s,a)(i)}function Ye(){const i=Ae();return i&&i[ra].sanitizer}class un{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=at({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const od=new un("ENVIRONMENT_INITIALIZER"),bc=new un("INJECTOR",-1),zw=new un("INJECTOR_DEF_TYPES");class Yh{get(s,a=$e){if(a===$e){const c=new Error(`NullInjectorError: No provider for ${X(s)}!`);throw c.name="NullInjectorError",c}return a}}function Np(...i){return{\u0275providers:d_(0,i),\u0275fromNgModule:!0}}function d_(i,...s){const a=[],c=new Set;let l;const f=m=>{a.push(m)};return bs(s,m=>{const I=m;xi(I,f,[],c)&&(l||=[],l.push(I))}),void 0!==l&&h_(l,f),a}function h_(i,s){for(let a=0;a<i.length;a++){const{ngModule:c,providers:l}=i[a];$m(l,f=>{s(f,c)})}}function xi(i,s,a,c){if(!(i=Ne(i)))return!1;let l=null,f=hi(i);const m=!f&&qt(i);if(f||m){if(m&&!m.standalone)return!1;l=i}else{const D=i.ngModule;if(f=hi(D),!f)return!1;l=D}const I=c.has(l);if(m){if(I)return!1;if(c.add(l),m.dependencies){const D="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const S of D)xi(S,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let S;c.add(l);try{bs(f.imports,x=>{xi(x,s,a,c)&&(S||=[],S.push(x))})}finally{}void 0!==S&&h_(S,s)}if(!I){const S=vo(l)||(()=>new l);s({provide:l,useFactory:S,deps:Gt},l),s({provide:zw,useValue:l,multi:!0},l),s({provide:od,useValue:()=>Ct(l),multi:!0},l)}const D=f.providers;if(null!=D&&!I){const S=i;$m(D,x=>{s(x,S)})}}}return l!==i&&void 0!==i.providers}function $m(i,s){for(let a of i)Oe(a)&&(a=a.\u0275providers),Array.isArray(a)?$m(a,s):s(a)}const Ww=F({provide:String,useValue:F});function Aa(i){return null!==i&&"object"==typeof i&&Ww in i}function Ma(i){return"function"==typeof i}const f_=new un("Set Injector scope."),Cc={},Tc={};let p_;function xa(){return void 0===p_&&(p_=new Yh),p_}class $o{}class Qh extends $o{get destroyed(){return this._destroyed}constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zm(s,m=>this.processProvider(m)),this.records.set(bc,Ra(void 0,this)),l.has("environment")&&this.records.set($o,Ra(void 0,this));const f=this.records.get(f_);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(zw.multi,Gt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=nt(this),c=hn(void 0);try{return s()}finally{nt(a),hn(c)}}get(s,a=$e,c=_t.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Jo))return s[Jo](this);c=Qn(c);const f=nt(this),m=hn(void 0);try{if(!(c&_t.SkipSelf)){let D=this.records.get(s);if(void 0===D){const S=function UC(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&Zn(s);D=S&&this.injectableDefInScope(S)?Ra(g_(s),Cc):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(c&_t.Self?xa():this.parent).get(s,a=c&_t.Optional&&a===$e?null:a)}catch(I){if("NullInjectorError"===I.name){if((I[ft]=I[ft]||[]).unshift(X(s)),f)throw I;return function Yo(i,s,a,c){const l=i[ft];throw s[W]&&l.unshift(s[W]),i.message=function al(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=X(s);if(Array.isArray(s))l=s.map(X).join(" -> ");else if("object"==typeof s){let f=[];for(let m in s)if(s.hasOwnProperty(m)){let I=s[m];f.push(m+":"+("string"==typeof I?JSON.stringify(I):X(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(V,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[ft]=null,i}(I,s,"R3InjectorError",this.source)}throw I}finally{hn(m),nt(f)}}resolveInjectorInitializers(){const s=nt(this),a=hn(void 0);try{const l=this.get(od.multi,Gt,_t.Self);for(const f of l)f()}finally{nt(s),hn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(X(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(s){let a=Ma(s=Ne(s))?s:Ne(s&&s.provide);const c=function Ms(i){return Aa(i)?Ra(void 0,i.useValue):Ra(function Xh(i,s,a){let c;if(Ma(i)){const l=Ne(i);return vo(l)||g_(l)}if(Aa(i))c=()=>Ne(i.useValue);else if(function se(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Xt(i.deps||[]));else if(function Hm(i){return!(!i||!i.useExisting)}(i))c=()=>Ct(Ne(i.useExisting));else{const l=Ne(i&&(i.useClass||i.provide));if(!function Kw(i){return!!i.deps}(i))return vo(l)||g_(l);c=()=>new l(...Xt(i.deps))}return c}(i),Cc)}(s);if(Ma(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Ra(void 0,Cc,!0),l.factory=()=>Xt(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Cc&&(a.value=Tc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ri(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Ne(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function g_(i){const s=Zn(i),a=null!==s?s.factory:vo(i);if(null!==a)return a;if(i instanceof un)throw new re(204,!1);if(i instanceof Function)return function FC(i){const s=i.length;if(s>0)throw function yu(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new re(204,!1);const a=function Zr(i){return i&&(i[$n]||i[hs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new re(204,!1)}function Ra(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function zm(i,s){for(const a of i)Array.isArray(a)?zm(a,s):a&&Oe(a)?zm(a.\u0275providers,s):s(a)}const Ho=new un("AppId",{providedIn:"root",factory:()=>Zw}),Zw="ng",Op=new un("Platform Initializer"),Gm=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VC=new un("CSP nonce",{providedIn:"root",factory:()=>function Vo(){if(void 0!==Lm)return Lm;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Tu=(i,s,a)=>null;function ef(i,s,a=!1){return Tu(i,s,a)}class Su{}class Vp{}class Sc{resolveComponentFactory(s){throw function Zm(i){const s=Error(`No component factory found for ${X(i)}.`);return s.ngComponent=i,s}(s)}}let zo=(()=>{class i{static#e=this.NULL=new Sc}return i})();function Ym(){return xs(yr(),Ae())}function xs(i,s){return new us(Mr(i,s))}let us=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=Ym}return i})();function Bp(i){return i instanceof us?i.nativeElement:i}class Au{}let eE=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function nf(){const i=Ae(),a=xr(yr().index,i);return(pr(a)?a:i)[wt]}()}return i})(),E_=(()=>{class i{static#e=this.\u0275prov=at({token:i,providedIn:"root",factory:()=>null})}return i})();class jp{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ac=new jp("16.2.9"),$p={};function C_(i,s=null,a=null,c){const l=jn(i,s,a,c);return l.resolveInjectorInitializers(),l}function jn(i,s=null,a=null,c,l=new Set){const f=[a||Gt,Np(i)];return c=c||("object"==typeof i?void 0:X(i)),new Qh(f,s||xa(),c||null,l)}let ai=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=$e;static#t=this.NULL=new Yh;static create(a,c){if(Array.isArray(a))return C_({name:""},c,a,"");{const l=a.name??"";return C_({name:l},a.parent,a.providers,l)}}static#n=this.\u0275prov=at({token:i,providedIn:"any",factory:()=>Ct(bc)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function Mc(i){return i.ngOriginalError}class xc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Mc(s);for(;a&&Mc(a);)a=Mc(a);return a||null}}function zp(i){return s=>{setTimeout(i,void 0,s)}}const to=class rf extends v.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),m=c;if(s&&"object"==typeof s){const D=s;l=D.next?.bind(D),f=D.error?.bind(D),m=D.complete?.bind(D)}this.__isAsync&&(f=zp(f),l&&(l=zp(l)),m&&(m=zp(m)));const I=super.subscribe({next:l,error:f,complete:m});return s instanceof Z.w0&&s.add(I),I}};function S_(...i){}class Kr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function A_(){const i="function"==typeof rn.requestAnimationFrame;let s=rn[i?"requestAnimationFrame":"setTimeout"],a=rn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function qC(i){const s=()=>{!function GC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ty(i),i.isCheckStableRunning=!0,M_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ty(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,m,I)=>{if(function R_(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(I))return a.invokeTask(l,f,m,I);try{return sE(i),a.invokeTask(l,f,m,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),x_(i)}},onInvoke:(a,c,l,f,m,I,D)=>{try{return sE(i),a.invoke(l,f,m,I,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),x_(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,ty(i),M_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kr.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(Kr.isInAngularZone())throw new re(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,s,iE,S_,S_);try{return f.runTask(m,a,c)}finally{f.cancelTask(m)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const iE={};function M_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ty(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function x_(i){i._nesting--,M_(i)}class WC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const oE=new un("",{providedIn:"root",factory:aE});function aE(){const i=Pt(Kr);let s=!0;const a=new P.y(l=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{l.next(s),l.complete()})}),c=new P.y(l=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Kr.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,l.next(!0))})})});const m=i.onUnstable.subscribe(()=>{Kr.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,Y.T)(a,c.pipe((0,pe.B)()))}function Oa(i){return i instanceof Function?i():i}let Wp=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=at({token:i,providedIn:"root",factory:()=>new i})}return i})();function Rc(i){for(;i;){i[It]|=64;const s=je(i);if(sa(i)&&!s)return i;i=s}return null}const Oi=new un("",{providedIn:"root",factory:()=>!1});let Zp=null;function P_(i,s){return i[s]??fE()}function Go(i,s){const a=fE();a.producerNode?.length&&(i[s]=Zp,a.lView=i,Zp=af())}const hE={...Io,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Rc(i.lView)},lView:null};function af(){return Object.create(hE)}function fE(){return Zp??=af(),Zp}const Ft={};function Vt(i){pE(jt(),Ae(),Jn()+i,!1)}function pE(i,s,a,c){if(!c)if(3==(3&s[It])){const f=i.preOrderCheckHooks;null!==f&&ve(s,f,a)}else{const f=i.preOrderHooks;null!==f&&xo(s,f,0,a)}$i(a)}function Oc(i,s=_t.Default){const a=Ae();return null===a?Ct(i,s):fu(yr(),a,Ne(i),s)}function k_(){throw new Error("invalid")}function Yp(i,s,a,c,l,f,m,I,D,S,x){const L=s.blueprint.slice();return L[bn]=l,L[It]=140|c,(null!==S||i&&2048&i[It])&&(L[It]|=2048),lp(L),L[Cn]=L[ms]=i,L[Nn]=a,L[ra]=m||i&&i[ra],L[wt]=I||i&&i[wt],L[gs]=D||i&&i[gs]||null,L[Tr]=f,L[ys]=function Im(){return Jl++}(),L[bi]=x,L[vs]=S,L[Tn]=2==s.type?i[Tn]:L,L}function Ru(i,s,a,c,l){let f=i.data[s];if(null===f)f=function L_(i,s,a,c,l){const f=uc(),m=So(),D=i.data[s]=function uy(i,s,a,c,l,f){let m=s?s.injectorIndex:-1,I=0;return function Ji(){return null!==Et.skipHydrationRootTNode}()&&(I|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=D),null!==f&&(m?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,s,a,c,l),function hh(){return Et.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const m=function ha(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Hs(f,!0),f}function Qp(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function F_(i,s,a,c,l){const f=P_(s,Xa),m=Jn(),I=2&c;try{$i(-1),I&&s.length>Lt&&pE(i,s,Lt,!1),Bi(I?2:0,l);const S=I?f:null,x=eh(S);try{null!==S&&(S.dirty=!1),a(c,l)}finally{gr(S,x)}}finally{I&&null===s[Xa]&&Go(s,Xa),$i(m),Bi(I?3:1,l)}}function Pc(i,s,a){if(Qu(s)){const c=Jr(null);try{const f=s.directiveEnd;for(let m=s.directiveStart;m<f;m++){const I=i.data[m];I.contentQueries&&I.contentQueries(1,a[m],m)}}finally{Jr(c)}}}function Nu(i,s,a){Rr()&&(function B_(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;yo(a)&&function wE(i,s,a){const c=Mr(s,i),l=kc(a);let m=16;a.signals?m=4096:a.onPush&&(m=64);const I=Fc(i,Yp(i,l,null,m,c,s,null,i[ra].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=I}(s,a,i.data[l+a.componentOffset]),i.firstCreatePass||rs(a,s),Gr(c,s);const m=a.initialInputs;for(let I=l;I<f;I++){const D=i.data[I],S=Es(s,i,I,a);Gr(S,s),null!==m&&EE(0,I-l,S,D,0,m),Xr(D)&&(xr(a.index,s)[Nn]=Es(s,i,I,a))}}(i,s,a,Mr(a,s)),64==(64&a.flags)&&ly(i,s,a))}function oy(i,s,a=Mr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const m=c[f+1],I=-1===m?a(s,i):i[m];i[l++]=I}}}function kc(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ay(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function ay(i,s,a,c,l,f,m,I,D,S,x){const L=Lt+c,G=L+l,Q=function uf(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ft);return a}(L,G),_e="function"==typeof S?S():S;return Q[Je]={type:i,blueprint:Q,template:a,queries:null,viewQuery:I,declTNode:s,data:Q.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:D,consts:_e,incompleteFirstPass:!1,ssrId:x}}let cf=i=>null;function Xp(i,s,a,c){for(let l in i)if(i.hasOwnProperty(l)){a=null===a?{}:a;const f=i[l];null===c?U_(a,s,l,f):c.hasOwnProperty(l)&&U_(a,s,c[l],f)}return a}function U_(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function cy(i,s,a,c){if(Rr()){const l=null===c?null:{"":-1},f=function $_(i,s){const a=i.directiveRegistry;let c=null,l=null;if(a)for(let f=0;f<a.length;f++){const m=a[f];if(dl(s,m.selectors,!1))if(c||(c=[]),Xr(m))if(null!==m.findHostDirectiveDefs){const I=[];l=l||new Map,m.findHostDirectiveDefs(m,I,l),c.unshift(...I,m),H_(i,s,I.length)}else c.unshift(m),H_(i,s,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,c,l),c.push(m)}return null===c?null:[c,l]}(i,a);let m,I;null===f?m=I=null:[m,I]=f,null!==m&&V_(i,s,a,m,l,I),l&&function XC(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new re(-301,!1);c.push(s[l],f)}}}(a,c,l)}a.mergedAttrs=ho(a.mergedAttrs,a.attrs)}function V_(i,s,a,c,l,f){for(let S=0;S<c.length;S++)hu(rs(a,s),i,c[S].type);!function cn(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const x=c[S];x.providersResolver&&x.providersResolver(x)}let m=!1,I=!1,D=Qp(i,s,c.length,null);for(let S=0;S<c.length;S++){const x=c[S];a.mergedAttrs=ho(a.mergedAttrs,x.hostAttrs),IE(i,a,s,D,x),jr(D,x,l),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const L=x.type.prototype;!m&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),m=!0),!I&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),I=!0),D++}!function QC(i,s,a){const l=s.directiveEnd,f=i.data,m=s.attrs,I=[];let D=null,S=null;for(let x=s.directiveStart;x<l;x++){const L=f[x],G=a?a.get(L):null,_e=G?G.outputs:null;D=Xp(L.inputs,x,D,G?G.inputs:null),S=Xp(L.outputs,x,S,_e);const Ue=null===D||null===m||ea(s)?null:bE(D,x,m);I.push(Ue)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=I,s.inputs=D,s.outputs=S}(i,a,f)}function ly(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,m=function om(){return Et.lFrame.currentDirectiveIndex}();try{$i(f);for(let I=c;I<l;I++){const D=i.data[I],S=s[I];lc(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&j_(D,S)}}finally{$i(-1),lc(m)}}function j_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function H_(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function jr(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Xr(s)&&(a[""]=i)}}function IE(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=vo(l.type)),m=new We(f,Xr(l),Oc);i.blueprint[c]=m,a[c]=m,function _E(i,s,a,c,l){const f=l.hostBindings;if(f){let m=i.hostBindingOpCodes;null===m&&(m=i.hostBindingOpCodes=[]);const I=~s.index;(function df(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(m)!=I&&m.push(I),m.push(a,c,f)}}(i,s,c,Qp(i,a,l.hostVars,Ft),l)}function no(i,s,a,c,l,f){const m=Mr(i,s);!function hf(i,s,a,c,l,f,m){if(null==f)i.removeAttribute(s,l,a);else{const I=null==m?ee(f):m(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[wt],m,f,i.value,a,c,l)}function EE(i,s,a,c,l,f){const m=f[s];if(null!==m)for(let I=0;I<m.length;)DE(c,a,m[I++],m[I++],m[I++])}function DE(i,s,a,c,l){const f=Jr(null);try{const m=i.inputTransforms;null!==m&&m.hasOwnProperty(c)&&(l=m[c].call(s,l)),null!==i.setInput?i.setInput(s,l,a,c):s[c]=l}finally{Jr(f)}}function bE(i,s,a){let c=null,l=0;for(;l<a.length;){const f=a[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const m=i[f];for(let I=0;I<m.length;I+=2)if(m[I]===s){c.push(f,m[I+1],a[l+1]);break}}l+=2}else l+=2;else l+=4}return c}function z_(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function dy(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const m=i.data[f];gh(a[c]),m.contentQueries(2,s[f],f)}}}function Fc(i,s){return i[Sr]?i[Qf][zr]=s:i[Sr]=s,i[Qf]=s,s}function dd(i,s,a){gh(0);const c=Jr(null);try{s(i,a)}finally{Jr(c)}}function eg(i){return i[Qa]||(i[Qa]=[])}function G_(i){return i.cleanup||(i.cleanup=[])}function W_(i,s){const a=i[gs],c=a?a.get(xc,null):null;c&&c.handleError(s)}function K_(i,s,a,c,l){for(let f=0;f<a.length;){const m=a[f++],I=a[f++];DE(i.data[m],s[m],c,I,l)}}function ka(i,s,a){const c=function Co(i,s){return sn(s[i])}(s,i);!function Cu(i,s,a){i.setValue(s,a)}(i[wt],c,a)}function CE(i,s){const a=xr(s,i),c=a[Je];!function JC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const l=a[bn];null!==l&&null===a[bi]&&(a[bi]=ef(l,a[gs])),Z_(c,a,a[Nn])}function Z_(i,s,a){Nr(s);try{const c=i.viewQuery;null!==c&&dd(1,c,a);const l=i.template;null!==l&&F_(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&dy(i,s),i.staticViewQueries&&dd(2,i.viewQuery,a);const f=i.components;null!==f&&function eT(i,s){for(let a=0;a<s.length;a++)CE(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[It]&=-5,zn()}}let TE=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,l){const f=typeof Zone>"u"?null:Zone.current,m=function nm(i,s,a){const c=Object.create(rp);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=s;const l=m=>{c.cleanupFn=m};return c.ref={notify:()=>nu(c),run:()=>{if(c.dirty=!1,c.hasRun&&!El(c))return;c.hasRun=!0;const m=eh(c);try{c.cleanupFn(),c.cleanupFn=Al,c.fn(l)}finally{gr(c,m)}},cleanup:()=>c.cleanupFn()},c.ref}(a,S=>{this.all.has(S)&&this.queue.set(S,f)},l);let I;this.all.add(m),m.notify();const D=()=>{m.cleanup(),I?.(),this.all.delete(m),this.queue.delete(m)};return I=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=at({token:i,providedIn:"root",factory:()=>new i})}return i})();function Ou(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let m=0;m<s.length;m++){const I=s[m];"number"==typeof I?f=I:1==f?l=Le(l,I):2==f&&(c=Le(c,I+": "+s[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function ff(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];null!==f&&c.push(sn(f)),Br(f)&&SE(f,c);const m=a.type;if(8&m)ff(i,s,a.child,c);else if(32&m){const I=J(a,s);let D;for(;D=I();)c.push(D)}else if(16&m){const I=Cp(s,a);if(Array.isArray(I))c.push(...I);else{const D=je(s[Tn]);ff(D[Je],D,I,c,!0)}}a=l?a.projectionNext:a.next}return c}function SE(i,s){for(let a=Ar;a<i.length;a++){const c=i[a],l=c[Je].firstChild;null!==l&&ff(c[Je],c,l,s)}i[hr]!==i[bn]&&s.push(i[hr])}function sr(i,s,a,c=!0){const l=s[ra],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{pf(i,s,i.template,a)}catch(D){throw c&&W_(s,D),D}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function pf(i,s,a,c){const l=s[It];if(256!=(256&l)){s[ra].effectManager?.flush(),Nr(s);try{lp(s),function dh(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&F_(i,s,a,2,c);const m=3==(3&l);if(m){const S=i.preOrderCheckHooks;null!==S&&ve(s,S,null)}else{const S=i.preOrderHooks;null!==S&&xo(s,S,0,null),Ws(s,0)}if(function Q_(i){for(let s=yn(i);null!==s;s=vi(s)){if(!s[Yu])continue;const a=s[fr];for(let c=0;c<a.length;c++){Rl(a[c])}}}(s),qo(s,2),null!==i.contentQueries&&dy(i,s),m){const S=i.contentCheckHooks;null!==S&&ve(s,S)}else{const S=i.contentHooks;null!==S&&xo(s,S,1),Ws(s,1)}!function gE(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=P_(s,Bs);try{for(let l=0;l<a.length;l++){const f=a[l];if(f<0)$i(~f);else{const m=f,I=a[++l],D=a[++l];cc(I,m),c.dirty=!1;const S=eh(c);try{D(2,s[m])}finally{gr(c,S)}}}}finally{null===s[Bs]&&Go(s,Bs),$i(-1)}}(i,s);const I=i.components;null!==I&&X_(s,I,0);const D=i.viewQuery;if(null!==D&&dd(2,D,c),m){const S=i.viewCheckHooks;null!==S&&ve(s,S)}else{const S=i.viewHooks;null!==S&&xo(s,S,2),Ws(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[It]&=-73,rc(s)}finally{zn()}}}function qo(i,s){for(let a=yn(i);null!==a;a=vi(a))for(let c=Ar;c<a.length;c++)gf(a[c],s)}function xE(i,s,a){gf(xr(s,i),a)}function gf(i,s){if(!function da(i){return 128==(128&i[It])}(i))return;const a=i[Je],c=i[It];if(80&c&&0===s||1024&c||2===s)pf(a,i,a.template,i[Nn]);else if(i[po]>0){qo(i,1);const l=a.components;null!==l&&X_(i,l,1)}}function X_(i,s,a){for(let c=0;c<s.length;c++)xE(i,s[c],a)}class mf{get rootNodes(){const s=this._lView,a=s[Je];return ff(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(s){this._lView[Nn]=s}get destroyed(){return 256==(256&this._lView[It])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Cn];if(Br(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(td(s,c),fp(a,c))}this._attachedToViewContainer=!1}Cm(this._lView[Je],this._lView)}onDestroy(s){!function _n(i,s){if(256==(256&i[It]))throw new re(911,!1);null===i[Vs]&&(i[Vs]=[]),i[Vs].push(s)}(this._lView,s)}markForCheck(){Rc(this._cdRefInjectingView||this._lView)}detach(){this._lView[It]&=-129}reattach(){this._lView[It]|=128}detectChanges(){sr(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dp(i,s){qh(i,s,s[wt],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=s}}class RE extends mf{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;sr(s[Je],s,s[Nn],!1)}checkNoChanges(){}get context(){return null}}class NE extends zo{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=qt(s);return new ng(a,this.ngModule)}}function OE(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class J_{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=Qn(c);const l=this.injector.get(s,$p,c);return l!==$p||a===$p?l:this.parentInjector.get(s,a,c)}}class ng extends Vp{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=OE(s.inputs);if(null!==a)for(const l of c)a.hasOwnProperty(l.propName)&&(l.transform=a[l.propName]);return c}get outputs(){return OE(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Wd(i){return i.map(qd).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof $o?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new J_(s,f):s,I=m.get(Au,null);if(null===I)throw new re(407,!1);const L={rendererFactory:I,sanitizer:m.get(E_,null),effectManager:m.get(TE,null),afterRenderEventManager:m.get(Wp,null)},G=I.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",_e=c?function mE(i,s,a,c){const f=c.get(Oi,!1)||a===Ui.ShadowDom,m=i.selectRootElement(s,f);return function yE(i){cf(i)}(m),m}(G,c,this.componentDef.encapsulation,m):wn(G,Q,function tg(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(Q)),ht=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Re=null;null!==_e&&(Re=ef(_e,m,!0));const xt=ay(0,null,null,1,0,null,null,null,null,null,null),Ht=Yp(null,xt,null,ht,null,null,L,G,m,null,Re);let Bt,di;Nr(Ht);try{const or=this.componentDef;let uo,Hg=null;or.findHostDirectiveDefs?(uo=[],Hg=new Map,or.findHostDirectiveDefs(or,uo,Hg),uo.push(or)):uo=[or];const gA=function e0(i,s){const a=i[Je],c=Lt;return i[c]=s,Ru(a,c,2,"#host",null)}(Ht,_e),mA=function kE(i,s,a,c,l,f,m){const I=l[Je];!function tT(i,s,a,c){for(const l of i)s.mergedAttrs=ho(s.mergedAttrs,l.hostAttrs);null!==s.mergedAttrs&&(Ou(s,s.mergedAttrs,!0),null!==a&&rd(c,a,s))}(c,i,s,m);let D=null;null!==s&&(D=ef(s,l[gs]));const S=f.rendererFactory.createRenderer(s,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const L=Yp(l,kc(a),null,x,l[i.index],i,f,S,null,null,D);return I.firstCreatePass&&H_(I,i,c.length-1),Fc(l,L),l[i.index]=L}(gA,_e,or,uo,Ht,L,G);di=xl(xt,Lt),_e&&function nT(i,s,a,c){if(c)lo(i,a,["ng-version",Ac.full]);else{const{attrs:l,classes:f}=function Ei(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!Qr(l))break;l=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);l&&lo(i,a,l),f&&f.length>0&&o_(i,a,f.join(" "))}}(G,or,_e,c),void 0!==a&&function rT(i,s,a){const c=i.projection=[];for(let l=0;l<s.length;l++){const f=a[l];c.push(null!=f?Array.from(f):null)}}(di,this.ngContentSelectors,a),Bt=function LE(i,s,a,c,l,f){const m=yr(),I=l[Je],D=Mr(m,l);V_(I,l,m,a,null,c);for(let x=0;x<a.length;x++)Gr(Es(l,I,m.directiveStart+x,m),l);ly(I,l,m),D&&Gr(D,l);const S=Es(l,I,m.directiveStart+m.componentOffset,m);if(i[Nn]=l[Nn]=S,null!==f)for(const x of f)x(S,s);return Pc(I,m,i),S}(mA,or,uo,Hg,Ht,[iT]),Z_(xt,Ht,null)}finally{zn()}return new PE(this.componentType,Bt,xs(di,Ht),Ht,di)}}class PE extends Su{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new RE(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;K_(f[Je],f,l,s,a),this.previousInputValues.set(s,a),Rc(xr(this._tNode.index,f))}}get injector(){return new In(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function iT(){const i=yr();fa(Ae()[Je],i)}function my(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const l=s[c];Array.isArray(l)&&l[2]&&(a[c]=l[2])}i.inputTransforms=a}function ig(i){return!!yy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function yy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Pi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function t0(i,s,a,c){const l=Ae();return Pi(l,Ao(),s)&&(jt(),no($t(),l,i,s,a,c)),t0}function u0(i,s,a,c,l,f,m,I){const D=Ae(),S=jt(),x=i+Lt,L=S.firstCreatePass?function fT(i,s,a,c,l,f,m,I,D){const S=s.consts,x=Ru(s,i,4,m||null,ei(S,I));cy(s,a,x,ei(S,D)),fa(s,x);const L=x.tView=ay(2,x,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S,null);return null!==s.queries&&(s.queries.template(s,x),L.queries=s.queries.embeddedTView(x)),x}(x,S,D,s,a,c,l,f,m):S.data[x];Hs(L,!1);const G=JE(S,D,L,i);Mo()&&zh(S,D,G,L),Gr(G,D),Fc(D,D[x]=z_(G,D,G,L)),pi(L)&&Nu(S,D,L),null!=m&&oy(D,L,I)}let JE=function eD(i,s,a,c){return er(!0),s[wt].createComment("")};function tD(i){return function To(i,s){return i[s]}(function dp(){return Et.lFrame.contextLView}(),Lt+i)}function l0(i,s,a){const c=Ae();return Pi(c,Ao(),s)&&function Ns(i,s,a,c,l,f,m,I){const D=Mr(s,a);let x,S=s.inputs;!I&&null!=S&&(x=S[c])?(K_(i,a,x,c,l),yo(s)&&function vE(i,s){const a=xr(s,i);16&a[It]||(a[It]|=64)}(a,s.index)):3&s.type&&(c=function Jp(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=m?m(l,s.value||"",c):l,f.setProperty(D,c,l))}(jt(),$t(),c,i,s,c[wt],a,!1),l0}function d0(i,s,a,c,l){const m=l?"class":"style";K_(i,a,s.inputs[m],m,c)}function Ay(i,s,a,c){const l=Ae(),f=jt(),m=Lt+i,I=l[wt],D=f.firstCreatePass?function h0(i,s,a,c,l,f){const m=s.consts,D=Ru(s,i,2,c,ei(m,l));return cy(s,a,D,ei(m,f)),null!==D.attrs&&Ou(D,D.attrs,!1),null!==D.mergedAttrs&&Ou(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(m,f,l,s,a,c):f.data[m],S=nD(f,l,D,I,s,i);l[m]=S;const x=pi(D);return Hs(D,!0),rd(I,S,D),32!=(32&D.flags)&&Mo()&&zh(f,l,S,D),0===function ic(){return Et.lFrame.elementDepthCount}()&&Gr(S,l),function mr(){Et.lFrame.elementDepthCount++}(),x&&(Nu(f,l,D),Pc(f,D,l)),null!==c&&oy(l,D),Ay}function yd(){let i=yr();So()?function Pl(){Et.lFrame.isParent=!1}():(i=i.parent,Hs(i,!1));const s=i;(function Nl(i){return Et.skipHydrationRootTNode===i})(s)&&function Ol(){Et.skipHydrationRootTNode=null}(),function lh(){Et.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(fa(a,i),Qu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function _h(i){return 0!=(8&i.flags)}(s)&&d0(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ih(i){return 0!=(16&i.flags)}(s)&&d0(a,s,Ae(),s.stylesWithoutHost,!1),yd}function Ef(i,s,a,c){return Ay(i,s,a,c),yd(),Ef}let nD=(i,s,a,c,l,f)=>(er(!0),wn(c,l,function Ll(){return Et.lFrame.currentNamespace}()));function g0(){return Ae()}function Ry(i){return!!i&&"function"==typeof i.then}function Ny(i){return!!i&&"function"==typeof i.subscribe}function m0(i,s,a,c){const l=Ae(),f=jt(),m=yr();return function v0(i,s,a,c,l,f,m){const I=pi(c),S=i.firstCreatePass&&G_(i),x=s[Nn],L=eg(s);let G=!0;if(3&c.type||m){const Ue=Mr(c,s),et=m?m(Ue):Ue,ht=L.length,Re=m?Ht=>m(sn(Ht[c.index])):c.index;let xt=null;if(!m&&I&&(xt=function mT(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===a&&l[f+1]===c){const I=s[Qa],D=l[f+2];return I.length>D?I[D]:null}"string"==typeof m&&(f+=2)}return null}(i,s,l,c.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=f,xt.__ngLastListenerFn__=f,G=!1;else{f=_d(c,s,x,f,!1);const Ht=a.listen(et,l,f);L.push(f,Ht),S&&S.push(l,Re,ht,ht+1)}}else f=_d(c,s,x,f,!1);const Q=c.outputs;let _e;if(G&&null!==Q&&(_e=Q[l])){const Ue=_e.length;if(Ue)for(let et=0;et<Ue;et+=2){const Bt=s[_e[et]][_e[et+1]].subscribe(f),di=L.length;L.push(f,Bt),S&&S.push(l,c.index,di,-(di+1))}}}(f,l,l[wt],m,i,s,c),m0}function sD(i,s,a,c){try{return Bi(6,s,a),!1!==a(c)}catch(l){return W_(i,l),!1}finally{Bi(7,s,a)}}function _d(i,s,a,c,l){return function f(m){if(m===Function)return c;Rc(i.componentOffset>-1?xr(i.index,s):s);let D=sD(s,a,c,m),S=f.__ngNextListenerFn__;for(;S;)D=sD(s,a,S,m)&&D,S=S.__ngNextListenerFn__;return l&&!1===D&&m.preventDefault(),D}}function Id(i=1){return function Gs(i){return(Et.lFrame.contextLView=function cu(i,s){for(;i>0;)s=s[ms],i--;return s}(i,Et.lFrame.contextLView))[Nn]}(i)}function ED(i,s=""){const a=Ae(),c=jt(),l=i+Lt,f=c.firstCreatePass?Ru(c,l,1,s,null):c.data[l],m=By(c,a,f,s,i);a[l]=m,Mo()&&zh(c,a,m,f),Hs(f,!1)}let By=(i,s,a,c,l)=>(er(!0),function Js(i,s){return i.createText(s)}(s[wt],c));function P0(i){return gg("",i,""),P0}function gg(i,s,a){const c=Ae(),l=function io(i,s,a,c){return Pi(i,Ao(),a)?s+ee(a)+c:Ft}(c,i,s,a);return l!==Ft&&ka(c,Jn(),l),gg}const Td=void 0;var ND=["en",[["a","p"],["AM","PM"],Td],[["AM","PM"],Td,Td],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Td,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Td,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Td,"{1} 'at' {0}",Td],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function z0(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Kc={};function G0(i){const s=function OT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Zy(s);if(a)return a;const c=s.split("-")[0];if(a=Zy(c),a)return a;if("en"===c)return ND;throw new re(701,!1)}function PD(i){return G0(i)[Zc.PluralCase]}function Zy(i){return i in Kc||(Kc[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),Kc[i]}var Zc=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Zc||{});const Yc="en-US";let Fa=Yc;class Nd{}class ob{}function YT(i,s){return new pI(i,s??null,[])}class pI extends Nd{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NE(this);const l=Hr(s);this._bootstrapComponents=Oa(l.bootstrap),this._r3Injector=jn(s,a,[{provide:Nd,useValue:this},{provide:zo,useValue:this.componentFactoryResolver},...c],X(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class gI extends ob{constructor(s){super(),this.moduleType=s}create(s){return new pI(this.moduleType,s,[])}}class Ff extends Nd{constructor(s){super(),this.componentFactoryResolver=new NE(this),this.instance=null;const a=new Qh([...s.providers,{provide:Nd,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],s.parent||xa(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function ub(i,s,a=null){return new Ff({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let Va=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=d_(0,a.type),l=c.length>0?ub([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,l)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=at({token:i,providedIn:"environment",factory:()=>new i(Ct($o))})}return i})();function Ba(i){i.getStandaloneInjector=s=>s.get(Va).getOrCreateStandaloneInjector(i)}function av(i,s,a,c){return function II(i,s,a,c,l,f){const m=s+a;return Pi(i,m,l)?function cs(i,s,a){return i[s]=a}(i,m+1,f?c.call(f,l):c(l)):function Jc(i,s){const a=i[s];return a===Ft?void 0:a}(i,m+1)}(Ae(),function ti(){const i=Et.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),i,s,a,c)}function lv(){return this._results[Symbol.iterator]()}class bI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new to)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=bI.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=lv)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=function ln(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function mn(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function rS(i,s,a,c=!0){const l=s[Je];if(function bm(i,s,a,c){const l=Ar+c,f=a.length;c>0&&(a[l-1][zr]=s),c<f-Ar?(s[zr]=a[l],Th(a,Ar+c,s)):(a.push(s),s[zr]=null),s[Cn]=a;const m=s[gl];null!==m&&a!==m&&function $h(i,s){const a=i[fr];s[Tn]!==s[Cn][Cn][Tn]&&(i[Yu]=!0),null===a?i[fr]=[s]:a.push(s)}(m,s);const I=s[dr];null!==I&&I.insertView(i),s[It]|=128}(l,s,i,a),c){const f=Nm(a,i),m=s[wt],I=nd(m,i[hr]);null!==I&&function Em(i,s,a,c,l,f){c[bn]=l,c[Tr]=s,qh(i,c,a,1,l,f)}(l,i[Tr],m,s,I,f)}}let el=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=_b}return i})();const iS=el,sS=class extends iS{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,c){const l=function nS(i,s,a,c){const l=s.tView,I=Yp(i,l,a,4096&i[It]?4096:16,null,s,null,null,null,c?.injector??null,c?.hydrationInfo??null);I[gl]=i[s.index];const S=i[dr];return null!==S&&(I[dr]=S.createEmbeddedView(l)),Z_(l,I,a),I}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:c});return new mf(l)}};function _b(){return Tg(yr(),Ae())}function Tg(i,s){return 4&i.type?new sS(s,i,xs(i,s)):null}let MI=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=uM}return i})();function uM(){return Db(yr(),Ae())}const kd=MI,ja=class extends kd{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new In(this._hostTNode,this._hostLView)}get parentInjector(){const s=Zs(this._hostTNode,this._hostLView);if(du(s)){const a=An(s,this._hostLView),c=Gn(s);return new In(a[Je].data[c+8],a)}return new In(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=jf(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-Ar}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const I=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(I,l,false),I}createComponent(s,a,c,l,f){const m=s&&!function Or(i){return"function"==typeof i}(s);let I;if(m)I=a;else{const Ue=a||{};I=Ue.index,c=Ue.injector,l=Ue.projectableNodes,f=Ue.environmentInjector||Ue.ngModuleRef}const D=m?s:new ng(qt(s)),S=c||this.parentInjector;if(!f&&null==D.ngModule){const et=(m?S:this.parentInjector).get($o,null);et&&(f=et)}qt(D.componentType??{});const Q=D.create(S,l,null,f);return this.insertImpl(Q.hostView,I,false),Q}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const l=s._lView;if(function cp(i){return Br(i[Cn])}(l)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const S=l[Cn],x=new ja(S,S[Tr],S[Cn]);x.detach(x.indexOf(s))}}const m=this._adjustIndex(a),I=this._lContainer;return rS(I,l,m,!c),s.attachToViewContainerRef(),Th($a(I),m,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=jf(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=td(this._lContainer,a);c&&(fp($a(this._lContainer),a),Cm(c[Je],c))}detach(s){const a=this._adjustIndex(s,-1),c=td(this._lContainer,a);return c&&null!=fp($a(this._lContainer),a)?new mf(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function jf(i){return i[8]}function $a(i){return i[8]||(i[8]=[])}function Db(i,s){let a;const c=s[i.index];return Br(c)?a=c:(a=z_(c,s,null,i),s[i.index]=a,Fc(s,a)),Cb(a,s,i,c),new ja(a,i,s)}let Cb=function Bu(i,s,a,c){if(i[hr])return;let l;l=8&a.type?sn(c):function bb(i,s){const a=i[wt],c=a.createComment(""),l=Mr(s,i);return Uo(a,nd(a,l),c,function AC(i,s){return i.nextSibling(s)}(a,l),!1),c}(s,a),i[hr]=l};class xI{constructor(s){this.queryList=s,this.matches=null}clone(){return new xI(this.queryList)}setDirty(){this.queryList.setDirty()}}class RI{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const m=a.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new RI(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==gS(s,a).matches&&this.queries[a].setDirty()}}class Tb{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class hv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new hv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class fv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new fv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,uS(a,f)),this.matchTNodeWithReadOption(s,a,pu(a,s,f,!1,!1))}else c===el?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,pu(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===us||l===MI||l===el&&4&a.type)this.addMatch(a.index,-2);else{const f=pu(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function uS(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Sb(i,s,a,c){return-1===a?function cS(i,s){return 11&i.type?xs(i,s):4&i.type?Tg(i,s):null}(s,i):-2===a?function lS(i,s,a){return a===us?xs(s,i):a===el?Tg(s,i):a===MI?Db(s,i):void 0}(i,s,c):Es(i,i[Je],a,s)}function Ld(i,s,a,c){const l=s[dr].queries[c];if(null===l.matches){const f=i.data,m=a.matches,I=[];for(let D=0;D<m.length;D+=2){const S=m[D];I.push(S<0?null:Sb(s,f[S],m[D+1],a.metadata.read))}l.matches=I}return l.matches}function Ag(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const m=Ld(i,s,l,a);for(let I=0;I<f.length;I+=2){const D=f[I];if(D>0)c.push(m[I/2]);else{const S=f[I+1],x=s[-D];for(let L=Ar;L<x.length;L++){const G=x[L];G[gl]===G[Cn]&&Ag(G[Je],G,S,c)}if(null!==x[fr]){const L=x[fr];for(let G=0;G<L.length;G++){const Q=L[G];Ag(Q[Je],Q,S,c)}}}}}return c}function dS(i){const s=Ae(),a=jt(),c=dc();gh(c+1);const l=gS(a,c);if(i.dirty&&function up(i){return 4==(4&i[It])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?Ag(a,s,c,[]):Ld(a,s,l,c);i.reset(f,Bp),i.notifyOnChanges()}return!0}return!1}function Ab(i,s,a,c){const l=jt();if(l.firstCreatePass){const f=yr();(function pS(i,s,a){null===i.queries&&(i.queries=new hv),i.queries.track(new fv(s,a))})(l,new Tb(s,a,c),f.index),function cM(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function xb(i,s,a){const c=new bI(4==(4&a));(function ir(i,s,a,c){const l=eg(s);l.push(a),i.firstCreatePass&&G_(i).push(c,l.length-1)})(i,s,c,c.destroy),null===s[dr]&&(s[dr]=new RI),s[dr].queries.push(new xI(c))}(l,Ae(),a)}function Mb(){return function fS(i,s){return i[dr].queries[s].queryList}(Ae(),dc())}function gS(i,s){return i.queries.getByIndex(s)}function NI(i){return!!Hr(i)}const Hu=new un("Application Initializer");let Bd=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Pt(Hu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const l of this.appInits){const f=l();if(Ry(f))a.push(f);else if(Ny(f)){const m=new Promise((I,D)=>{f.subscribe({complete:I,error:D})});a.push(m)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Fg=new un("LocaleId",{providedIn:"root",factory:()=>Pt(Fg,_t.Optional|_t.SkipSelf)||function $I(){return typeof $localize<"u"&&$localize.locale||Yc}()}),pv=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let gv=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class EM{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let DM=(()=>{class i{compileModuleSync(a){return new gI(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Oa(Hr(a).declarations).reduce((m,I)=>{const D=qt(I);return D&&m.push(new ng(D)),m},[]);return new EM(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const vv=new un(""),Vg=new un("");let ZI,_v=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ZI||(function LS(i){ZI=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Kr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Ct(Kr),Ct(Iv),Ct(Vg))};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac})}return i})(),Iv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return ZI?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),zu=null;const zb=new un("AllowMultipleToken"),YI=new un("PlatformDestroyListeners"),jd=new un("appBootstrapListener");class US{constructor(s,a){this.name=s,this.token=a}}function ew(i,s,a=[]){const c=`Platform: ${s}`,l=new un(c);return(f=[])=>{let m=rw();if(!m||m.injector.get(zb,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function VS(i){if(zu&&!zu.get(zb,!1))throw new re(400,!1);(function XI(){!function tp(i){rh=i}(()=>{throw new re(600,!1)})})(),zu=i;const s=i.get(Ev);(function JI(i){i.get(Op,null)?.forEach(a=>a())})(i)}(function nw(i=[],s){return ai.create({name:s,providers:[{provide:f_,useValue:"platform"},{provide:YI,useValue:new Set([()=>zu=null])},...i]})}(I,c))}return function tw(i){const s=rw();if(!s)throw new re(401,!1);return s}()}}function rw(){return zu?.get(Ev)??null}let Ev=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function jS(i="zone.js",s){return"noop"===i?new WC:"zone.js"===i?new Kr(s):i}(c?.ngZone,function Dv(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return l.run(()=>{const f=function ab(i,s,a){return new pI(i,s,a)}(a.moduleType,this.injector,function iw(i){return[{provide:Kr,useFactory:i},{provide:od,multi:!0,useFactory:()=>{const s=Pt(Tv,{optional:!0});return()=>s.initialize()}},{provide:Kb,useFactory:$S},{provide:oE,useFactory:aE}]}(()=>l)),m=f.injector.get(xc,null);return l.runOutsideAngular(()=>{const I=l.onError.subscribe({next:D=>{m.handleError(D)}});f.onDestroy(()=>{zf(this._modules,f),I.unsubscribe()})}),function bv(i,s,a){try{const c=a();return Ry(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(m,l,()=>{const I=f.injector.get(Bd);return I.runInitializers(),I.donePromise.then(()=>(function Yy(i){Qe(i,"Expected localeId to be defined"),"string"==typeof i&&(Fa=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Fg,Yc)||Yc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const l=Cv({},c);return function Gb(i,s,a){const c=new gI(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(rl);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new re(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(YI,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Ct(ai))};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Cv(i,s){return Array.isArray(s)?s.reduce(Cv,i):{...i,...s}}let rl=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pt(Kb),this.zoneIsStable=Pt(oE),this.componentTypes=[],this.components=[],this.isStable=Pt(gv).hasPendingTasks.pipe((0,Me.w)(a=>a?(0,fe.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,pe.B)()),this._injector=Pt($o)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof Vp;if(!this._injector.get(Bd).done)throw!l&&Us(a),new re(405,!1);let m;m=l?a:this._injector.get(zo).resolveComponentFactory(a),this.componentTypes.push(m.componentType);const I=function FS(i){return i.isBoundToModule}(m)?void 0:this._injector.get(Nd),S=m.create(ai.NULL,[],c||m.selector,I),x=S.location.nativeElement,L=S.injector.get(vv,null);return L?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),zf(this.components,S),L?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;zf(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(jd,[]);c.push(...this._bootstrapListeners),c.forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>zf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function zf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const Kb=new un("",{providedIn:"root",factory:()=>Pt(xc).handleError.bind(void 0)});function $S(){const i=Pt(Kr),s=Pt(xc);return a=>i.runOutsideAngular(()=>s.handleError(a))}let Tv=(()=>{class i{constructor(){this.zone=Pt(Kr),this.applicationRef=Pt(rl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ow(){return!1}let Gf=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Qb}return i})();function Qb(i){return function zS(i,s,a){if(yo(i)&&!a){const c=xr(i.index,s);return new mf(c,c)}return 47&i.type?new mf(s[Tn],s):null}(yr(),Ae(),16==(16&i))}class Xb{constructor(){}supports(s){return ig(s)}create(s){return new UM(s)}}const FM=(i,s)=>s;class UM{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||FM}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const m=!c||a&&a.currentIndex<Jb(c,l,f)?a:c,I=Jb(m,l,f),D=m.currentIndex;if(m===c)l--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)l++;else{f||(f=[]);const S=I-l,x=D-l;if(S!=x){for(let G=0;G<S;G++){const Q=G<f.length?f[G]:f[G]=0,_e=Q+G;x<=_e&&_e<S&&(f[G]=Q+1)}f[m.previousIndex]=x-S}}I!==D&&s(m,I,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ig(s))throw new re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,m,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],m=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,f,m,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,m,I),c=!0),a=a._next}else l=0,function jE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{m=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,I,m,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,m,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new dw(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new YS),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YS),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class dw{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VM{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class YS{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new VM,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jb(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class hw{constructor(){}supports(s){return s instanceof Map||yy(s)}create(){return new QS}}class QS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||yy(s)))throw new re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const c=new eC(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class eC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nv(){return new jg([new Xb])}let jg=(()=>{class i{static#e=this.\u0275prov=at({token:i,providedIn:"root",factory:Nv});constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Nv()),deps:[[i,new mc,new $l]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new re(901,!1)}}return i})();function Ov(){return new tC([new hw])}let tC=(()=>{class i{static#e=this.\u0275prov=at({token:i,providedIn:"root",factory:Ov});constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Ov()),deps:[[i,new mc,new $l]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new re(901,!1)}}return i})();const HM=ew(null,"core",[]);let zM=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Ct(rl))};static#t=this.\u0275mod=Za({type:i});static#n=this.\u0275inj=vn({})}return i})();function aA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function pA(i){const s=qt(i);if(!s)return null;const a=new ng(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3399:(ot,be,O)=>{O.d(be,{Z:()=>Ke});var v=O(9058),Z=O(4537),P=O(7592),Y=O(7879);class ne{constructor(qe,Oe){this._delegate=qe,this.firebase=Oe,(0,P._addComponent)(qe,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(qe,Oe=P._DEFAULT_ENTRY_NAME){var ut;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(qe);return!ct.isInitialized()&&"EXPLICIT"===(null===(ut=ct.getComponent())||void 0===ut?void 0:ut.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Oe})}_removeServiceInstance(qe,Oe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Oe)}_addComponent(qe){(0,P._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,P._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),F=function ue(){const Ne=function Me(Ne){const qe={},Oe={__esModule:!0,initializeApp:function re(Pe,oe={}){const q=P.initializeApp(Pe,oe);if((0,v.r3)(qe,q.name))return qe[q.name];const Be=new Ne(q,Oe);return qe[q.name]=Be,Be},app:ct,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ee(Pe){const oe=Pe.name,q=oe.replace("-compat","");if(P._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Be=(dt=ct())=>{if("function"!=typeof dt[q])throw pe.create("invalid-app-argument",{appName:oe});return dt[q]()};void 0!==Pe.serviceProps&&(0,v.ZB)(Be,Pe.serviceProps),Oe[q]=Be,Ne.prototype[q]=function(...dt){return this._getService.bind(this,oe).apply(this,Pe.multipleInstances?dt:[])}}return"PUBLIC"===Pe.type?Oe[q]:null},removeApp:function ut(Pe){delete qe[Pe]},useAsService:function we(Pe,oe){return"serverAuth"===oe?null:oe},modularAPIs:P}};function ct(Pe){if(!(0,v.r3)(qe,Pe=Pe||P._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Pe});return qe[Pe]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Ie(){return Object.keys(qe).map(Pe=>qe[Pe])}}),ct.App=Ne,Oe}(ne);return Ne.INTERNAL=Object.assign(Object.assign({},Ne.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function qe(Oe){(0,v.ZB)(Ne,Oe)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Ne}(),j=new Y.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=F;!function Te(Ne){(0,P.registerVersion)("@firebase/app-compat","0.2.13",Ne)}()},7592:(ot,be,O)=>{O.r(be),O.d(be,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>vn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Ee,_addOrOverwriteComponent:()=>Se,_apps:()=>he,_clearComponents:()=>mt,_components:()=>me,_getProvider:()=>ze,_registerComponent:()=>Qe,_removeServiceInstance:()=>Fn,deleteApp:()=>Zr,getApp:()=>an,getApps:()=>kr,initializeApp:()=>Zn,onLog:()=>Yr,registerVersion:()=>$n,setLogLevel:()=>hs});var v=O(5861),Z=O(4537),P=O(7879),Y=O(9058),ne=O(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Me="@firebase/app",F=new P.Yd("@firebase/app"),ie="[DEFAULT]",le={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ee(ye,H){try{ye.container.addComponent(H)}catch(ge){F.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Se(ye,H){ye.container.addOrOverwriteComponent(H)}function Qe(ye){const H=ye.name;if(me.has(H))return F.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ee(ge,ye);return!0}function ze(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}function Fn(ye,H,ge=ie){ze(ye,H).clearInstance(ge)}function mt(){me.clear()}const at=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(H,ge,$e){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=$e,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}const vn="9.23.0";function Zn(ye,H={}){let ge=ye;"object"!=typeof H&&(H={name:H});const $e=Object.assign({name:ie,automaticDataCollectionEnabled:!1},H),Xe=$e.name;if("string"!=typeof Xe||!Xe)throw at.create("bad-app-name",{appName:String(Xe)});if(ge||(ge=(0,Y.aH)()),!ge)throw at.create("no-options");const ft=he.get(Xe);if(ft){if((0,Y.vZ)(ge,ft.options)&&(0,Y.vZ)($e,ft.config))return ft;throw at.create("duplicate-app",{appName:Xe})}const en=new Z.H0(Xe);for(const U of me.values())en.addComponent(U);const V=new gn(ge,$e,en);return he.set(Xe,V),V}function an(ye=ie){const H=he.get(ye);if(!H&&ye===ie&&(0,Y.aH)())return Zn();if(!H)throw at.create("no-app",{appName:ye});return H}function kr(){return Array.from(he.values())}function Zr(ye){return hi.apply(this,arguments)}function hi(){return(hi=(0,v.Z)(function*(ye){const H=ye.name;he.has(H)&&(he.delete(H),yield Promise.all(ye.container.getProviders().map(ge=>ge.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function $n(ye,H,ge){var $e;let Xe=null!==($e=le[ye])&&void 0!==$e?$e:ye;ge&&(Xe+=`-${ge}`);const ft=Xe.match(/\s|\//),en=H.match(/\s|\//);if(ft||en){const V=[`Unable to register library "${Xe}" with version "${H}":`];return ft&&V.push(`library name "${Xe}" contains illegal characters (whitespace or "/")`),ft&&en&&V.push("and"),en&&V.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void F.warn(V.join(" "))}Qe(new Z.wA(`${Xe}-version`,()=>({library:Xe,version:H}),"VERSION"))}function Yr(ye,H){if(null!==ye&&"function"!=typeof ye)throw at.create("invalid-log-argument");(0,P.Am)(ye,H)}function hs(ye){(0,P.Ub)(ye)}const co="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let Rt=null;function hn(){return Rt||(Rt=(0,ne.X3)(co,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw at.create("idb-open",{originalErrorMessage:ye.message})})),Rt}function Yn(){return(Yn=(0,v.Z)(function*(ye){try{return yield(yield hn()).transaction(bt).objectStore(bt).get(fs(ye))}catch(H){if(H instanceof Y.ZR)F.warn(H.message);else{const ge=at.create("idb-get",{originalErrorMessage:H?.message});F.warn(ge.message)}}})).apply(this,arguments)}function rn(ye,H){return Un.apply(this,arguments)}function Un(){return(Un=(0,v.Z)(function*(ye,H){try{const $e=(yield hn()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,fs(ye)),yield $e.done}catch(ge){if(ge instanceof Y.ZR)F.warn(ge.message);else{const $e=at.create("idb-set",{originalErrorMessage:ge?.message});F.warn($e.message)}}})).apply(this,arguments)}function fs(ye){return`${ye.name}!${ye.options.appId}`}class Qt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Ps(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,v.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xe=fi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Xe&&!H._heartbeatsCache.heartbeats.some(ft=>ft.date===Xe))return H._heartbeatsCache.heartbeats.push({date:Xe,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ft=>{const en=new Date(ft.date).valueOf();return Date.now()-en<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,v.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=fi(),{heartbeatsToSend:$e,unsentEntries:Xe}=function ps(ye,H=1024){const ge=[];let $e=ye.slice();for(const Xe of ye){const ft=ge.find(en=>en.agent===Xe.agent);if(ft){if(ft.dates.push(Xe.date),Fr(ge)>H){ft.dates.pop();break}}else if(ge.push({agent:Xe.agent,dates:[Xe.date]}),Fr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ft=(0,Y.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Xe.length>0?(H._heartbeatsCache.heartbeats=Xe,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ft})()}}function fi(){return(new Date).toISOString().substring(0,10)}class Ps{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,v.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function Dn(ye){return Yn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,v.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return rn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,v.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return rn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...H.heartbeats]})}})()}}function Fr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Ki(ye){Qe(new Z.wA("platform-logger",H=>new fe(H),"PRIVATE")),Qe(new Z.wA("heartbeat",H=>new Qt(H),"PRIVATE")),$n(Me,"0.9.13",ye),$n(Me,"0.9.13","esm2017"),$n("fire-js","")}("")},4097:(ot,be,O)=>{O.d(be,{C6:()=>v.getApps,Mq:()=>v.getApp});var v=O(7592);(0,v.registerVersion)("firebase","9.23.0","app")},120:(ot,be,O)=>{O.d(be,{Z:()=>v.Z});var v=O(3399);v.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(ot,be,O)=>{O.r(be);var v=O(5861),Z=O(3399),P=O(9058),Y=O(7592),ne=O(7582),fe=O(7879),pe=O(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ke=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ne=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new fe.Yd("@firebase/auth");function re(y,...h){ut.logLevel<=fe.in.ERROR&&ut.error(`Auth (${Y.SDK_VERSION}): ${y}`,...h)}function Ie(y,...h){throw oe(y,...h)}function ee(y,...h){return oe(y,...h)}function we(y,h,p){const _=Object.assign(Object.assign({},Ne()),{[h]:p});return new P.LL("auth","Firebase",_).create(h,{appName:y.name})}function Pe(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ie(y,"argument-error"),we(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oe(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return qe.create(y,...h)}function q(y,h,...p){if(!y)throw oe(h,...p)}function Be(y){const h="INTERNAL ASSERTION FAILED: "+y;throw re(h),new Error(h)}function dt(y,h){y||Be(h)}function Jt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function fn(){return"http:"===pn()||"https:"===pn()}function pn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class lr{constructor(h,p){this.shortDelay=h,this.longDelay=p,dt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fn()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(y,h){dt(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class le{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const he={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new lr(3e4,6e4);function Ee(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Se(y,h,p,_){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,v.Z)(function*(y,h,p,_,T={}){return ze(y,T,(0,v.Z)(function*(){let R={},B={};_&&("GET"===h?B=_:R={body:JSON.stringify(_)});const J=(0,P.xO)(Object.assign({key:y.config.apiKey},B)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),le.fetch()(at(y,y.config.apiHost,p,J),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ze(y,h,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},he),h);try{const T=new gn(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const B=yield R.json();if("needConfirmation"in B)throw vn(y,"account-exists-with-different-credential",B);if(R.ok&&!("errorMessage"in B))return B;{const J=R.ok?B.errorMessage:B.error.message,[ke,je]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw vn(y,"credential-already-in-use",B);if("EMAIL_EXISTS"===ke)throw vn(y,"email-already-in-use",B);if("USER_DISABLED"===ke)throw vn(y,"user-disabled",B);const it=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw we(y,it,je);Ie(y,it)}}catch(T){if(T instanceof P.ZR)throw T;Ie(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function mt(y,h,p,_){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,v.Z)(function*(y,h,p,_,T={}){const R=yield Se(y,h,p,_,T);return"mfaPendingCredential"in R&&Ie(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function at(y,h,p,_){const T=`${h}${p}?${_}`;return y.config.emulator?ie(y.config,T):`${y.config.apiScheme}://${T}`}class gn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ee(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vn(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=ee(y,h,_);return T.customData._tokenResponse=p,T}function an(){return(an=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Zr(){return(Zr=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $n(){return($n=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Yr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function _t(){return(_t=(0,v.Z)(function*(y,h=!1){const p=(0,P.m9)(y),_=yield p.getIdToken(h),T=Rt(_);q(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,B=R?.sign_in_provider;return{claims:T,token:_,authTime:Yr(bt(T.auth_time)),issuedAtTime:Yr(bt(T.iat)),expirationTime:Yr(bt(T.exp)),signInProvider:B||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function bt(y){return 1e3*Number(y)}function Rt(y){const[h,p,_]=y.split(".");if(void 0===h||void 0===p||void 0===_)return re("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(re("Failed to decode base64 JWT payload"),null)}catch(T){return re("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Dn(y,h){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,v.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof P.ZR&&function rn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class Un{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,v.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class fs{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,v.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),T=yield Dn(y,function hi(y,h){return $n.apply(this,arguments)}(p,{idToken:_}));q(T?.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const B=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?function Ps(y){return y.map(h=>{var{providerId:p}=h,_=(0,ne._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(R.providerUserInfo):[],J=function ps(y,h){return[...y.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(y.providerData,B),it=!!y.isAnonymous&&!(y.email&&R.passwordHash||J?.length),rt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:J,metadata:new fs(R.createdAt,R.lastLoginAt),isAnonymous:it};Object.assign(y,rt)}),Lr.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(y){const h=(0,P.m9)(y);yield Yt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ki(){return(Ki=(0,v.Z)(function*(y,h){const p=yield ze(y,{},(0,v.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,B=at(y,T,"/v1/token",`key=${R}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(B,{method:"POST",headers:J,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){q(h.idToken,"internal-error"),q(typeof h.idToken<"u","internal-error"),q(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function hn(y){const h=Rt(y);return q(h,"internal-error"),q(typeof h.exp<"u","internal-error"),q(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,v.Z)(function*(){return q(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,v.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:B}=yield function Fr(y,h){return Ki.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(T,R,Number(B))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:T,expirationTime:R}=p,B=new ye;return _&&(q("string"==typeof _,"internal-error",{appName:h}),B.refreshToken=_),T&&(q("string"==typeof T,"internal-error",{appName:h}),B.accessToken=T),R&&(q("number"==typeof R,"internal-error",{appName:h}),B.expirationTime=R),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ye,this.toJSON())}_performRefresh(){return Be("not implemented")}}function H(y,h){q("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class ge{constructor(h){var{uid:p,auth:_,stsTokenManager:T}=h,R=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new fs(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,v.Z)(function*(){const _=yield Dn(p,p.stsTokenManager.getToken(p.auth,h));return q(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function co(y){return _t.apply(this,arguments)}(this,h)}reload(){return function Qt(y){return fi.apply(this,arguments)}(this)}_assign(h){this!==h&&(q(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new ge(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,v.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Yt(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,v.Z)(function*(){const p=yield h.getIdToken();return yield Dn(h,function Zn(y,h){return an.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,T,R,B,J,ke,je,it;const rt=null!==(_=p.displayName)&&void 0!==_?_:void 0,yn=null!==(T=p.email)&&void 0!==T?T:void 0,vi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,bu=null!==(B=p.photoURL)&&void 0!==B?B:void 0,Ca=null!==(J=p.tenantId)&&void 0!==J?J:void 0,Js=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,Cu=null!==(je=p.createdAt)&&void 0!==je?je:void 0,jh=null!==(it=p.lastLoginAt)&&void 0!==it?it:void 0,{uid:wn,emailVerified:Ep,isAnonymous:Em,providerData:Dp,stsTokenManager:Dm}=p;q(wn&&Dm,h,"internal-error");const bm=ye.fromJSON(this.name,Dm);q("string"==typeof wn,h,"internal-error"),H(rt,h.name),H(yn,h.name),q("boolean"==typeof Ep,h,"internal-error"),q("boolean"==typeof Em,h,"internal-error"),H(vi,h.name),H(bu,h.name),H(Ca,h.name),H(Js,h.name),H(Cu,h.name),H(jh,h.name);const $h=new ge({uid:wn,auth:h,email:yn,emailVerified:Ep,displayName:rt,isAnonymous:Em,photoURL:bu,phoneNumber:vi,tenantId:Ca,stsTokenManager:bm,createdAt:Cu,lastLoginAt:jh});return Dp&&Array.isArray(Dp)&&($h.providerData=Dp.map(bp=>Object.assign({},bp))),Js&&($h._redirectEventId=Js),$h}static _fromIdTokenResponse(h,p,_=!1){return(0,v.Z)(function*(){const T=new ye;T.updateFromServerResponse(p);const R=new ge({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield Yt(R),R})()}}const $e=new Map;function Xe(y){dt(y instanceof Function,"Expected a class definition");let h=$e.get(y);return h?(dt(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,$e.set(y,h),h)}const en=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,v.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,v.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,v.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function V(y,h,p){return`firebase:${y}:${h}:${p}`}class U{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:T,name:R}=this.auth;this.fullUserKey=V(this.userKey,T.apiKey,R),this.fullPersistenceKey=V("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?ge._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,v.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,v.Z)(function*(){if(!p.length)return new U(Xe(en),h,_);const T=(yield Promise.all(p.map(function(){var je=(0,v.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return je.apply(this,arguments)}}()))).filter(je=>je);let R=T[0]||Xe(en);const B=V(_,h.config.apiKey,h.name);let J=null;for(const je of p)try{const it=yield je._get(B);if(it){const rt=ge._fromJSON(h,it);je!==R&&(J=rt),R=je;break}}catch{}const ke=T.filter(je=>je._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],J&&(yield R._set(B,J.toJSON())),yield Promise.all(p.map(function(){var je=(0,v.Z)(function*(it){if(it!==R)try{yield it._remove(B)}catch{}});return function(it){return je.apply(this,arguments)}}())),new U(R,h,_)):new U(R,h,_)})()}}function W(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Nt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(De(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ur(h))return"Blackberry";if(Pt(h))return"Webos";if(ae(h))return"Safari";if((h.includes("chrome/")||nt(h))&&!h.includes("edge/"))return"Chrome";if(Ct(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function De(y=(0,P.z$)()){return/firefox\//i.test(y)}function ae(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function nt(y=(0,P.z$)()){return/crios\//i.test(y)}function Nt(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ct(y=(0,P.z$)()){return/android/i.test(y)}function Ur(y=(0,P.z$)()){return/blackberry/i.test(y)}function Pt(y=(0,P.z$)()){return/webos/i.test(y)}function Qn(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Yo(y=(0,P.z$)()){return Qn(y)||Ct(y)||Pt(y)||Ur(y)||/windows phone/i.test(y)||Nt(y)}function Zi(y,h=[]){let p;switch(y){case"Browser":p=W((0,P.z$)());break;case"Worker":p=`${W((0,P.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${Y.SDK_VERSION}/${_}`}function Ui(){return(Ui=(0,v.Z)(function*(y){return(yield Se(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vi(y,h){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,v.Z)(function*(y,h){return Se(y,"GET","/v2/recaptchaConfig",Ee(y,h))})).apply(this,arguments)}function Fs(y){return void 0!==y&&void 0!==y.getResponse}function Qo(y){return void 0!==y&&void 0!==y.enterprise}class qa{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function Yi(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=T=>{const R=ee("internal-error");R.customData=T,p(R)},_.type="text/javascript",_.charset="UTF-8",function zd(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Xo(y){return`__${y}${Math.floor(1e6*Math.random())}`}class cl{constructor(h){this.type="recaptcha-enterprise",this.auth=Xn(h)}verify(h="verify",p=!1){var _=this;return(0,v.Z)(function*(){function R(){return R=(0,v.Z)(function*(J){if(!p){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var ke=(0,v.Z)(function*(je,it){Vi(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rt=>{if(void 0!==rt.recaptchaKey){const yn=new qa(rt);return null==J.tenantId?J._agentRecaptchaConfig=yn:J._tenantRecaptchaConfigs[J.tenantId]=yn,je(yn.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(rt=>{it(rt)})});return function(je,it){return ke.apply(this,arguments)}}())}),R.apply(this,arguments)}function B(J,ke,je){const it=window.grecaptcha;Qo(it)?it.enterprise.ready(()=>{it.enterprise.execute(J,{action:h}).then(rt=>{ke(rt)}).catch(()=>{ke("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,ke)=>{(function T(J){return R.apply(this,arguments)})(_.auth).then(je=>{if(!p&&Qo(window.grecaptcha))B(je,J,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));Yi("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{B(je,J,ke)}).catch(it=>{ke(it)})}}).catch(je=>{ke(je)})})})()}}function wi(y,h,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,v.Z)(function*(y,h,p,_=!1){const T=new cl(y);let R;try{R=yield T.verify(p)}catch{R=yield T.verify(p,!0)}const B=Object.assign({},h);return Object.assign(B,_?{captchaResp:R}:{captchaResponse:R}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class Wa{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((B,J)=>{try{B(h(R))}catch(ke){J(ke)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,v.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const T of p.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const R of _)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class ll{constructor(h,p,_,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ea(this),this.idTokenSubscription=new ea(this),this.beforeStateQueue=new Wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=Xe(p)),this._initializationPromise=this.queue((0,v.Z)(function*(){var T,R;if(!_._deleted&&(_.persistenceManager=yield U.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,v.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let R=T,B=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const J=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=R?._redirectEventId,je=yield p.tryRedirectSignIn(h);(!J||J===ke)&&je?.user&&(R=je.user,B=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(R)}catch(J){R=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(J))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return q(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,v.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,v.Z)(function*(){try{yield Yt(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Rn(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,v.Z)(function*(){const _=h?(0,P.m9)(h):null;return _&&q(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,v.Z)(function*(){if(!_._deleted)return h&&q(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,v.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,v.Z)(function*(){yield p.assertedPersistence.setPersistence(Xe(h))}))}initializeRecaptchaConfig(){var h=this;return(0,v.Z)(function*(){const p=yield Vi(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new qa(p);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new cl(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,v.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,v.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&Xe(h)||p._popupRedirectResolver;q(_,p,"argument-error"),p.redirectPersistenceManager=yield U.create(p,[Xe(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,v.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,v.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,v.Z)(function*(){if(h===p.currentUser)return p.queue((0,v.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return q(B,this,"internal-error"),B.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,v.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,v.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const R=yield h._getAppCheckToken();return R&&(_["X-Firebase-AppCheck"]=R),_})()}_getAppCheckToken(){var h=this;return(0,v.Z)(function*(){var p;const _=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function ct(y,...h){ut.logLevel<=fe.in.WARN&&ut.warn(`Auth (${Y.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Xn(y){return(0,P.m9)(y)}class ea{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ta(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Gd(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class fo{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Be("not implemented")}_getIdTokenResponse(h){return Be("not implemented")}_linkToIdToken(h,p){return Be("not implemented")}_getReauthenticationResolver(h){return Be("not implemented")}}function Zf(y,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:resetPassword",Ee(y,h))})).apply(this,arguments)}function qd(y,h){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qu(){return(qu=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:update",Ee(y,h))})).apply(this,arguments)}function Vr(y,h){return hl.apply(this,arguments)}function hl(){return(hl=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPassword",Ee(y,h))})).apply(this,arguments)}function Wu(y,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:sendOobCode",Ee(y,h))})).apply(this,arguments)}function Ku(){return(Ku=(0,v.Z)(function*(y,h){return Wu(y,h)})).apply(this,arguments)}function na(y,h){return fl.apply(this,arguments)}function fl(){return(fl=(0,v.Z)(function*(y,h){return Wu(y,h)})).apply(this,arguments)}function qt(y,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,v.Z)(function*(y,h){return Wu(y,h)})).apply(this,arguments)}function Us(){return(Us=(0,v.Z)(function*(y,h){return Wu(y,h)})).apply(this,arguments)}function pl(){return(pl=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithEmailLink",Ee(y,h))})).apply(this,arguments)}function Ya(){return(Ya=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithEmailLink",Ee(y,h))})).apply(this,arguments)}class Zu extends fo{constructor(h,p,_,T=null){super("password",_),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Zu(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Zu(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,v.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const R=yield wi(h,T,"signInWithPassword");return Vr(h,R)}return Vr(h,T).catch(function(){var R=(0,v.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield wi(h,T,"signInWithPassword");return Vr(h,J)}return Promise.reject(B)});return function(B){return R.apply(this,arguments)}}());case"emailLink":return function Hr(y,h){return pl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,v.Z)(function*(){switch(_.signInMethod){case"password":return qd(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Yf(y,h){return Ya.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Di(y,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithIdp",Ee(y,h))})).apply(this,arguments)}class It extends fo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new It(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=p,R=(0,ne._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const B=new It(_,T);return B.idToken=R.idToken||void 0,B.accessToken=R.accessToken||void 0,B.secret=R.secret,B.nonce=R.nonce,B.pendingToken=R.pendingToken||null,B}_getIdTokenResponse(h){return Di(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Di(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Di(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function zr(){return(zr=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:sendVerificationCode",Ee(y,h))})).apply(this,arguments)}function Tr(){return(Tr=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ee(y,h))})).apply(this,arguments)}function Nn(){return(Nn=(0,v.Z)(function*(y,h){const p=yield mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ee(y,h));if(p.temporaryProof)throw vn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const gs={USER_NOT_FOUND:"user-not-found"};function wt(){return(wt=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ee(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),gs)})).apply(this,arguments)}class Sr extends fo{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Sr({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Sr({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function po(y,h){return Tr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Qa(y,h){return Nn.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ra(y,h){return wt.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:R}=h;return _||p||T||R?new Sr({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:R}):null}}class Tn{constructor(h){var p,_,T,R,B,J;const ke=(0,P.zd)((0,P.pd)(h)),je=null!==(p=ke.apiKey)&&void 0!==p?p:null,it=null!==(_=ke.oobCode)&&void 0!==_?_:null,rt=function Qf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);q(je&&it&&rt,"argument-error"),this.apiKey=je,this.operation=rt,this.code=it,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(B=ke.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(J=ke.tenantId)&&void 0!==J?J:null}static parseLink(h){const p=function ms(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||p||h||y}(h);try{return new Tn(p)}catch{return null}}}let go=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Zu._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=Tn.parseLink(_);return q(T,"argument-error"),Zu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class dr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ys extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class vs extends ys{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return q("providerId"in p&&"signInMethod"in p,"argument-error"),It._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return q(h.idToken||h.accessToken,"argument-error"),It._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return vs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return vs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:R,nonce:B,providerId:J}=h;if(!_&&!T&&!p&&!R||!J)return null;try{return new vs(J)._credential({idToken:p,accessToken:_,nonce:B,pendingToken:R})}catch{return null}}}let Vs=(()=>{class y extends ys{constructor(){super("facebook.com")}static credential(p){return It._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),bi=(()=>{class y extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return It._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Xa=(()=>{class y extends ys{constructor(){super("github.com")}static credential(p){return It._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Lt extends fo{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Di(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Di(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Di(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:R}=p;return _&&T&&R&&_===T?new Lt(_,R):null}static _create(h,p){return new Lt(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ia extends dr{constructor(h){q(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ia.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ia.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Lt.fromJSON(h);return q(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Lt._create(_,p)}catch{return null}}}let Yu=(()=>{class y extends ys{constructor(){super("twitter.com")}static credential(p,_){return It._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function hr(y,h){return mo.apply(this,arguments)}function mo(){return(mo=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signUp",Ee(y,h))})).apply(this,arguments)}class fr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,T=!1){return(0,v.Z)(function*(){const R=yield ge._fromIdTokenResponse(h,_,T),B=js(_);return new fr({user:R,providerId:B,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=js(_);return new fr({user:h,providerId:T,_tokenResponse:_,operationType:p})})()}}function js(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Xf(){return(Xf=(0,v.Z)(function*(y){var h;const p=Xn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new fr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield hr(p,{returnSecureToken:!0}),T=yield fr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class pr extends P.ZR{constructor(h,p,_,T){var R;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,pr.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,T){return new pr(h,p,_,T)}}function Br(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?pr._fromErrorAndOperation(y,R,h,_):R})}function Qu(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function pi(){return pi=(0,v.Z)(function*(y,h){const p=(0,P.m9)(y);yield oa(!0,p,h);const{providerUserInfo:_}=yield function kr(y,h){return Zr.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Qu(_||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),pi.apply(this,arguments)}function Xr(y,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,v.Z)(function*(y,h,p=!1){const _=yield Dn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return fr._forOperation(y,"link",_)})).apply(this,arguments)}function oa(y,h,p){return ml.apply(this,arguments)}function ml(){return(ml=(0,v.Z)(function*(y,h,p){yield Yt(h);const T=!1===y?"provider-already-linked":"no-such-provider";q(Qu(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Yg(y,h){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,v.Z)(function*(y,h,p=!1){const{auth:_}=y,T="reauthenticate";try{const R=yield Dn(y,Br(_,T,h,y),p);q(R.idToken,_,"internal-error");const B=Rt(R.idToken);q(B,_,"internal-error");const{sub:J}=B;return q(y.uid===J,_,"user-mismatch"),fr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ie(_,"user-mismatch"),R}})).apply(this,arguments)}function yl(y,h){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,v.Z)(function*(y,h,p=!1){const _="signIn",T=yield Br(y,_,h),R=yield fr._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function vl(y,h){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,v.Z)(function*(y,h){return yl(Xn(y),h)})).apply(this,arguments)}function Qg(y,h){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,v.Z)(function*(y,h){const p=(0,P.m9)(y);return yield oa(!1,p,h.providerId),Xr(p,h)})).apply(this,arguments)}function Xg(y,h){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,v.Z)(function*(y,h){return Yg((0,P.m9)(y),h)})).apply(this,arguments)}function ep(){return(ep=(0,v.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithCustomToken",Ee(y,h))})).apply(this,arguments)}function _s(){return _s=(0,v.Z)(function*(y,h){const p=Xn(y),_=yield function Gv(y,h){return ep.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),T=yield fr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),_s.apply(this,arguments)}class _l{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?aa._fromServerResponse(h,p):"totpInfo"in p?Il._fromServerResponse(h,p):Ie(h,"internal-error")}}class aa extends _l{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new aa(p)}}class Il extends _l{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new Il(p)}}function Ja(y,h,p){var _;q((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),q(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(q(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(q(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function eu(){return eu=(0,v.Z)(function*(y,h,p){var _;const T=Xn(y),R={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield wi(T,R,"getOobCode",!0);p&&Ja(T,B,p),yield na(T,B)}else p&&Ja(T,R,p),yield na(T,R).catch(function(){var B=(0,v.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield wi(T,R,"getOobCode",!0);p&&Ja(T,ke,p),yield na(T,ke)}});return function(J){return B.apply(this,arguments)}}())}),eu.apply(this,arguments)}function Qi(){return(Qi=(0,v.Z)(function*(y,h,p){yield Zf((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ci(){return Ci=(0,v.Z)(function*(y,h){yield function Ei(y,h){return qu.apply(this,arguments)}((0,P.m9)(y),{oobCode:h})}),Ci.apply(this,arguments)}function ar(y,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,v.Z)(function*(y,h){const p=(0,P.m9)(y),_=yield Zf(p,{oobCode:h}),T=_.requestType;switch(q(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(_.mfaInfo,p,"internal-error");default:q(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=_l._fromServerResponse(Xn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Io(){return(Io=(0,v.Z)(function*(y,h){const{data:p}=yield ar((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function tu(){return tu=(0,v.Z)(function*(y,h,p){var _;const T=Xn(y),R={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const je=yield wi(T,R,"signUpPassword");B=hr(T,je)}else B=hr(T,R).catch(function(){var je=(0,v.Z)(function*(it){if("auth/missing-recaptcha-token"===it.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const rt=yield wi(T,R,"signUpPassword");return hr(T,rt)}return Promise.reject(it)});return function(it){return je.apply(this,arguments)}}());const J=yield B.catch(je=>Promise.reject(je)),ke=yield fr._fromIdTokenResponse(T,"signIn",J);return yield T._updateCurrentUser(ke.user),ke}),tu.apply(this,arguments)}function nu(){return nu=(0,v.Z)(function*(y,h,p){var _;const T=Xn(y),R={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function B(J,ke){q(ke.handleCodeInApp,T,"argument-error"),ke&&Ja(T,J,ke)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const J=yield wi(T,R,"getOobCode",!0);B(J,p),yield qt(T,J)}else B(R,p),yield qt(T,R).catch(function(){var J=(0,v.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const je=yield wi(T,R,"getOobCode",!0);B(je,p),yield qt(T,je)}});return function(ke){return J.apply(this,arguments)}}())}),nu.apply(this,arguments)}function El(){return(El=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y),T=go.credentialWithLink(h,p||Jt());return q(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),vl(_,T)})).apply(this,arguments)}function bl(){return(bl=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:createAuthUri",Ee(y,h))})).apply(this,arguments)}function wo(){return wo=(0,v.Z)(function*(y,h){const _={identifier:h,continueUri:fn()?Jt():"http://localhost"},{signinMethods:T}=yield function Dl(y,h){return bl.apply(this,arguments)}((0,P.m9)(y),_);return T||[]}),wo.apply(this,arguments)}function iu(){return iu=(0,v.Z)(function*(y,h){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ja(p.auth,T,h);const{email:R}=yield function Kd(y,h){return Ku.apply(this,arguments)}(p.auth,T);R!==y.email&&(yield y.reload())}),iu.apply(this,arguments)}function Ju(){return Ju=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Ja(_.auth,R,p);const{email:B}=yield function $r(y,h){return Us.apply(this,arguments)}(_.auth,R);B!==y.email&&(yield y.reload())}),Ju.apply(this,arguments)}function nh(){return(nh=(0,v.Z)(function*(y,h){return Se(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Cl(){return Cl=(0,v.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,P.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},B=yield Dn(_,function Jg(y,h){return nh.apply(this,arguments)}(_.auth,R));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const J=_.providerData.find(({providerId:ke})=>"password"===ke);J&&(J.displayName=_.displayName,J.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)}),Cl.apply(this,arguments)}function tp(y,h,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,v.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const B=yield Dn(y,qd(_,R));yield y._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class la{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class su extends la{constructor(h,p,_,T){super(h,p,_),this.username=T}}class Tl extends la{constructor(h,p){super(h,"facebook.com",p)}}class ih extends su{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class tc extends la{constructor(h,p){super(h,"google.com",p)}}class ou extends su{constructor(h,p,_){super(h,"twitter.com",p,_)}}function np(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function tm(y){var h,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const B=null===(p=null===(h=Rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new la(R,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new Tl(R,T);case"github.com":return new ih(R,T);case"google.com":return new tc(R,T);case"twitter.com":return new ou(R,T,y.screenName||null);case"custom":case"anonymous":return new la(R,null);default:return new la(R,_,T)}}(p)}class Xi{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new Xi("enroll",h,p)}static _fromMfaPendingCredential(h){return new Xi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Xi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Xi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Do{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=Xn(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(J=>_l._fromServerResponse(_,J));q(T.mfaPendingCredential,_,"internal-error");const B=Xi._fromMfaPendingCredential(T.mfaPendingCredential);return new Do(B,R,function(){var J=(0,v.Z)(function*(ke){const je=yield ke._process(_,B);delete T.mfaInfo,delete T.mfaPendingCredential;const it=Object.assign(Object.assign({},T),{idToken:je.idToken,refreshToken:je.refreshToken});switch(p.operationType){case"signIn":const rt=yield fr._fromIdTokenResponse(_,p.operationType,it);return yield _._updateCurrentUser(rt.user),rt;case"reauthenticate":return q(p.user,_,"internal-error"),fr._forOperation(p.user,p.operationType,it);default:Ie(_,"internal-error")}});return function(ke){return J.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,v.Z)(function*(){return p.signInResolver(h)})()}}class sn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>_l._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new sn(h)}getSession(){var h=this;return(0,v.Z)(function*(){return Xi._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,v.Z)(function*(){const T=h,R=yield _.getSession(),B=yield Dn(_.user,T._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(h){var p=this;return(0,v.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const R=yield Dn(p.user,function ah(y,h){return Se(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ee(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:B})=>B!==_),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const bo=new WeakMap,Mr="__sak";class ap{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Mr,"1"),this.storage.removeItem(Mr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const da=(()=>{class y extends ap{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xl(){const y=(0,P.z$)();return ae(y)||Qn(y)}()&&function al(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yo(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),R=this.localCache[_];T!==R&&p(_,R,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((J,ke,je)=>{this.notifyListeners(J,je)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(T);if(p.newValue!==J)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const R=()=>{const J=this.storage.getItem(T);!_&&this.localCache[T]===J||this.notifyListeners(T,J)},B=this.storage.getItem(T);!function ks(){return(0,P.w1)()&&10===document.documentMode}()||B===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,R=this;return(0,v.Z)(function*(){yield T().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,v.Z)(function*(){const R=yield _().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,T=this;return(0,v.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),ei=(()=>{class y extends ap{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Rl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,v.Z)(function*(){const T=p,{eventId:R,eventType:B,data:J}=T.data,ke=_.handlersMap[B];if(!ke?.size)return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:B});const je=Array.from(ke).map(function(){var rt=(0,v.Z)(function*(yn){return yn(T.origin,J)});return function(yn){return rt.apply(this,arguments)}}()),it=yield function lp(y){return Promise.all(y.map(function(){var h=(0,v.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(je);T.ports[0].postMessage({status:"done",eventId:R,eventType:B,response:it})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function rc(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class rm{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var T=this;return(0,v.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let B,J;return new Promise((ke,je)=>{const it=rc("",20);R.port1.start();const rt=setTimeout(()=>{je(new Error("unsupported_event"))},_);J={messageChannel:R,onMessage(yn){const vi=yn;if(vi.data.eventId===it)switch(vi.data.status){case"ack":clearTimeout(rt),B=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),ke(vi.data.response);break;default:clearTimeout(rt),clearTimeout(B),je(new Error("invalid_response"))}}},T.handlers.add(J),R.port1.addEventListener("message",J.onMessage),T.target.postMessage({eventType:h,eventId:it,data:p},[R.port2])}).finally(()=>{J&&T.removeMessageHandler(J)})})()}}function _n(){return window}function Et(){return typeof _n().WorkerGlobalScope<"u"&&"function"==typeof _n().importScripts}function ch(){return(ch=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lh="firebaseLocalStorageDb",Ji="firebaseLocalStorage",Nl="fbase_key";class sc{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function oc(y,h){return y.transaction([Ji],h?"readwrite":"readonly").objectStore(Ji)}function Ol(){const y=indexedDB.open(lh,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ji,{keyPath:Nl})}catch(T){p(T)}}),y.addEventListener("success",(0,v.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ji)?h(_):(_.close(),yield function sm(){const y=indexedDB.deleteDatabase(lh);return new sc(y).toPromise()}(),h(yield Ol()))}))})}function Ae(y,h,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,v.Z)(function*(y,h,p){const _=oc(y,!0).put({[Nl]:h,value:p});return new sc(_).toPromise()})).apply(this,arguments)}function ac(){return(ac=(0,v.Z)(function*(y,h){const p=oc(y,!1).get(h),_=yield new sc(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function yr(y,h){const p=oc(y,!0).delete(h);return new sc(p).toPromise()}const So=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,v.Z)(function*(){return p.db||(p.db=yield Ol()),p.db})()}_withRetries(p){var _=this;return(0,v.Z)(function*(){let T=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(T++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,v.Z)(function*(){return Et()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,v.Z)(function*(){p.receiver=Rl._getInstance(function mr(){return Et()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,v.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,v.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,v.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function uh(){return ch.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new rm(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(T=R[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,v.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function ic(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ol();return yield Ae(p,Mr,"1"),yield yr(p,Mr),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,v.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,v.Z)(function*(){return T._withPendingWrite((0,v.Z)(function*(){return yield T._withRetries(R=>Ae(R,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,v.Z)(function*(){const T=yield _._withRetries(R=>function ji(y,h){return ac.apply(this,arguments)}(R,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,v.Z)(function*(){return _._withPendingWrite((0,v.Z)(function*(){return yield _._withRetries(T=>yr(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,v.Z)(function*(){const _=yield p._withRetries(B=>{const J=oc(B,!1).getAll();return new sc(J).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:B,value:J}of _)R.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(J)&&(p.notifyListeners(B,J),T.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!R.has(B)&&(p.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),gi=1e12;class dh{constructor(h){this.auth=h,this.counter=gi,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Ao(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||gi;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||gi))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,v.Z)(function*(){var _;return null===(_=p._widgets.get(h||gi))||void 0===_||_.execute(),""})()}}class Ao{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;q(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zs(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hh=Xo("rcb"),fh=new lr(3e4,6e4);class om{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=_n().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return q(function lc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&Fs(_n().grecaptcha)?Promise.resolve(_n().grecaptcha):new Promise((_,T)=>{const R=_n().setTimeout(()=>{T(ee(h,"network-request-failed"))},fh.get());_n()[hh]=()=>{_n().clearTimeout(R),delete _n()[hh];const J=_n().grecaptcha;if(!J||!Fs(J))return void T(ee(h,"internal-error"));const ke=J.render;J.render=(je,it)=>{const rt=ke(je,it);return this.counter++,rt},this.hostLanguage=p,_(J)},Yi(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:hh,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=_n().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ph{load(h){return(0,v.Z)(function*(){return new dh(h)})()}clearedOneInstance(){}}const dc="recaptcha",gh={theme:"light",type:"image"};class mh{constructor(h,p=Object.assign({},gh),_){this.parameters=p,this.type=dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(_),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;q(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ph:new om,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const B=J=>{J&&(h.tokenChangeListeners.delete(B),R(J))};h.tokenChangeListeners.add(B),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=_n()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){q(fn()&&!Et(),h.auth,"internal-error"),yield function hp(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Ls(y){return Ui.apply(this,arguments)}(h.auth);q(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Sr._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function mi(){return(mi=(0,v.Z)(function*(y,h,p){const _=Xn(y),T=yield cu(_,h,(0,P.m9)(p));return new Nr(T,R=>vl(_,R))})).apply(this,arguments)}function yt(){return(yt=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y);yield oa(!1,_,"phone");const T=yield cu(_.auth,h,(0,P.m9)(p));return new Nr(T,R=>Qg(_,R))})).apply(this,arguments)}function Gs(){return(Gs=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y),T=yield cu(_.auth,h,(0,P.m9)(p));return new Nr(T,R=>Xg(_,R))})).apply(this,arguments)}function cu(y,h,p){return Jn.apply(this,arguments)}function Jn(){return Jn=(0,v.Z)(function*(y,h,p){var _;const T=yield p.verify();try{let R;if(q("string"==typeof T,y,"argument-error"),q(p.type===dc,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const B=R.session;if("phoneNumber"in R)return q("enroll"===B.type,y,"internal-error"),(yield function uu(y,h){return Se(y,"POST","/v2/accounts/mfaEnrollment:start",Ee(y,h))}(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{q("signin"===B.type,y,"internal-error");const J=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return q(J,y,"missing-multi-factor-info"),(yield function Pl(y,h){return Se(y,"POST","/v2/accounts/mfaSignIn:start",Ee(y,h))}(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function Cn(y,h){return zr.apply(this,arguments)}(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return B}}finally{p._reset()}}),Jn.apply(this,arguments)}function $t(){return($t=(0,v.Z)(function*(y,h){yield Xr((0,P.m9)(y),h)})).apply(this,arguments)}let es=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Xn(p)}verifyPhoneNumber(p,_){return cu(this.auth,p,(0,P.m9)(_))}static credential(p,_){return Sr._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?Sr._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function vr(y,h){return h?Xe(h):(q(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ni extends fo{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Di(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Di(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Di(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Ut(y){return yl(y.auth,new ni(y),y.bypassAuthState)}function Ll(y){const{auth:h,user:p}=y;return q(p,h,"internal-error"),Yg(p,new ni(y),y.bypassAuthState)}function qs(y){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,v.Z)(function*(y){const{auth:h,user:p}=y;return q(p,h,"internal-error"),Xr(p,new ni(y),y.bypassAuthState)})).apply(this,arguments)}class er{constructor(h,p,_,T,R=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,v.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,v.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:R,tenantId:B,error:J,type:ke}=h;if(J)return void p.reject(J);const je={auth:p.auth,requestUri:_,sessionId:T,tenantId:B||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(je))}catch(it){p.reject(it)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ut;case"linkViaPopup":case"linkViaRedirect":return qs;case"reauthViaPopup":case"reauthViaRedirect":return Ll;default:Ie(this.auth,"internal-error")}}resolve(h){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Is=new lr(2e3,1e4);function ve(){return(ve=(0,v.Z)(function*(y,h,p){const _=Xn(y);Pe(y,h,dr);const T=vr(_,p);return new Fl(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Ws(){return(Ws=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y);Pe(_.auth,h,dr);const T=vr(_.auth,p);return new Fl(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function Zt(){return(Zt=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y);Pe(_.auth,h,dr);const T=vr(_.auth,p);return new Fl(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Fl=(()=>{class y extends er{constructor(p,_,T,R,B){super(p,_,R,B),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,v.Z)(function*(){const _=yield p.execute();return q(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,v.Z)(function*(){dt(1===p.filter.length,"Popup operations only handle one event");const _=rc();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ee(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Is.get())};p()}}return y.currentPopupAction=null,y})();const _r="pendingRedirect",We=new Map;class vh extends er{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,v.Z)(function*(){let _=We.get(p.auth._key());if(!_){try{const R=(yield function St(y,h){return Ro.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(T){_=()=>Promise.reject(T)}We.set(p.auth._key(),_)}return p.bypassAuthState||We.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function Ro(){return(Ro=(0,v.Z)(function*(y,h){const p=du(h),_=am(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function lu(y,h){return _h.apply(this,arguments)}function _h(){return(_h=(0,v.Z)(function*(y,h){return am(y)._set(du(h),"true")})).apply(this,arguments)}function wh(y,h){We.set(y._key(),h)}function am(y){return Xe(y._redirectPersistence)}function du(y){return V(_r,y.config.apiKey,y.name)}function Gn(y,h,p){return function hc(y,h,p){return An.apply(this,arguments)}(y,h,p)}function An(){return(An=(0,v.Z)(function*(y,h,p){const _=Xn(y);Pe(y,h,dr),yield _._initializationPromise;const T=vr(_,p);return yield lu(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function ts(y,h,p){return function fc(y,h,p){return Ul.apply(this,arguments)}(y,h,p)}function Ul(){return(Ul=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y);Pe(_.auth,h,dr),yield _.auth._initializationPromise;const T=vr(_.auth,p);yield lu(T,_.auth);const R=yield Oo(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function pc(y,h,p){return function Eh(y,h,p){return Ir.apply(this,arguments)}(y,h,p)}function Ir(){return(Ir=(0,v.Z)(function*(y,h,p){const _=(0,P.m9)(y);Pe(_.auth,h,dr),yield _.auth._initializationPromise;const T=vr(_.auth,p);yield oa(!1,_,h.providerId),yield lu(T,_.auth);const R=yield Oo(_);return T._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function No(){return(No=(0,v.Z)(function*(y,h){return yield Xn(y)._initializationPromise,rs(y,h,!1)})).apply(this,arguments)}function rs(y,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,v.Z)(function*(y,h,p=!1){const _=Xn(y),T=vr(_,h),B=yield new vh(_,T,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,h)),B})).apply(this,arguments)}function Oo(y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,v.Z)(function*(y){const h=rc(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ws{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function fu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Po(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!Po(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ee(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pa(h))}saveEventToCache(h){this.cachedEventUids.add(pa(h)),this.lastProcessedEventTime=Date.now()}}function pa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Po({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Dh(y){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,v.Z)(function*(y,h={}){return Se(y,"GET","/v1/projects",h)})).apply(this,arguments)}const pu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Es=/^https?/;function Hi(){return(Hi=(0,v.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Dh(y);for(const p of h)try{if(gu(p))return}catch{}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function gu(y){const h=Jt(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const B=new URL(y);return""===B.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===_}if(!Es.test(p))return!1;if(pu.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const ga=new lr(3e4,6e4);function bh(){const y=_n().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let gc=null;const Ch=new lr(5e3,15e3),um="__/auth/iframe",ma="emulator/auth/iframe",mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(y){const h=y.config;q(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ie(h,ma):`https://${y.config.authDomain}/${um}`,_={apiKey:h.apiKey,appName:y.name,v:Y.SDK_VERSION},T=ya.get(y.config.apiHost);T&&(_.eid=T);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,P.xO)(_).slice(1)}`}function b(){return b=(0,v.Z)(function*(y){const h=yield function Ti(y){return gc=gc||function In(y){return new Promise((h,p)=>{var _,T,R;function B(){bh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{bh(),p(ee(y,"network-request-failed"))},timeout:ga.get()})}if(null!==(T=null===(_=_n().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(R=_n().gapi)||void 0===R||!R.load){const J=Xo("iframefcb");return _n()[J]=()=>{gapi.load?B():p(ee(y,"network-request-failed"))},Yi(`https://apis.google.com/js/api.js?onload=${J}`).catch(ke=>p(ke))}B()}}).catch(h=>{throw gc=null,h})}(y),gc}(y),p=_n().gapi;return q(p,y,"internal-error"),h.open({where:document.body,url:va(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mu,dontclear:!0},_=>new Promise(function(){var T=(0,v.Z)(function*(R,B){yield _.restyle({setHideOnLeave:!1});const J=ee(y,"network-request-failed"),ke=_n().setTimeout(()=>{B(J)},Ch.get());function je(){_n().clearTimeout(ke),R(_)}_.ping(je).then(je,()=>{B(J)})});return function(R,B){return T.apply(this,arguments)}}()))}),b.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const At="__/auth/handler",Mt="emulator/auth/handler",ur=encodeURIComponent("fac");function tr(y,h,p,_,T,R){return _a.apply(this,arguments)}function _a(){return(_a=(0,v.Z)(function*(y,h,p,_,T,R){q(y.config.authDomain,y,"auth-domain-config-required"),q(y.config.apiKey,y,"invalid-api-key");const B={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:Y.SDK_VERSION,eventId:T};if(h instanceof dr){h.setDefaultLanguage(y.languageCode),B.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[it,rt]of Object.entries(R||{}))B[it]=rt}if(h instanceof ys){const it=h.getScopes().filter(rt=>""!==rt);it.length>0&&(B.scopes=it.join(","))}y.tenantId&&(B.tid=y.tenantId);const J=B;for(const it of Object.keys(J))void 0===J[it]&&delete J[it];const ke=yield y._getAppCheckToken(),je=ke?`#${ur}=${encodeURIComponent(ke)}`:"";return`${function On({config:y}){return y.emulator?ie(y,Mt):`https://${y.authDomain}/${At}`}(y)}?${(0,P.xO)(J).slice(1)}${je}`})).apply(this,arguments)}const Ds="webStorageSupport",mn=class Or{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ei,this._completeRedirectFn=rs,this._overrideRedirectResult=wh}_openPopup(h,p,_,T){var R=this;return(0,v.Z)(function*(){var B;dt(null===(B=R.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const J=yield tr(h,p,_,Jt(),T);return function Ge(y,h,p,_=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let J="";const ke=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:R,left:B}),je=(0,P.z$)().toLowerCase();p&&(J=nt(je)?"_blank":p),De(je)&&(h=h||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((yn,[vi,bu])=>`${yn}${vi}=${bu},`,"");if(function Cr(y=(0,P.z$)()){var h;return Qn(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(je)&&"_self"!==J)return function lt(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",J),new Ze(null);const rt=window.open(h||"",J,it);q(rt,y,"popup-blocked");try{rt.focus()}catch{}return new Ze(rt)}(h,J,rc())})()}_openRedirect(h,p,_,T){var R=this;return(0,v.Z)(function*(){return yield R._originValidation(h),function im(y){_n().location.href=y}(yield tr(h,p,_,Jt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(dt(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,v.Z)(function*(){const _=yield function E(y){return b.apply(this,arguments)}(h),T=new ws(h);return _.register("authEvent",R=>(q(R?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Ds,{type:Ds},T=>{var R;const B=null===(R=T?.[0])||void 0===R?void 0:R[Ds];void 0!==B&&p(!!B),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Bl(y){return Hi.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Yo()||ae()||Qn()}};class ln{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return Be("unexpected MultiFactorSessionType")}}}class bs extends ln{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new bs(h)}_finalizeEnroll(h,p,_){return function op(y,h){return Se(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ee(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function dp(y,h){return Se(y,"POST","/v2/accounts/mfaSignIn:finalize",Ee(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Th=(()=>{class y{constructor(){}static assertion(p){return bs._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var lm="@firebase/auth";class zi{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,v.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ko(){return window}(0,P.Pz)("authIdTokenMaxAge"),function Ys(y){(0,Y._registerComponent)(new pe.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),R=h.getProvider("app-check-internal"),{apiKey:B,authDomain:J}=_.options;q(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const ke={apiKey:B,authDomain:J,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zi(y)},je=new ll(_,T,R,ke);return function Kf(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(Xe);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(je,p),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new pe.wA("auth-internal",h=>{const p=Xn(h.getProvider("auth").getImmediate());return new zi(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(lm,"0.23.2",function vu(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Y.registerVersion)(lm,"0.23.2","esm2017")}("Browser");function Lo(){return Lo=(0,v.Z)(function*(y,h,p){var _;const{BuildInfo:T}=ko();dt(h.sessionId,"AuthEvent did not contain a session ID");const R=yield function _u(y){return Hl.apply(this,arguments)}(h.sessionId),B={};return Qn()?B.ibi=T.packageName:Ct()?B.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=R,tr(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,B)}),Lo.apply(this,arguments)}function Mh(){return(Mh=(0,v.Z)(function*(y){const{BuildInfo:h}=ko(),p={};Qn()?p.iosBundleId=h.packageName:Ct()?p.androidPackageName=h.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Dh(y,p)})).apply(this,arguments)}function mc(){return(mc=(0,v.Z)(function*(y,h,p){const{cordova:_}=ko();let T=()=>{};try{yield new Promise((R,B)=>{let J=null;function ke(){var rt;R();const yn=null===(rt=_.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof yn&&yn(),"function"==typeof p?.close&&p.close()}function je(){J||(J=window.setTimeout(()=>{B(ee(y,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&je()}h.addPassiveListener(ke),document.addEventListener("resume",je,!1),Ct()&&document.addEventListener("visibilitychange",it,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",it,!1),J&&window.clearTimeout(J)}})}finally{T()}})).apply(this,arguments)}function Hl(){return(Hl=(0,v.Z)(function*(y){const h=function Rh(y){if(dt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class gm extends ws{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,v.Z)(function*(){yield h.initPromise})()}}function Qs(y){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,v.Z)(function*(y){const h=yield wu()._get(zl(y));return h&&(yield wu()._remove(zl(y))),h})).apply(this,arguments)}function gp(){const y=[];for(let p=0;p<20;p++){const _=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return y.join("")}function wu(){return Xe(da)}function zl(y){return V("authEvent",y.config.apiKey,y.name)}function Gl(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}const yp=class yc{constructor(){this._redirectPersistence=ei,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rs,this._overrideRedirectResult=wh}_initialize(h){var p=this;return(0,v.Z)(function*(){const _=h._key();let T=p.eventManagers.get(_);return T||(T=new gm(h),p.eventManagers.set(_,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,T){var R=this;return(0,v.Z)(function*(){!function Yv(y){var h,p,_,T,R,B,J,ke,je,it;const rt=ko();q("function"==typeof(null===(h=rt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(p=rt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(R=null===(T=null===(_=rt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(ke=null===(J=null===(B=rt?.cordova)||void 0===B?void 0:B.plugins)||void 0===J?void 0:J.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(it=null===(je=rt?.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===it?void 0:it.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield R._initialize(h);yield B.initialized(),B.resetRedirect(),function Ih(){We.clear()}(),yield R._originValidation(h);const J=function Nh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:gp(),postBody:null,tenantId:y.tenantId,error:ee(y,"no-auth-event")}}(h,_,T);yield function Iu(y,h){return wu()._set(zl(y),h)}(h,J);const ke=yield function Zv(y,h,p){return Lo.apply(this,arguments)}(h,J,p),je=yield function $l(y){const{cordova:h}=ko();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Xt(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(ke);return function xh(y,h,p){return mc.apply(this,arguments)}(h,B,je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function jl(y){return Mh.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:R}=ko(),B=setTimeout((0,v.Z)(function*(){yield Qs(h),p.onEvent(Wl())}),500),J=function(){var it=(0,v.Z)(function*(rt){clearTimeout(B);const yn=yield Qs(h);let vi=null;yn&&rt?.url&&(vi=function Si(y,h){var p,_;const T=function mp(y){const h=Gl(y),p=h.link?decodeURIComponent(h.link):void 0,_=Gl(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Gl(T).link||T||_||p||y}(h);if(T.includes("/__/auth/callback")){const R=Gl(T),B=R.firebaseError?function mm(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,J=null===(_=null===(p=B?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],ke=J?ee(J):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(yn,rt.url)),p.onEvent(vi||Wl())});return function(yn){return it.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,J);const ke=T,je=`${R.packageName.toLowerCase()}://`;ko().handleOpenURL=function(){var it=(0,v.Z)(function*(rt){if(rt.toLowerCase().startsWith(je)&&J({url:rt}),"function"==typeof ke)try{ke(rt)}catch(yn){console.error(yn)}});return function(rt){return it.apply(this,arguments)}}()}};function Wl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function Zl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function kh(y=(0,P.z$)()){return!("file:"!==Zl()&&"ionic:"!==Zl()&&"capacitor:"!==Zl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jv(){try{const y=self.localStorage,h=rc();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Xv(y=(0,P.z$)()){return function Lh(){return(0,P.w1)()&&11===document?.documentMode}()||function Qv(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return vc()&&(0,P.hl)()}return!1}function vc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vp(){return(function Yl(){return"http:"===Zl()||"https:"===Zl()}()||(0,P.ru)()||kh())&&!function _m(){return(0,P.b$)()||(0,P.UG)()}()&&Jv()&&!vc()}function Ql(){return kh()&&typeof document<"u"}function is(){return(is=(0,v.Z)(function*(){return!!Ql()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ai={LOCAL:"local",NONE:"none",SESSION:"session"},_c=q,Ea="persistence";function Uh(y){return ss.apply(this,arguments)}function ss(){return(ss=(0,v.Z)(function*(y){yield y._initializationPromise;const h=Da(),p=V(Ea,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Da(){var y;try{return(null===(y=function Fh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Vh=q;class Fo{constructor(){this.browserResolver=Xe(mn),this.cordovaResolver=Xe(yp),this.underlyingResolver=null,this._redirectPersistence=ei,this._completeRedirectFn=rs,this._overrideRedirectResult=wh}_initialize(h){var p=this;return(0,v.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,T){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,T)})()}_openRedirect(h,p,_,T){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Ql()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,v.Z)(function*(){if(h.underlyingResolver)return;const p=yield function wa(){return is.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Mn(y){return y.unwrap()}function Eu(y){return Im(y)}function Im(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return es.credentialFromResult(y);const p=h.providerId;if(!p||p===ue.PASSWORD)return null;let _;switch(p){case ue.GOOGLE:_=bi;break;case ue.FACEBOOK:_=Vs;break;case ue.GITHUB:_=Xa;break;case ue.TWITTER:_=Yu;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:B,pendingToken:J,nonce:ke}=h;return R||B||T||J?J?p.startsWith("saml.")?Lt._create(p,J):It._fromParams({providerId:p,signInMethod:p,pendingToken:J,idToken:T,accessToken:R}):new vs(p).credential({idToken:T,accessToken:R,rawNonce:ke}):null}return y instanceof P.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function yi(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function Jl(y,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new e_(y,function sh(y,h){var p;const _=(0,P.m9)(y),T=h;return q(h.customData.operationType,_,"argument-error"),q(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Do._fromError(_,T)}(y,h));else if(_){const T=Im(h),R=h;T&&(R.credential=T,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Eu(p),additionalUserInfo:np(p),user:nr.getOrCreate(T)}})}function Bh(y,h){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,v.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>yi(y,p.confirm(_))}})).apply(this,arguments)}class e_{constructor(h,p){this.resolver=p,this.auth=function Xl(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return yi(Mn(this.auth),this.resolver.resolveSignIn(h))}}class nr{constructor(h){this._delegate=h,this.multiFactor=function Co(y){const h=(0,P.m9)(y);return bo.has(h)||bo.set(h,sn._fromUser(h)),bo.get(h)}(h)}static getOrCreate(h){return nr.USER_MAP.has(h)||nr.USER_MAP.set(h,new nr(h)),nr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,v.Z)(function*(){return yi(p.auth,Qg(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,v.Z)(function*(){return Bh(_.auth,function Vn(y,h,p){return yt.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,v.Z)(function*(){return yi(p.auth,function Ks(y,h,p){return Zt.apply(this,arguments)}(p._delegate,h,Fo))})()}linkWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Uh(Xn(p.auth)),pc(p._delegate,h,Fo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,v.Z)(function*(){return yi(p.auth,Xg(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Bh(this.auth,function zn(y,h,p){return Gs.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return yi(this.auth,function xo(y,h,p){return Ws.apply(this,arguments)}(this._delegate,h,Fo))}reauthenticateWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Uh(Xn(p.auth)),ts(p._delegate,h,Fo)})()}sendEmailVerification(h){return function $s(y,h){return iu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,v.Z)(function*(){return yield function yo(y,h){return pi.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function rh(y,h){return tp((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ec(y,h){return tp((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function $i(y,h){return $t.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function em(y,h){return Cl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function th(y,h,p){return Ju.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}nr.USER_MAP=new WeakMap;const Cs=q;let Xs=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Cs(T,"invalid-api-key",{appName:p.name}),Cs(T,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?Fo:void 0;this._delegate=_.initialize({options:{persistence:Gr(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?nr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Qr(y,h,p){const _=Xn(y);q(_._canInitEmulator,_,"emulator-config-failed"),q(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,R=ta(h),{host:B,port:J}=function dl(y){const h=ta(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const R=T[1];return{host:R,port:Gd(_.substr(R.length+1))}}{const[R,B]=_.split(":");return{host:R,port:Gd(B)}}}(h);_.config.emulator={url:`${R}//${B}${null===J?"":`:${J}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:J,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Kg(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function Xd(y,h){return Ci.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ar(this._delegate,p)}confirmPasswordReset(p,_){return function vo(y,h,p){return Qi.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,v.Z)(function*(){return yi(T._delegate,function wl(y,h,p){return tu.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ru(y,h){return wo.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function eh(y,h){const p=Tn.parseLink(h);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,v.Z)(function*(){Cs(vp(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function ns(y,h){return No.apply(this,arguments)}(p._delegate,Fo);return _?yi(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ym(y,h){Xn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:R,error:B,complete:J}=ed(p,_,T);return this._delegate.onAuthStateChanged(R,B,J)}onIdTokenChanged(p,_,T){const{next:R,error:B,complete:J}=ed(p,_,T);return this._delegate.onIdTokenChanged(R,B,J)}sendSignInLinkToEmail(p,_){return function ua(y,h,p){return nu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function qv(y,h,p){return eu.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,v.Z)(function*(){let T;switch(function _p(y,h){_c(Object.values(Ai).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?_c(h!==Ai.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?_c(h===Ai.NONE,y,"unsupported-persistence-type"):vc()?_c(h===Ai.NONE||h===Ai.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):_c(h===Ai.NONE||Jv(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Ai.SESSION:T=ei;break;case Ai.LOCAL:T=(yield Xe(So)._isAvailable())?So:da;break;case Ai.NONE:T=en;break;default:return Ie("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return yi(this._delegate,function Ar(y){return Xf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return yi(this._delegate,vl(this._delegate,p))}signInWithCustomToken(p){return yi(this._delegate,function Qd(y,h){return _s.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return yi(this._delegate,function Jd(y,h,p){return vl((0,P.m9)(y),go.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return yi(this._delegate,function gr(y,h,p){return El.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Bh(this._delegate,function yh(y,h,p){return mi.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,v.Z)(function*(){return Cs(vp(),_._delegate,"operation-not-supported-in-this-environment"),yi(_._delegate,function fa(y,h,p){return ve.apply(this,arguments)}(_._delegate,p,Fo))})()}signInWithRedirect(p){var _=this;return(0,v.Z)(function*(){return Cs(vp(),_._delegate,"operation-not-supported-in-this-environment"),yield Uh(_._delegate),Gn(_._delegate,p,Fo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Jr(y,h){return Io.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ai,y})();function ed(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const T=_;return{next:B=>T(B&&nr.getOrCreate(B)),error:h,complete:p}}function Gr(y,h){const p=function os(y,h){const p=Da();if(!p)return[];const _=V(Ea,y,h);switch(p.getItem(_)){case Ai.NONE:return[en];case Ai.LOCAL:return[So,ei];case Ai.SESSION:return[ei];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(So)&&p.push(So),typeof window<"u")for(const _ of[da,ei])p.includes(_)||p.push(_);return p.includes(en)||p.push(en),p}class ba{constructor(){this.providerId="phone",this._delegate=new es(Mn(Z.Z.auth()))}static credential(h,p){return es.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}ba.PHONE_SIGN_IN_METHOD=es.PHONE_SIGN_IN_METHOD,ba.PROVIDER_ID=es.PROVIDER_ID;const Du=q;class wm{constructor(h,p,_=Z.Z.app()){var T;Du(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new mh(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wp(y){y.INTERNAL.registerComponent(new pe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Xs(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:go,FacebookAuthProvider:Vs,GithubAuthProvider:Xa,GoogleAuthProvider:bi,OAuthProvider:vs,SAMLAuthProvider:ia,PhoneAuthProvider:ba,PhoneMultiFactorGenerator:Th,RecaptchaVerifier:wm,TwitterAuthProvider:Yu,Auth:Xs,AuthCredential:fo,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Z.Z)},4303:(ot,be,O)=>{O.d(be,{Jn:()=>vn,KN:()=>$n,Xd:()=>Qe,qX:()=>ze});var v=O(5861),Z=O(4537),P=O(7879),Y=O(9058),ne=O(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Me="@firebase/app",F=new P.Yd("@firebase/app"),le={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ee(ye,H){try{ye.container.addComponent(H)}catch(ge){F.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Qe(ye){const H=ye.name;if(me.has(H))return F.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ee(ge,ye);return!0}function ze(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}const at=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),vn="10.5.0";function $n(ye,H,ge){var $e;let Xe=null!==($e=le[ye])&&void 0!==$e?$e:ye;ge&&(Xe+=`-${ge}`);const ft=Xe.match(/\s|\//),en=H.match(/\s|\//);if(ft||en){const V=[`Unable to register library "${Xe}" with version "${H}":`];return ft&&V.push(`library name "${Xe}" contains illegal characters (whitespace or "/")`),ft&&en&&V.push("and"),en&&V.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void F.warn(V.join(" "))}Qe(new Z.wA(`${Xe}-version`,()=>({library:Xe,version:H}),"VERSION"))}const co="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let Rt=null;function hn(){return Rt||(Rt=(0,ne.X3)(co,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw at.create("idb-open",{originalErrorMessage:ye.message})})),Rt}function Yn(){return(Yn=(0,v.Z)(function*(ye){try{return yield(yield hn()).transaction(bt).objectStore(bt).get(fs(ye))}catch(H){if(H instanceof Y.ZR)F.warn(H.message);else{const ge=at.create("idb-get",{originalErrorMessage:H?.message});F.warn(ge.message)}}})).apply(this,arguments)}function rn(ye,H){return Un.apply(this,arguments)}function Un(){return(Un=(0,v.Z)(function*(ye,H){try{const $e=(yield hn()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,fs(ye)),yield $e.done}catch(ge){if(ge instanceof Y.ZR)F.warn(ge.message);else{const $e=at.create("idb-set",{originalErrorMessage:ge?.message});F.warn($e.message)}}})).apply(this,arguments)}function fs(ye){return`${ye.name}!${ye.options.appId}`}class Qt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Ps(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,v.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xe=fi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Xe&&!H._heartbeatsCache.heartbeats.some(ft=>ft.date===Xe))return H._heartbeatsCache.heartbeats.push({date:Xe,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ft=>{const en=new Date(ft.date).valueOf();return Date.now()-en<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,v.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=fi(),{heartbeatsToSend:$e,unsentEntries:Xe}=function ps(ye,H=1024){const ge=[];let $e=ye.slice();for(const Xe of ye){const ft=ge.find(en=>en.agent===Xe.agent);if(ft){if(ft.dates.push(Xe.date),Fr(ge)>H){ft.dates.pop();break}}else if(ge.push({agent:Xe.agent,dates:[Xe.date]}),Fr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ft=(0,Y.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Xe.length>0?(H._heartbeatsCache.heartbeats=Xe,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ft})()}}function fi(){return(new Date).toISOString().substring(0,10)}class Ps{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,v.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function Dn(ye){return Yn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,v.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return rn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,v.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return rn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...H.heartbeats]})}})()}}function Fr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Ki(ye){Qe(new Z.wA("platform-logger",H=>new fe(H),"PRIVATE")),Qe(new Z.wA("heartbeat",H=>new Qt(H),"PRIVATE")),$n(Me,"0.9.20",ye),$n(Me,"0.9.20","esm2017"),$n("fire-js","")}("")},4537:(ot,be,O)=>{O.d(be,{H0:()=>Me,wA:()=>P});var v=O(5861),Z=O(9058);class P{constructor(F,j,X){this.name=F,this.instanceFactory=j,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(F){return this.instantiationMode=F,this}setMultipleInstances(F){return this.multipleInstances=F,this}setServiceProps(F){return this.serviceProps=F,this}setInstanceCreatedCallback(F){return this.onInstanceCreated=F,this}}const Y="[DEFAULT]";class ne{constructor(F,j){this.name=F,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(F){const j=this.normalizeInstanceIdentifier(F);if(!this.instancesDeferred.has(j)){const X=new Z.BH;if(this.instancesDeferred.set(j,X),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&X.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(F){var j;const X=this.normalizeInstanceIdentifier(F?.identifier),Le=null!==(j=F?.optional)&&void 0!==j&&j;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Te){if(Le)return null;throw Te}}getComponent(){return this.component}setComponent(F){if(F.name!==this.name)throw Error(`Mismatching Component ${F.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=F,this.shouldAutoInitialize()){if(function pe(ue){return"EAGER"===ue.instantiationMode}(F))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[j,X]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Le});X.resolve(Te)}catch{}}}}clearInstance(F=Y){this.instancesDeferred.delete(F),this.instancesOptions.delete(F),this.instances.delete(F)}delete(){var F=this;return(0,v.Z)(function*(){const j=Array.from(F.instances.values());yield Promise.all([...j.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...j.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(F=Y){return this.instances.has(F)}getOptions(F=Y){return this.instancesOptions.get(F)||{}}initialize(F={}){const{options:j={}}=F,X=this.normalizeInstanceIdentifier(F.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:X,options:j});for(const[Te,Ke]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Te)&&Ke.resolve(Le);return Le}onInit(F,j){var X;const Le=this.normalizeInstanceIdentifier(j),Te=null!==(X=this.onInitCallbacks.get(Le))&&void 0!==X?X:new Set;Te.add(F),this.onInitCallbacks.set(Le,Te);const Ke=this.instances.get(Le);return Ke&&F(Ke,Le),()=>{Te.delete(F)}}invokeOnInitCallbacks(F,j){const X=this.onInitCallbacks.get(j);if(X)for(const Le of X)try{Le(F,j)}catch{}}getOrInitializeService({instanceIdentifier:F,options:j={}}){let X=this.instances.get(F);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=F,ue===Y?void 0:ue),options:j}),this.instances.set(F,X),this.instancesOptions.set(F,j),this.invokeOnInitCallbacks(X,F),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,F,X)}catch{}var ue;return X||null}normalizeInstanceIdentifier(F=Y){return this.component?this.component.multipleInstances?F:Y:F}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(F){this.name=F,this.providers=new Map}addComponent(F){const j=this.getProvider(F.name);if(j.isComponentSet())throw new Error(`Component ${F.name} has already been registered with ${this.name}`);j.setComponent(F)}addOrOverwriteComponent(F){this.getProvider(F.name).isComponentSet()&&this.providers.delete(F.name),this.addComponent(F)}getProvider(F){if(this.providers.has(F))return this.providers.get(F);const j=new ne(F,this);return this.providers.set(F,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(ot,be,O)=>{O.d(be,{Am:()=>ue,Ub:()=>Me,Yd:()=>pe,in:()=>Z});const v=[];var Z=function(F){return F[F.DEBUG=0]="DEBUG",F[F.VERBOSE=1]="VERBOSE",F[F.INFO=2]="INFO",F[F.WARN=3]="WARN",F[F.ERROR=4]="ERROR",F[F.SILENT=5]="SILENT",F}(Z||{});const P={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Y=Z.INFO,ne={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},fe=(F,j,...X)=>{if(j<F.logLevel)return;const Le=(new Date).toISOString(),Te=ne[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Le}]  ${F.name}:`,...X)};class pe{constructor(j){this.name=j,this._logLevel=Y,this._logHandler=fe,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function Me(F){v.forEach(j=>{j.setLogLevel(F)})}function ue(F,j){for(const X of v){let Le=null;j&&j.level&&(Le=P[j.level]),X.userLogHandler=null===F?null:(Te,Ke,...Ne)=>{const qe=Ne.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Ke>=(Le??Te.logLevel)&&F({level:Z[Ke].toLowerCase(),message:qe,args:Ne,type:Te.name})}}}},1878:(ot,be,O)=>{O.d(be,{X3:()=>ct});var v=O(5861);const Z=(oe,q)=>q.some(Be=>oe instanceof Be);let P,Y;const pe=new WeakMap,Me=new WeakMap,ue=new WeakMap,F=new WeakMap,j=new WeakMap;let Te={get(oe,q,Be){if(oe instanceof IDBTransaction){if("done"===q)return Me.get(oe);if("objectStoreNames"===q)return oe.objectStoreNames||ue.get(oe);if("store"===q)return Be.objectStoreNames[1]?void 0:Be.objectStore(Be.objectStoreNames[0])}return Oe(oe[q])},set:(oe,q,Be)=>(oe[q]=Be,!0),has:(oe,q)=>oe instanceof IDBTransaction&&("done"===q||"store"===q)||q in oe};function qe(oe){return"function"==typeof oe?function Ne(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...q){return oe.apply(ut(this),q),Oe(pe.get(this))}:function(...q){return Oe(oe.apply(ut(this),q))}:function(q,...Be){const dt=oe.call(ut(this),q,...Be);return ue.set(dt,q.sort?q.sort():[q]),Oe(dt)}}(oe):(oe instanceof IDBTransaction&&function Le(oe){if(Me.has(oe))return;const q=new Promise((Be,dt)=>{const Jt=()=>{oe.removeEventListener("complete",fn),oe.removeEventListener("error",pn),oe.removeEventListener("abort",pn)},fn=()=>{Be(),Jt()},pn=()=>{dt(oe.error||new DOMException("AbortError","AbortError")),Jt()};oe.addEventListener("complete",fn),oe.addEventListener("error",pn),oe.addEventListener("abort",pn)});Me.set(oe,q)}(oe),Z(oe,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Te):oe)}function Oe(oe){if(oe instanceof IDBRequest)return function X(oe){const q=new Promise((Be,dt)=>{const Jt=()=>{oe.removeEventListener("success",fn),oe.removeEventListener("error",pn)},fn=()=>{Be(Oe(oe.result)),Jt()},pn=()=>{dt(oe.error),Jt()};oe.addEventListener("success",fn),oe.addEventListener("error",pn)});return q.then(Be=>{Be instanceof IDBCursor&&pe.set(Be,oe)}).catch(()=>{}),j.set(q,oe),q}(oe);if(F.has(oe))return F.get(oe);const q=qe(oe);return q!==oe&&(F.set(oe,q),j.set(q,oe)),q}const ut=oe=>j.get(oe);function ct(oe,q,{blocked:Be,upgrade:dt,blocking:Jt,terminated:fn}={}){const pn=indexedDB.open(oe,q),Ln=Oe(pn);return dt&&pn.addEventListener("upgradeneeded",Rn=>{dt(Oe(pn.result),Rn.oldVersion,Rn.newVersion,Oe(pn.transaction),Rn)}),Be&&pn.addEventListener("blocked",Rn=>Be(Rn.oldVersion,Rn.newVersion,Rn)),Ln.then(Rn=>{fn&&Rn.addEventListener("close",()=>fn()),Jt&&Rn.addEventListener("versionchange",lr=>Jt(lr.oldVersion,lr.newVersion,lr))}).catch(()=>{}),Ln}const Ie=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],we=new Map;function Pe(oe,q){if(!(oe instanceof IDBDatabase)||q in oe||"string"!=typeof q)return;if(we.get(q))return we.get(q);const Be=q.replace(/FromIndex$/,""),dt=q!==Be,Jt=ee.includes(Be);if(!(Be in(dt?IDBIndex:IDBObjectStore).prototype)||!Jt&&!Ie.includes(Be))return;const fn=function(){var pn=(0,v.Z)(function*(Ln,...Rn){const lr=this.transaction(Ln,Jt?"readwrite":"readonly");let ie=lr.store;return dt&&(ie=ie.index(Rn.shift())),(yield Promise.all([ie[Be](...Rn),Jt&&lr.done]))[0]});return function(Rn){return pn.apply(this,arguments)}}();return we.set(q,fn),fn}!function Ke(oe){Te=oe(Te)}(oe=>({...oe,get:(q,Be,dt)=>Pe(q,Be)||oe.get(q,Be,dt),has:(q,Be)=>!!Pe(q,Be)||oe.has(q,Be)}))},5861:(ot,be,O)=>{function v(P,Y,ne,fe,pe,Me,ue){try{var F=P[Me](ue),j=F.value}catch(X){return void ne(X)}F.done?Y(j):Promise.resolve(j).then(fe,pe)}function Z(P){return function(){var Y=this,ne=arguments;return new Promise(function(fe,pe){var Me=P.apply(Y,ne);function ue(j){v(Me,fe,pe,ue,F,"next",j)}function F(j){v(Me,fe,pe,ue,F,"throw",j)}ue(void 0)})}}O.d(be,{Z:()=>Z})},7582:(ot,be,O)=>{function Y(ie,le){var he={};for(var me in ie)Object.prototype.hasOwnProperty.call(ie,me)&&le.indexOf(me)<0&&(he[me]=ie[me]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(me=Object.getOwnPropertySymbols(ie);Ee<me.length;Ee++)le.indexOf(me[Ee])<0&&Object.prototype.propertyIsEnumerable.call(ie,me[Ee])&&(he[me[Ee]]=ie[me[Ee]])}return he}function X(ie,le,he,me){return new(he||(he=Promise))(function(Se,Qe){function ze(Kt){try{mt(me.next(Kt))}catch(at){Qe(at)}}function Fn(Kt){try{mt(me.throw(Kt))}catch(at){Qe(at)}}function mt(Kt){Kt.done?Se(Kt.value):function Ee(Se){return Se instanceof he?Se:new he(function(Qe){Qe(Se)})}(Kt.value).then(ze,Fn)}mt((me=me.apply(ie,le||[])).next())})}function re(ie){return this instanceof re?(this.v=ie,this):new re(ie)}function Ie(ie,le,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,me=he.apply(ie,le||[]),Se=[];return Ee={},Qe("next"),Qe("throw"),Qe("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function Qe(gn){me[gn]&&(Ee[gn]=function(vn){return new Promise(function(Zn,an){Se.push([gn,vn,Zn,an])>1||ze(gn,vn)})})}function ze(gn,vn){try{!function Fn(gn){gn.value instanceof re?Promise.resolve(gn.value.v).then(mt,Kt):at(Se[0][2],gn)}(me[gn](vn))}catch(Zn){at(Se[0][3],Zn)}}function mt(gn){ze("next",gn)}function Kt(gn){ze("throw",gn)}function at(gn,vn){gn(vn),Se.shift(),Se.length&&ze(Se[0][0],Se[0][1])}}function we(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,le=ie[Symbol.asyncIterator];return le?le.call(ie):(ie=function Ne(ie){var le="function"==typeof Symbol&&Symbol.iterator,he=le&&ie[le],me=0;if(he)return he.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&me>=ie.length&&(ie=void 0),{value:ie&&ie[me++],done:!ie}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),he={},me("next"),me("throw"),me("return"),he[Symbol.asyncIterator]=function(){return this},he);function me(Se){he[Se]=ie[Se]&&function(Qe){return new Promise(function(ze,Fn){!function Ee(Se,Qe,ze,Fn){Promise.resolve(Fn).then(function(mt){Se({value:mt,done:ze})},Qe)}(ze,Fn,(Qe=ie[Se](Qe)).done,Qe.value)})}}}O.d(be,{FC:()=>Ie,KL:()=>we,_T:()=>Y,mG:()=>X,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},ot=>{ot(ot.s=8591)}]);